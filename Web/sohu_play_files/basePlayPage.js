/** m.tv.sohu.com, v1.0.0 ,time  20140912 19:15:31, sohu inc */
function getAdsCallback(a){function b(a){var b,c,e,f,g,h,i;for(h=a.length,g=0,i="";h>g;){do b=d[255&a.charCodeAt(g++)];while(h>g&&-1==b);if(-1==b)break;do c=d[255&a.charCodeAt(g++)];while(h>g&&-1==c);if(-1==c)break;i+=String.fromCharCode(b<<2|(48&c)>>4);do{if(e=255&a.charCodeAt(g++),61==e)return i;e=d[e]}while(h>g&&-1==e);if(-1==e)break;i+=String.fromCharCode((15&c)<<4|(60&e)>>2);do{if(f=255&a.charCodeAt(g++),61==f)return i;f=d[f]}while(h>g&&-1==f);if(-1==f)break;i+=String.fromCharCode((3&e)<<6|f)}return i}function c(a){var b,c,d,e,f,g;for(b="",d=a.length,c=0;d>c;)switch(e=a.charCodeAt(c++),e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=a.charAt(c-1);break;case 12:case 13:f=a.charCodeAt(c++),b+=String.fromCharCode((31&e)<<6|63&f);break;case 14:f=a.charCodeAt(c++),g=a.charCodeAt(c++),b+=String.fromCharCode((15&e)<<12|(63&f)<<6|(63&g)<<0)}return b}var d=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);xmlData=c(b(a)),vast.parseData(xmlData)}!function(){window.sohutv={isJump:!1,ua:navigator.userAgent,plat:{},getQueryString:function(a){var b=new RegExp("(^|&?)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!==c?unescape(c[2]):null},getQueryJsonData:function(){var a=window.location.search.substr(1);a=a.replace(/^\?+/,"").replace(/&amp;/,"&");for(var b,c=a.split("&"),d=c.length,e={};d--;)if(b=c[d].split("="),b[0]){var f=b[1]||"";try{f=decodeURIComponent(f)}catch(g){f=unescape(f)}e[decodeURIComponent(b[0])]=f}return e},blankFun:function(){},getAsyncScript:function(a,b){var c=document.getElementsByTagName("head")[0]||document.body,d=document.createElement("script");d.async="true",d.src=a,b&&(d.onload=b),c.appendChild(d)},getScript:function(a,b,c){var d=document.getElementsByTagName("head")[0]||document.body,e=document.createElement("script"),f=!1;e.type="text/javascript",e.src=a,e.onload=e.onreadystatechange=function(){f||this.readyState&&"loading"===this.readyState||(f=!0,b&&b.apply(null,c||[]),e.onload=e.onreadystatechange=null,d.removeChild(e))},d.appendChild(e)},getCSS:function(a){var b=document.getElementsByTagName("head")[0]||document.body,c=document.createElement("link");c.href=a,c.rel="stylesheet",c.type="text/css",b.appendChild(c)},addPlat:function(){var a=navigator.userAgent,b=document.getElementsByTagName("html")[0],c=[];this.plat.IsAdr=!(!/Android|HTC|Adr/i.test(a)&&!(navigator.platform+"").match(/Linux/i)),this.plat.IsIPad=!this.plat.isAdr&&/iPad/i.test(a),this.plat.IsIPhone=!this.plat.isAdr&&/iPod|iPhone/i.test(a),this.plat.IsWindowsPhone=/Windows Phone/i.test(a),this.plat.IsIOS=this.plat.IsIPad||this.plat.IsIPhone,this.plat.IsWindowsPad=/Windows Pad/i.test(a),this.plat.IsWeixin=!(!window.WeixinJSBridge&&!/MicroMessenger/i.test(a)),this.plat.IsQQ=!!/MQQBrowser/i.test(a),this.plat.IsUC=!!/UCBrowser/i.test(a),this.plat.IsMi=!!/MiuiBrowser/i.test(a),this.plat.IsSafari=!(!a.match(/Safari/i)||this.plat.IsAdr),this.plat.IsChrome=!(!a.match(/Chrome/i)||this.plat.IsAdr),this.plat.IsBaidu=!!/baidubrowser/i.test(a),this.plat.isAdr?c.push("android"):this.plat.isAdr?c.push("windows_phone"):this.plat.isAdr?c.push("iPhone"):this.plat.isAdr&&c.push("iPad"),b.className=c.join(" ")},jumpSite:function(a){var b=navigator.userAgent,c=a.from||"";c=c.toLowerCase()+"";var d=location.href;try{this.isJump||!/MicroMessenger/i.test(b)&&"sogou"!==c||(this.isJump=!0,/http:\/\/m\.(tv|s)\.sohu\.com/i.test(d)&&(location.href=location.href.replace(/http:\/\/m\.(tv|s)\.sohu\.com/i,"http://wx.m.tv.sohu.com")))}catch(e){console.log(e)}return this.isJump},initPage:function(){var a=this.getQueryJsonData()||{};this.addPlat(),this.jumpSite(a)}},sohutv.initPage()}(),function(){"use strict";var a={level:"info",dateFormat:"yyyyMMdd hh:mm:ss",DOM:null,line:'<p class="Console-line"></p>',tgt:'<div id="Console-log" style="max-height: 200px;-webkit-overflow-scrolling:touch;overflow:auto;line-height:1.5;z-index:5000;position:fixed;left:0;top:0;width:70%;font-size:11px;background:rgba(0,0,0,.8);color:#fff;"></div>',style:"<style>.Console-line{ margin-top:-1px;padding:.5em;border-top:1px solid rgba(255,255,255,.3);width:70% } .c_info .c_log { color:white; } .c_error { color:red; } .c_warn { color:yellow; } .c_debug { color:green; } </style>",inited:!1};a.util={},a.util.getType=function(a){var b,c=a;return("object"==(b=typeof c)?null===c&&"null"||Object.prototype.toString.call(c).slice(8,-1):b).toLowerCase()},a.util.DateFormat=function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1===RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},a.applyData=function(a){a.alisLevel=a.level.toUpperCase().substring(0,1);var b=[" [ ",a.level," ] "].join("");return b},a.getTimestamp=function(){return a.util.DateFormat(new Date,a.dateFormat)},a.output=function(b,c){try{a.inited||a.init();var d=document.createElement("div");d.className="c_"+b.level.toLowerCase()||"c_info",d.innerHTML=a.applyData(b)+" "+c,a.DOM.appendChild(d)}catch(e){console.log("exception :"+c)}},a._logObj=function(b){var c=b||"INFO",d={timestamp:a.getTimestamp(),level:c};return d},a.log=function(b){var c=a._logObj("LOG");a.output(c,b)},a.debug=function(b){var c=a._logObj("DEBUG");a.output(c,b)},a.info=function(b){var c=a._logObj("INFO");a.output(c,b)},a.error=function(b){var c=a._logObj("ERROR");a.output(c,b)},a.warn=function(b){var c=a._logObj("WARN");a.output(c,b)},a.convertToText=function(a){var b;try{return a?"true"===a||("false"===a?!1:"null"===a?null:/^0/.test(a)||isNaN(b=Number(a))?/^\[\[\{]/.test(a)?JSON.stringify(a):a:b):a.toString()}catch(c){return a}},a.init=function(){if(!a.inited){var b=document.createElement("style");b.innerHTML=a.style,document.body.appendChild(b);var c=document.createElement("div");c.innerHTML=a.tgt,document.body.appendChild(c),a.DOM=document.getElementById("Console-log"),a.inited=!0}},window.Console=a}(),function(){function a(a){a&&a.indexOf("mmg.aty.sohu.com")>-1&&(a=c.repOrAddParams(a)),console.log("adEngine trackImg URL",a);var b=new Image;b.src=a,e.push(b)}var b,c=window.vast={},d=new Array,e=[];c.parseData=function(a){function e(a){var b=a.split(":"),c=parseInt(b[0]),d=parseInt(b[1]),e=parseInt(b[2]),f=3600*c+60*d+e;return f}window.DOMParser?(parser=new DOMParser,xmlDoc=parser.parseFromString(a,"text/xml")):(xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.async="true",xmlDoc.loadXML(a)),console.log(a);for(var f=xmlDoc.getElementsByTagName("Ad"),g=0;g<f.length;g++){for(var h={},i={},j=f[g].getElementsByTagName("InLine"),k=0;k<j.length;k++){var l=j[k].tagName,m=j[k].getElementsByTagName("AdSystem")[0].tagName,n=j[k].getElementsByTagName("AdSystem")[0].childNodes[0].nodeValue;i[m]=n;var o=j[k].getElementsByTagName("AdTitle")[0].tagName,p=j[k].getElementsByTagName("AdTitle")[0].childNodes[0].nodeValue;i[o]=p;var q=j[k].getElementsByTagName("Description")[0].tagName,r=j[k].getElementsByTagName("Description")[0].childNodes[0].nodeValue;i[q]=r;for(var s=j[k].getElementsByTagName("Impression"),t=new Array,u=0;u<s.length;u++){var v={},w={},x=j[k].getElementsByTagName("Impression")[u].tagName,y=j[k].getElementsByTagName("Impression")[u].childNodes[0].nodeValue,y=y.replace(/\s/g,"");v[x]=y;var z=j[k].getElementsByTagName("Impression")[u].getAttribute("id");w[z]=v,t.push(w)}i.Imp=t,i.isImp=!1;for(var A=j[k].getElementsByTagName("Creatives")[0],B=A.getElementsByTagName("Creative"),C=0;C<B.length;C++){var D=B[C].getElementsByTagName("Linear")[0],E=D.getElementsByTagName("Duration")[0].tagName,F=D.getElementsByTagName("Duration")[0].childNodes[0].nodeValue;i[E]=e(F);for(var G=D.getElementsByTagName("MediaFiles")[0],H=G.getElementsByTagName("MediaFile"),I=new Array,J=0;J<H.length;J++){var K={};if(H[J].hasChildNodes())var L=H[J].tagName,M=H[J].childNodes[0].nodeValue,M=M.replace(/\s/g,"");else var M=null;K[L]=M;var N=H[J].getAttribute("width");K.width=N;var O=H[J].getAttribute("height");K.height=O;var P=H[J].getAttribute("type");K.type=P;var Q=H[J].getAttribute("vid");K.vid=Q,I.push(K)}i.MediaFile=I;for(var R=D.getElementsByTagName("VideoClicks")[0],S=R.getElementsByTagName("ClickThrough"),T=0;T<S.length;T++){var U=S[T].tagName,V=S[T].childNodes[0].nodeValue,V=V.replace(/\s/g,"");i[U]=V}var W=R.getElementsByTagName("ClickTracking"),X=new Array;if(R.hasChildNodes()){for(var Y=0;Y<W.length;Y++){var Z={},$=W[Y].tagName,_=W[Y].childNodes[0].nodeValue,_=_.replace(/\s/g,"");Z[$]=_;var ab=W[Y].getAttribute("id");Z.id=ab,X.push(Z)}i.ClickTracking=X}var bb=D.getElementsByTagName("TrackingEvents")[0];if(void 0!=bb){for(var cb=bb.getElementsByTagName("Tracking"),db=new Array,eb=0;eb<cb.length;eb++){var fb={},gb=cb[eb].tagName,hb=cb[eb].childNodes[0].nodeValue,hb=hb.replace(/\s/g,"");fb[gb]=hb,adProTrkEvent=cb[eb].getAttribute("event"),adProTrkId=cb[eb].getAttribute("id"),adProTrkOffset=cb[eb].getAttribute("offset"),fb.event=adProTrkEvent,fb.id=adProTrkId,fb.isTrack=!1,fb.offset=null!=adProTrkOffset?e(adProTrkOffset):adProTrkOffset,db.push(fb)}i.Tracking=db}}for(var ib=j[k].getElementsByTagName("Extensions")[0],jb=ib.getElementsByTagName("Extension"),kb=0;kb<jb.length;kb++)for(var lb=jb[kb].getElementsByTagName("AdParams")[0],mb=(lb.getAttribute("adStyle"),lb.getAttribute("sequence"),lb.getElementsByTagName("CallbackFun")),nb=0;nb<mb.length;nb++);h[l]=i}d.push(h)}for(var ob=[],pb={},g=0;g<d.length;g++){var qb=d[g].InLine.MediaFile[0].MediaFile,rb=d[g].InLine.ClickThrough,sb=d[g].InLine.Duration,Q=d[g].InLine.MediaFile[0].vid;null!=qb?(pb.videoUrl=qb,pb.clickUrl=rb,pb.duration=sb,pb.vid=Q,pb=c.cbDataProcess(pb,d[g].InLine),ob.push(pb),pb={}):(pb.videoUrl="error",pb.clickUrl="error",pb.duration="error",pb.vid="error",pb=c.cbDataProcess(pb,d[g].InLine),ob.push(pb),pb={})}b(ob)},c.getData=function(a,c){"undefined"!=typeof d&&d instanceof Array&&(d=[]),b=c;var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.src=a,document.body.appendChild(e)},c.trackAd=function(b,e){var f=d[e],g=Math.floor(b);if(c.trackempty(e),void 0!=f.InLine.Tracking)for(var h=f.InLine.Tracking.length,i=0;h>i;i++){var j=f.InLine.Tracking[i];j.isTrack||g!=j.offset||(a(j.Tracking),j.isTrack=!0)}},c.trackImp=function(){var b=d.length,c=0;for(c=0;b>c;c++){var e=d[c];e.InLine.isImp=!0;for(var f=e.InLine.Imp.length,g=0;f>g;g++){var h,i=e.InLine.Imp[g];for(var j in i)h=i[j].Impression;a(h)}}},c.trackempty=function(b){var c=d[b];if(!c.InLine.isImp){console.log("fff:"+b);for(var e=c.InLine.Imp.length,f=0;e>f;f++){var g,h=c.InLine.Imp[f];for(var i in h)g=h[i].Impression;c.InLine.isImp=!0,a(g)}}},c.trackAdComplete=function(b){var c=d[b];if(void 0!=c.InLine.Tracking)for(var e=0;e<c.InLine.Tracking.length;e++)"complete"==c.InLine.Tracking[e].event&&a(c.InLine.Tracking[e].Tracking)},c.trackClick=function(b){var c=d[b];if(void 0!=c.InLine.ClickTracking)for(var e=c.InLine.ClickTracking.length,f=0;e>f;f++){var g=c.InLine.ClickTracking[f],h=g.ClickTracking;a(h)}},c.getQueryString=function(a){var b=new RegExp("(^|&?)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!==c?unescape(c[2]):null},c.getCookie=function(a){for(var b,c=document.cookie.split(";"),d=0;d<c.length;d++)if(b=c[d].split("="),b[0].trim()==a)return unescape(b[1]);return""},c.repOrAddParams=function(a){try{if(""!==a&&a.indexOf("mmg.aty.sohu.com")>-1){var b=a.match(/partner=([a-zA-Z0-9\-_\|]*)/i),d=c.getQueryString("src")||c.getQueryString("SRC")||c.getCookie("MTV_SRC")||"-2";b.length>=2&&""===b[1]&&(a=a+"&partner="+d)}}catch(e){console.log(e)}return a},c.cbDataProcess=function(a,b){var c=b.Imp[0].monitorServer.Impression,d=URL.getQueryData(c),e=d.p?d.p.split(","):[];return a.cnt=e.length,a}}();var ENABLE_DEBUG=!1,API_KEY="f351515304020cad28c92f70f002261c",API_URL="/api/",API_PARAMS={api_key:API_KEY,plat:"17",sver:"4.0",partner:"78"},TIPS_CODE={100:"该内容不存在,为您推荐其他视频"},API_PROXY_URL="http://m.tv.sohu.com/api/",H5_URL="http://h5.tv.sohu.com/",H5_TEST_URL="http://h5.tv.sohu.com/";ENABLE_DEBUG&&(H5_URL="http://t.m.tv.sohu.com/");var SohutvJSBridge="undefined"==typeof SohutvJSBridge?{}:SohutvJSBridge;"undefined"==typeof ENABLE_DEBUG&&(ENABLE_DEBUG=1);var DEBUG=ENABLE_DEBUG=!1,Channeled="",GlobalVideoDatas={},DOC=document,WIN=window,UNDEFINED=void 0,IsTouch="ontouchstart"in WIN,UA=WIN.navigator.userAgent,AdrPadRegex=/pad|XiaoMi\/MiPad|lepad|MediaPad|GT-P|SM-T|sch-i800|Nexus\s7|Nexus\s8|Nexus\s11|Kindle Fire HD|Tablet/i,IsAndroid=!(!/Android|HTC|Adr/i.test(UA)&&!(WIN.navigator.platform+"").match(/Linux/i)),IsAndroidPad=!(!IsAndroid||!AdrPadRegex.test(UA)),IsIPad=!IsAndroid&&/iPad/i.test(UA),IsIPhone=!IsAndroid&&/iPod|iPhone/i.test(UA),IsIOS=IsIPad||IsIPhone,IsWindowsPhone=/Windows Phone/i.test(UA),IsWindowsPad=/Windows Pad/i.test(UA),IsBlackBerry=/BB10|BlackBerry/i.test(UA),IsIEMobile=/IEMobile/i.test(UA),IsSymbian=/Symbian/i.test(UA),IsIE=!!DOC.all,IsSafari=!(!UA.match(/Safari/i)||IsAndroid),IsChrome=!(!UA.match(/Chrome/i)||IsAndroid),IsWeixin=!(!WIN.WeixinJSBridge&&!/MicroMessenger/i.test(UA)),IsQQ=!!/MQQBrowser/i.test(UA),IsUC=!!/UCBrowser/i.test(UA),IsMi=!!/MiuiBrowser/i.test(UA),IsBaidu=!!/baidubrowser/i.test(UA),PixelRatio=parseFloat(WIN.devicePixelRatio)||1,MAX_TOUCHMOVE_DISTANCE_FOR_CLICK=IsAndroid?10:6,START_EVENT=IsTouch?"touchstart":"mousedown",MOVE_EVENT=IsTouch?"touchmove":"mousemove",END_EVENT=IsTouch?"touchend":"mouseup",RESIZE_EVENT="onorientationchange"in WIN?"orientationchange":"resize",CANCEL_EVENT=IsTouch?"touchcancel":"mouseup",CssTransitions="WebKitTransitionEvent"in WIN,CssHas3d="WebKitCSSMatrix"in WIN&&"m11"in new WebKitCSSMatrix,RequestAnimationFrame="webkitRequestAnimationFrame"in WIN,AndroidApk="",DownloadLink="",StartClient,getDevicePixelRatio=function(){var a=1;try{a=void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?window.screen.systemXDPI/window.screen.logicalXDPI:void 0!==window.devicePixelRatio?window.devicePixelRatio:window.devicePixelRatio,a=parseFloat(a)||1}catch(b){}return a};PixelRatio=getDevicePixelRatio();var IsShouSou=location.host.indexOf("m.sohu.com")>-1,ScreenSizeCorrect=1,isGpad=function(){var a=1,b=!1,c=1,d=Math.floor(window.screen.width*c),e=Math.floor(window.screen.height*c),f=1;try{a=Math.sqrt(d*d+e*e),f=parseFloat(a/(160*PixelRatio))}catch(g){}if("ontouchstart"in window&&IsAndroid){var h=!!AdrPadRegex.test(UA);h?b=!0:!b&&(a>=2500||f>7.8)&&(b=!0)}return b};if(IsAndroidPad=isGpad(),String.prototype.hasOwnProperty("trim")||(String.prototype.trim=function(){return this.replace(/^(\s|\r|\n|\r\n)*|(\s|\r|\n|\r\n)*$/g,"")}),Function.prototype.hasOwnProperty("bind")||(Function.prototype.bind=function(a){var b=this,c=arguments.length>1?Array.slice(arguments,1):null;return function(){return b.apply(a||this,c)}}),!IsTouch&&IsIE)try{DOC.execCommand("BackgroundImageCache",!1,!0)}catch(e){console.log("BackgroundImageCache hover",e)}IsAndroid&&(WIN.screen.width/WIN.innerWidth).toFixed(2)==PixelRatio.toFixed(2)&&(ScreenSizeCorrect=1/PixelRatio);var APP_VER={AndroidPhone:"4.3",AndroidPad:"3.5",iPhone:"4.3",iPad:"4.3",WindowsPhone:"3.0",WindowsPad:"3.0"},IS_EXTERNAL_PLAYER=!1;(location.href.match(/player=1/i)||location.host.indexOf("m.sohu.com")>-1)&&(IS_EXTERNAL_PLAYER=!0);var IsUC=!1;(UA.match(/ UC(Browser)?/i)||UA.match(/compatible;Android/i))&&(UA.match(/ LT15i /i)||(IsUC=!0));var IsQQBrowser=UA.match(/MQQBrowser/i),h5Src="",WebRoot="";"m.s.sohu.com"==location.host&&(WebRoot="http://m.tv.sohu.com");var SetListVersion="20131229",BlankFn=function(){};ENABLE_DEBUG&&URL.getQueryString("wx")&&(IsWeixin=!0);var H5Channeled=IsWeixin?"1200230001":"1211010100",LOC=location,IsUC=!1;(UA.match(/ UC(Browser)?/i)||UA.match(/compatible;Android/i))&&(UA.match(/ LT15i /i)||(IsUC=!0));var IsShouSou=location.host.indexOf("m.sohu.com")>-1,hasClass=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass=function(a,b){-1==(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className=""===a.className?b:a.className+" "+b)},removeClass=function(a,b){var c,d;if(-1!=a.className.indexOf(b)){for(c=a.className.split(" "),d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);a.className=c.join(" ")}},toggleClass=function(a,b){hasClass(a,b)?removeClass(a,b):addClass(a,b)},onDomReady=function(a){var b=window,c=document,d=!1,e=-1,f=10,g=/loaded|complete/,h="DOMContentLoaded",i="onreadystatechange",j="onload",k=function(){d===!1&&(d=!0,a&&a()),b.clearInterval(e)},l=function(){e=b.setInterval(function(){try{c.documentElement.doScroll("left"),k()}catch(a){}},f)},m=function(){e=b.setInterval(function(){g.test(c.readyState)&&k()},f)};return g.test(c.readyState)?(d=!0,!1):(c.addEventListener?(c.addEventListener(h,function(){c.removeEventListener(h,arguments.callee,!1),k()},!1),m()):c.attachEvent?(c.attachEvent(i,function(){g.test(c.readyState)&&(c.detachEvent(i,arguments.callee),k())}),b.attachEvent(j,function(){b.detachEvent(j,arguments.callee),k()}),!c.documentElement.doScroll||null!==b.frameElement&&"undefined"!=typeof b.frameElement||l()):b[j]=function(){k()},!0)},IsHistorySupport="pushState"in history;window.onDomReady=onDomReady;var URL={getQueryData:function(a){a=a.replace(/^\?+/,"").replace(/&amp;/,"&");for(var b,c=a.split("&"),d=c.length,e={};d--;)if(b=c[d].split("="),b[0]){var f=b[1]||"";try{f=decodeURIComponent(f)}catch(g){f=unescape(f)}e[decodeURIComponent(b[0])]=f}return e},getQueryString:function(a,b){var c,d=b?URL.getElSearchString(b):window.location.search.substring(1);return c=URL.getQueryData(d),a in c?c[a]:null},getParam:function(a){var b=new RegExp("(^|&?)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!==c?unescape(c[2]):null},getElSearchString:function(a){var a=$(a).get(0),b=a.search||"";if(!b){var c=a.getAttribute("FORM"==a.nodeName?"action":"href"),d=c.indexOf("?");-1!==d&&(b=c.slice(d))}return b},setQueryString:function(a,b){var c,d,a=$(a),e=a.get(0),f=e.search,g=f||"";if(!f){var h,i=e.nodeName;if("FORM"==i){if("post"!=e.method.toLowerCase()){for(c in b){d=b[c];var j=$('input[name="'+c+'"]',a);j?j.val(d):a.append($('<input type="hidden" name="'+c+'" value="'+d+'" />'))}return}h=a.attr("action")||location.href+""}else h=a.attr("href")||location.href+"";var k=h.indexOf("?"),l=h.indexOf("#");-1==l&&(l=h.length),0>k||k>l?(g="",k=l):g=h.slice(k+1,l)}var m=URL.getQueryData(g),n=[];for(c in b)m[c]=b[c];for(c in m)d=m[c],n.push(c+(d?"="+encodeURIComponent(d):""));if(!(n.length<1)){var o="?"+n.join("&");if(f)e.search=o;else{var p="FORM"==i?"action":"href";a.attr(p,h.slice(0,k)+o+h.slice(l))}}},objToQueryString:function(a){var b,c,d=[];for(b in a){c=a[b];var e=Object.prototype.toString.call(c);d.push("[object Array]"===e?b+"="+JSON.stringify(c):"[object Object]"===e?b+"="+JSON.stringify(c):b+"="+encodeURIComponent("undefined"==typeof c?"":c))}return d.join("&")}};URL.updateGlobalParms=function(a,b){for(var c,d,e=$("a[href],form",a),f=e.length,b=b||URL.URLGlobalParms;f--;)c=e.get(f),d=c.href,d&&d.match(/^(sms|tel|mail)/i)||URL.setQueryString(c,b)},function(a,b,c){URL.init=function(){var a,c=["clientType","clientVer","actionVer","plat","startClient","useVideoLink","r","player"],d=URL.getQueryData(location.search.substring(1)),e={},f=0;IS_EXTERNAL_PLAYER&&c.push("channeled");for(var g=c.length;g--;)a=c[g],d.hasOwnProperty(a)&&(e[a]=d[a],f++);URL.URLGlobalParms=e,f>0&&URL.updateGlobalParms(b,e)},c.fn.getUrlParam=function(a,b){return URL.getQueryString(a,b)}}(window,document,Zepto);var Cookie={isEnabled:!1,set:function(a,b,c,d){var e="";if(0!==c){var f=new Date;f.setTime(f.getTime()+36e5*(c||24)),e=";expires="+f.toGMTString()}var g=escape(a)+"="+escape(b)+e+";path=/"+(d?";domain="+d:"");return document.cookie=g,!0},getByName:function(a){var b=new RegExp("(?:^|;+|\\s+)"+a+"=([^;]*)"),c=document.cookie.match(b);return c?c[1]:""},get:function(a){for(var b,c=document.cookie.split(";"),d=0;d<c.length;d++)if(b=c[d].split("="),b[0].trim()==a)return unescape(b[1]);return""},del:function(a,b,c){var d=new Date;d.setTime(d.getTime()-1),document.cookie=a+"=; expires="+d.toGMTString()+";"+(c?"path="+c+"; ":"path=/; ")+(b?"domain="+b+";":"domain="+window.location.host+";")},remove:function(a){this.set(a,"",-1e3)},test:function(){var a="_c_t_";return this.set(a,"1"),this.isEnabled="1"===this.get(a),this.remove(a),this.isEnabled},serialize:function(a){return JSON.stringify(a)},deserialize:function(a){if("string"!=typeof a)return a;try{return JSON.parse(a)}catch(b){return a||void 0}},setSession:function(a,b){try{window.sessionStorage&&window.sessionStorage.setItem(a,this.serialize(b))}catch(c){console.log("not support session",c),this.set(a,this.serialize(b),24)}},getSession:function(a){var b="";try{window.sessionStorage&&(b=this.deserialize(window.sessionStorage.getItem(a)))}catch(c){console.log("not support session",c),b=this.deserialize(this.get(a))}return b}};if(Cookie.test(),URL&&Cookie){var _mtvsrc=h5Src=URL.getQueryString("src")||URL.getQueryString("SRC")||"";h5Src&&Cookie.set("MTV_SRC",h5Src,86400,".m.tv.sohu.com"),h5Src=Cookie.get("MTV_SRC")||_mtvsrc}!function(){"use strict";function a(){try{return f in d&&d[f]}catch(a){return!1}}var b,c={},d=window,e=document,f="localStorage",g="script";try{b=d[f]}catch(h){}var i=function(){};if(c.disabled=!1,c.set=i,c.get=i,c.remove=i,c.clear=i,c.transact=function(a,b,d){var e=c.get(a);null===d&&(d=b,b=null),"undefined"==typeof e&&(e=b||{}),d(e),c.set(a,e)},c.getAll=function(){},c.forEach=function(){},c.serialize=function(a){return JSON.stringify(a)},c.deserialize=function(a){if("string"!=typeof a)return void 0;try{return JSON.parse(a)}catch(b){return a||void 0}},a())b=d[f],c.set=function(a,d){return void 0===d?c.remove(a):(b.setItem(a,c.serialize(d)),d)},c.get=function(a){return c.deserialize(b.getItem(a))},c.remove=function(a){b.removeItem(a)},c.clearAll=function(){b.clear()},c.getAll=function(){var a={};return c.forEach(function(b,c){a[b]=c}),a},c.forEach=function(a){for(var d=0;d<b.length;d++){var e=b.key(d);a(e,c.get(e))}};else if(e.documentElement.addBehavior){var j,k;try{k=new ActiveXObject("htmlfile"),k.open();var l="<"+g+">document.w=window</"+g+">";l+='<iframe src="/favicon.ico"></iframe>',k.write(l),k.close(),j=k.w.frames[0].document,b=j.createElement("div")}catch(h){b=e.createElement("div"),j=e.body}var m=function(a){var d=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift(b),j.appendChild(b),b.addBehavior("#default#userData"),b.load(f);var e=a.apply(c,d);return j.removeChild(b),e};return d},n=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),o=function(a){return a.replace(/^d/,"___$&").replace(n,"___")};c.set=m(function(a,b,d){return b=o(b),void 0===d?c.remove(b):(a.setAttribute(b,c.serialize(d)),a.save(f),d)}),c.get=m(function(a,b){return b=o(b),c.deserialize(a.getAttribute(b))}),c.remove=m(function(a,b){b=o(b),a.removeAttribute(b),a.save(f)}),c.clear=m(function(a){var b=a.XMLDocument.documentElement.attributes;a.load(f);for(var c=0,d=b.length;d>c;c++){var e=b[c];a.removeAttribute(e.name)}a.save(f)}),c.getAll=function(){var a={};return c.forEach(function(b,c){a[b]=c}),a},c.forEach=m(function(a,b){for(var d=a.XMLDocument.documentElement.attributes,e=0,f=d.length;f>e;e++){var g=d[e];b(g.name,c.deserialize(a.getAttribute(g.name)))}})}try{var p="__storejs__";c.set(p,p),c.get(p)!==p&&(c.disabled=!0),c.remove(p)}catch(h){c.disabled=!0}c.enabled=!c.disabled,"undefined"!=typeof module&&module.exports&&this.module!==module?module.exports=c:"function"==typeof define&&define.amd&&define(c),c.getStorage=function(){try{b=d[f]}catch(a){console.log("localStorage is not supported")}return b},c.clear=function(a){var b=c.getStorage();if(b)if(a)for(var d in b)0===d.indexOf(a)&&b.removeItem(d);else b.clear()},d.Storage=c}(this);var WIN=window,DOC=document,Util={pingback:function(a,b){if(a)for(var c=a.split("|"),d=0,e=c.length;e>d;d++)(new Image).src=c[d],ENABLE_DEBUG&&void 0!==b&&(ADPingbackCount++,console.log("第"+ADPingbackCount+"个上报,第"+b+"秒:",c[d]))},getOSVersion:function(){var a=0;if(IsIOS){var b=UA.match(/os ([0-9_]+)/i);b&&b[1]&&(a=Util.getVersionNumber(b[1]))}else a=IsAndroid?Util.getAndroidVersionNumber():"4.0.1";return a},getAndroidVersionNumber:function(){var a=UA.match(/android(.*?);/i)||[];return a[1]||0},getVersionNumber:function(a){var b=a.replace(/_/g,".").replace(/^([0-9]+\.[0-9]+)[0-9\.]*/,"$1");return parseFloat(b||0)},timeFromNow:function(a){var b=60,c=60*b,d=24*c,e=30*d,f=12*e;return a=(+new Date-parseInt(a))/1e3,a>=f?Math.floor(a/f)+"年前":a>=e?Math.floor(a/e)+"个月前":a>=d?Math.floor(a/d)+"天前":a>=c?Math.floor(a/c)+"小时前":a>=b?Math.floor(a/b)+"分钟前":"刚刚"},getTotalMonth:function(a){var b=new Date(a);return 12*b.getFullYear()+b.getMonth()},secondsToTime:function(a){var b=parseInt(a);isNaN(b)&&(b=0);var c=Math.floor(b/60),a=b%60;if(10>a&&(a="0"+a),60>c)return 10>c&&(c="0"+c),c+":"+a;var d=Math.floor(c/60);return c%=60,10>c&&(c="0"+c),10>d&&(d="0"+d),d+":"+c+":"+a},secondsToTimeText:function(a){var b=parseInt(a);isNaN(b)&&(b=0);var c=Math.floor(b/60),a=b%60+"秒";if(60>c)return(c>0?c+"分":"")+a;var d=Math.floor(c/60);return c%=60,(d>0?d+"小时":"")+c+"分"+a},shortCount:function(a){return a=parseInt(a),a>1e8?a=Math.floor(a/1e8)+"亿":a>1e4&&(a=Math.floor(a/1e4)+"万"),a},shortFixedCount:function(a){return a=parseFloat(a),a&&a>1e8?a=(a/1e8).toFixed(1)+"亿":a&&a>1e4&&(a=(a/1e4).toFixed(1)+"万"),a},dateString:function(a){var b;return(b=a.match(/([0-9]{4}\-[0-9]+\-[0-9]+)/))&&(a=b[1]),a},setLoad:function(a){var a=$(a);return a.hasClass("_load_inited")||a.addClass("_load_inited").append($('<i class="ui_loading"><u></u><u></u><u></u></i>')),a},loadScript:function(a,b,c){var d=DOC.getElementsByTagName("head")[0]||DOC.body,e=DOC.createElement("script"),f=!1;e.src=a,e.onload=e.onreadystatechange=function(){f||this.readyState&&"loading"===this.readyState||(f=!0,b&&b.apply(null,c||[]),e.onload=e.onreadystatechange=null,d.removeChild(e))},d.appendChild(e)},formatURL:function(a){return(a+"").replace(/^https?:\/\/(my\.|v\.)?tv\./i,"http://m.tv.").replace("http://s.","http://m.s.").replace("http://m.s.","http://m.tv.").replace(/^http:\/\/(video\.)?2012/i,"http://m.s")},getPageOffset:function(){return WIN.pageYOffset||DOC.body&&DOC.body.scrollTop||0},getSohuDefaultApplink:function(a){if(a&&"string"==typeof a)return a;var b="http://m.tv.sohu.com/app";return IsAndroid&&(b=IsAndroidPad?"http://upgrade.m.tv.sohu.com/channels/hdv/3.5/SohuTV_3.5.0_680_201406191825.apk":"http://upgrade.m.tv.sohu.com/channels/hdv/4.3.2/sohuvideo_v4.3.2_680.apk"),IsIPhone&&(b="https://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8"),IsIPad&&(b="https://itunes.apple.com/cn/app/sou-hu-shi-pin-hd/id414430589?mt=8"),IsWindowsPhone&&(b="http://www.windowsphone.com/zh-CN/apps/403faf93-d22c-4331-ac32-9560ee9fac94"),IsWindowsPad&&(b="http://apps.microsoft.com/windows/zh-CN/app/c5ae3c2a-5573-45c2-ac63-7d67e01de6bb"),IsWeixin&&(b="http://a.app.qq.com/o/simple.jsp?pkgname=com.sohu.sohuvideo&g_f=991881"),b},ajaxAppLinkBySrcPlt:function(a,b){var c=b||Cookie.get("MTV_SRC")||"0",d=Util.getSohuDefaultApplink();c=c.substr(0,4);var e="http://m.tv.sohu.com/h5/cooperation/"+c+".json?pos=1&platform="+Util.getUserPt()+"&callback=?";return console.log("ajax url: "+e),$.ajax({url:e,type:"get",dataType:"JSONP",success:function(b){d=b&&b.records.length>0?b.records[0].link:Util.getSohuDefaultApplink(d),a&&a(d)},error:function(){d=Util.getSohuDefaultApplink(d),a&&a(d)}}),d},getDownloadAppLink:function(a,b){var c=Cookie.get("MTV_SRC")||"0",c=c.substr(0,4);console.log("src="+c+" ,plt="+Util.getUserPt());var d=Util.getSohuDefaultApplink(),e=!1;d=Util.ajaxAppLinkBySrcPlt(function(b){"function"==typeof a&&(e=!0,a(b));var c=$("#new_ad_appdownload")[0];c&&(c.href=b)});var f=!1;if(c&&(c.indexOf("1073")>-1||1073===c)&&(f=!0),IsAndroid&&f){var g=WIN.VideoData||WIN.videoData||{};if(g&&g.vid){var h=player&&player.videoData.urls.downloadUrl;h>0&&(h=h[0]||""),d="xgm://m.tv.sohu.com/download/video?vid="+g.vid+"&aid="+g.sid+"&video_order="+g.videoOrder+"&video_name="+(g.video_name||g.tvname)+"&url_down="+h+"&hor_high_pic="+g.horHighPic+"&isSohuFormat=0"}}return e||"function"!=typeof a||a(d),"function"==typeof b&&b(d),d},getDownloadAppLinkIndex:function(a){var b="http://m.tv.sohu.com/app",c=WIN.VideoData||WIN.videoData||{};return URLParms.clientType&&"1"===URLParms.startClient&&1===URL.getQueryString("isappinstalled")?c&&c.vid&&(b="sohuvideo://",b+="action.cmd?action=1.1&vid="+c.vid+"&cid="+c.cid+"&sid="+c.sid+"&cateCode="+c.cateCode):(b=Util.getSohuDefaultApplink(a),IsAndroid&&(tmpapklink=Util.ajaxAppLinkBySrcPlt(null,0),tmpapklink&&(b=tmpapklink))),IS_EXTERNAL_PLAYER&&DOC.referrer.match(/m\.sohu\.com/i),b},appLink:function(){{var a=$(this);a.attr("channel")}ClickTrace.pingback(a);var b=function(b){setTimeout(function(){location.href=a.attr("href")||b},50)};return Util.getDownloadAppLink(b),!1},appLinkForDiors:function(){function a(a){setTimeout(function(){location.href=a},50)}var b=($(this),h5Src),c="";switch(String(b)){case"433":c="http://upgrade.m.tv.sohu.com/channels/hdv/all/SohuTV_4.0.2_433_201403101517.apk";break;case"435":case"1001|1100":c="http://upgrade.m.tv.sohu.com/channels/hdv/all/SohuTV_4.0.2_435_201403101517.apk";break;case"1028|1100":c="http://upgrade.m.tv.sohu.com/channels/hdv/all/SohuTV_4.0.2_436_201403101517.apk";break;default:c="http://upgrade.m.tv.sohu.com/channels/hdv/all/SohuTV_4.0.2_983_201403101517.apk"}return Util.getDownloadAppLink(c,a),!1},getConnectionType:function(){var a,b=window.navigator.connection,c="";return b&&(a=b.type,a==b.CELL_2G?c="2g":a==b.CELL_3G?c="3g":a==b.WIFI&&(c="wifi")),c},_isMeizu:!1,isMeizu:function(){var a=!1;if(IsAndroid)if(IsUC||IsQQBrowser||!UA.match(/(M9|M032) Build/i)){if(UA.match(/Mac OS X/i)&&!IsUC){var b=WIN.screen.width,c=WIN.screen.height;(640==b||960==b||320==b&&410==c||410==b&&320==c)&&(a=!0)}}else a=!0;return Util._isMeizu=a,Util.isMeizu=function(){return Util._isMeizu},a},fixVideoMask:function(){IsAndroid&&(IsUC||IsQQBrowser)&&(SohuMobilePlayer.pause(),Util.shaveWindow())},shaveWindow:function(){return WIN.scrollTo(0,Util.getPageOffset()+1)},formatDateWithBar:function(a){var a=a||new Date,b=a.getMonth()+1,c=a.getDate();return b.toString().length<2&&(b="0"+b),c.toString().length<2&&(c="0"+c),a.getFullYear()+"-"+b+"-"+c},formatDateWithZh:function(a){var a=a||new Date,b=a.getMonth()+1,c=a.getDate();return b.toString().length<2&&(b="0"+b),c.toString().length<2&&(c="0"+c),a.getFullYear()+"年"+b+"月"+c+"日"},formatDateStr:function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1===RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},getDownloadURL:function(a){a=a||"";var b=a.indexOf(".mp4");return b>-1&&(URL.getQueryString("src")||Cookie.get("src"))&&(a=a.replace("plat=17","plat=3")),a},getUserPt:function(){var a=1;return IsIPad&&(a=2),IsIPhone&&(a=3),IsAndroid&&(a=5,/tv/i.test(UA)&&(a=6)),IsAndroidPad&&(a=4),IsWindowsPad&&(a=7),IsWindowsPhone&&(a=8),IsSymbian&&(a=9),a},escape:function(a){return String(a).replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},reverse:function(a){return Array.isArray(a)?a.reverse():String(a).split("").reverse().join("")},tojson:function(a){return JSON.stringify(a)}},EncodeUtil={utf8to16:function(a){var b,c,d,e,f,g,h,i,j;
for(b=[],e=a.length,c=d=0;e>c;){switch(f=a.charCodeAt(c++),f>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b[d++]=a.charAt(c-1);break;case 12:case 13:g=a.charCodeAt(c++),b[d++]=String.fromCharCode((31&f)<<6|63&g);break;case 14:g=a.charCodeAt(c++),h=a.charCodeAt(c++),b[d++]=String.fromCharCode((15&f)<<12|(63&g)<<6|63&h);break;case 15:switch(15&f){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:g=a.charCodeAt(c++),h=a.charCodeAt(c++),i=a.charCodeAt(c++),j=(7&f)<<18|(63&g)<<12|(63&h)<<6|(63&i)-65536,b[d]=j>=0&&1048575>=j?String.fromCharCode(j>>>10&1023|55296,1023&j|56320):"?";break;case 8:case 9:case 10:case 11:c+=4,b[d]="?";break;case 12:case 13:c+=5,b[d]="?"}}d++}return b.join("")},b64_decodex:function(a){var b,c,d=[],e="";for(b=0,c=a.length;c>b;b+=4)e+=EncodeUtil.b64_423(a.substr(b,4));for(b=0,c=e.length;c>b;b+=8)d+=EncodeUtil.b2i(e.substr(b,8));return d},b64_423:function(a){for(var b=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"),c=0,d=a.length,e="";d>c;c++){for(var f=0;64>f;f++)if(a.charAt(c)==b[f]){var g=f.toString(2);e+=("000000"+g).substr(g.length);break}if(64==f)return 2==c?e.substr(0,8):e.substr(0,16)}return e},b2i:function(a){for(var b=0,c=128,d=0;8>d;d++,c/=2)"1"==a.charAt(d)&&(b+=c);return String.fromCharCode(b)}},Passport=function(){var a,b={},c=function(){var a,b,c,d=["ppinf","ppinfo","passport"];for(a=0,b=d.length;b>a;a++)if(c=new RegExp("\\b"+d[a]+"\\b=(.*?)(?:$|;)").exec(document.cookie),c&&c.length){c=c[1];break}return c},d=function(a){var b="";try{a=unescape(a).split("|"),("1"==a[0]||"2"==a[0])&&(b=EncodeUtil.utf8to16(EncodeUtil.b64_decodex(a[3])))}catch(c){}return b},e=function(a){var b,c,d,e={};for(a=(a||"").split("|"),b=0,c=a.length;c>b;b++)d=a[b].split(":"),d.length>1&&(e[d[0]]=d[2]);return e},f=function(){var f=c(),g=b;return a!=f&&(a=f,g=e(d(f)),b=g),g};return{getPassport:function(){return f().userid||""},getUid:function(){return f().uid||""},getUUID:function(){return f().uuid||""},getQname:function(){return f().uniqname||""}}}();!function(){"use strict";var a=window.svp||{};a.TYPE_CODE_MSG={COPYRIGHT:{100:"您所在的国家或地区，不在所播放的节目版权范围"},SUPPORT:{100:"您的浏览器不支持播放功能，请使用",101:"该视频目前只支持5分钟观看，观看完整视频，请使用",102:"UC浏览器不支持播放功能，建议使用系统浏览器或请使用",103:"直播请使用搜狐视频客户端"},REQUEST:{100:"网络超时，请刷新重试"}},a.PLAY_MODE={nor:"流畅",hig:"高清",sup:"超清"},a.DEFAULT_CONFIG={width:"100%",height:"100%",pWidth:"",pHeight:"",volume:1,elemId:"videoTagId",dataType:"",alwaysShowControls:!1,autoplay:!0,defControls:!1,loop:!1,preload:!1,mediaType:"vod",modeType:"nor",html5SkinCss:"http://m.tv.sohu.com/mb/dist/css/play.css",posterType:"horizon",timeLimit:-1,isPauseAd:!1,pauseAdImg:"",mediaAdPlatform:"none",isCopyrightCheck:!0,androidPhoneDownloadUrl:"http://upgrade.m.tv.sohu.com/channels/hdv/4.2/SohuTV_4.2_680_201406030956.apk",androidPadDownloadUrl:"http://upgrade.m.tv.sohu.com/channels/hdv/3.5/SohuTV_3.5.0_680_201406191825.apk",iosDownloadUrl:"http://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8",winPhoneDownLoadUrl:"http://www.windowsphone.com/zh-CN/apps/403faf93-d22c-4331-ac32-9560ee9fac94",pcDownLoadUrl:"http://m.tv.sohu.com/app/",adClose:"0",appid:"tv",debug:!1,channeled:"default",fullscreenType:0,isRemHistory:!1},a.$=Zepto||jQuery,window.svp=a}(),function(a){"use strict";var b=function(b){var c=b.match(/MQQBrowser\/(\d+\.\d+)/i),d=b.match(/QQ\/(\d+\.(\d+)\.(\d+)\.(\d+))/i),e=b.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/)||b.match(/MicroMessenger\/((\d+)\.(\d+))/),f=b.match(/Mac\sOS\sX\s(\d+\.\d+)/),g=b.match(/Windows(\s+\w+)?\s+?(\d+\.\d+)/),h=b.match(/MiuiBrowser\/(\d+\.\d+)/i),i=b.match(/UCBrowser\/(\d+\.\d+(\.\d+\.\d+)?)/)||b.match(/\sUC\s/),j=b.match(/IEMobile(\/|\s+)(\d+\.\d+)/),k=b.match(/(ipod\sOS)\s([\d_]+)/);if(a.browser=a.browser||{},a.os=a.os||{},window.ActiveXObject){var l=6;(window.XMLHttpRequest||b.indexOf("MSIE 7.0")>-1)&&(l=7),(window.XDomainRequest||b.indexOf("Trident/4.0")>-1)&&(l=8),b.indexOf("Trident/5.0")>-1&&(l=9),b.indexOf("Trident/6.0")>-1&&(l=10),a.browser.ie=!0,a.browser.version=l}else b.indexOf("Trident/7.0")>-1&&(a.browser.ie=!0,a.browser.version=11);k&&(this.os.ios=this.os.ipod=!0,this.os.version=k[2].replace(/_/g,".")),g&&(this.os.windows=!0,this.os.version=g[2]),f&&(this.os.Mac=!0,this.os.version=f[1]),b.indexOf("lepad_hls")>0&&(this.os.LePad=!0),c&&(this.browser.MQQ=!0,this.browser.version=c[1]),d&&(this.browser.MQQClient=!0,this.browser.version=d[1]),e&&(this.browser.WeChat=!0,this.browser.version=e[1]),h&&(this.browser.MIUI=!0,this.browser.version=h[1]),i&&(this.browser.UC=!0,this.browser.version=i[1]||0/0),!c||window.mtt&&window.mtt.getBrowserParam||!a.os.android||(this.browser.UC=!0,this.browser.version="9.6.0",this.browser.MQQ=!1),j&&(this.browser.IEMobile=!0,this.browser.version=j[2]),this.os.windows&&(this.os.win64="undefined"!=typeof navigator.platform&&"win64"===navigator.platform.toLowerCase()?!0:!1);var m={iPad7:"iPad; CPU OS 7",LePad:"lepad_hls",XiaoMi:"MI-ONE",SonyDTV:"SonyDTV",SamSung:"SAMSUNG",HTC:"HTC",VIVO:"vivo"};for(var n in m)this.os[n]=-1!==b.indexOf(m[n]);this.os.getNumVersion=function(){return parseFloat(a.os.version,"10")},this.os.hasTouch="ontouchstart"in window,this.os.hasTouch&&this.os.ios&&this.os.getNumVersion()<6&&(this.os.hasTouch=!1),a.browser.WeChat&&a.browser.version<5&&(this.os.hasTouch=!1),a.extend(a.browser,{getNumVersion:function(){return parseFloat(a.browser.version,"10")},isFFCanOcx:function(){return a.browser.firefox&&a.browser.getNumVersion()>=3?!0:!1},isCanOcx:function(){return!(!a.os.windows||!a.browser.ie&&!a.browser.isFFCanOcx()&&!a.browser.webkit)},isNotIESupport:function(){return!!a.os.windows&&(!!a.browser.webkit||a.browser.isFFCanOcx())}}),a.os.isIos=a.os.ios,a.os.android=!(!a.os.android&&!/Android|HTC|Adr/i.test(b)),a.os.isAndroid=a.os.android,a.os.isIphone=!a.os.isAndroid&&/iPod|iPhone/i.test(b),a.os.isVivoPhone=/vivo/i.test(b),a.os.isWindowsPhone=/Windows Phone/i.test(b),a.os.isSonyPhone=/Sony/i.test(b),a.os.isWindowsPad=/Windows Pad/i.test(b),a.os.isIpad=!a.os.isAndroid&&/iPad.*Mac OS/i.test(b),a.os.isAndroidPad=!!IsAndroidPad||!1,a.os.isSupportPlayVideoInline=a.os.isIpad||!a.os.isIphone,a.os.isBlackBerry=/BB10|BlackBerry/i.test(b),a.os.isIEMobile=/IEMobile/i.test(b),a.os.isSymbian=/Symbian/i.test(b),a.os.isIE=a.browser.ie&&!!document.all,a.os.isCoolPad=/Coolpad/i.test(b),a.os.isBaiduBrowser=/Baidu/i.test(b),a.os.isUCBrowser=/UCBrowser/i.test(b),a.os.isQQBrowser=/QQBrowser/i.test(b),a.os.isWeixin=!(!window.WeixinJSBridge&&!/MicroMessenger/i.test(b)),a.os.isPCIEBrowser=/MSIE/i.test(b),a.os.isFirefoxBrowser=/Firefox/i.test(b),a.os.isMIOne=/MI-ONE/i.test(b),a.os.isHuaWei=/HUAWEI/i.test(b),a.os.isSAMSUNG=/SAMSUNG/i.test(b),a.os.isOldWindowsPhone=/Windows\sPhone\s([1234567]\.|8\.0)/i.test(b),a.os.isNewWindowsPhone=a.os.isWindowsPhone&&!a.os.isOldWindowsPhone?!0:!1,a.userAgent={},a.extend(a.userAgent,a.os),a.extend(a.userAgent,a.browser),a.userAgent.browserVersion=a.browser.version,a.userAgent.osVersion=a.os.version,a.userAgent.desc=b,a.ua=a.userAgent};b.call(a,navigator.userAgent)}($),"undefined"==typeof svp&&(svp={},svp.$=window.$||{}),function($){$.fn.oriShow=function(){return this.css({display:"block"}),this},$.fn.oriHide=function(){return this.css({display:"none"}),this};var extFun={htmlLog:function(a,b){0===$("#js_htmlLog").length&&$("body").append($('<div id="js_htmlLog" style="height: 200px;overflow: scroll;"></div>'));var c=[];$.isUndefined(a)||c.push("<span>"+a+"</span>"),$.isUndefined(b)||c.push("<span>"+b+"</span>"),$("#js_htmlLog").prepend(c.join(" ")+"<br>")},noop:function(){},blankFun:function(){},isString:function(a){return"string"===$.type(a)},isUndefined:function(a){return"undefined"===$.type(a)},isNumber:function(a){return"number"===$.type(a)},isEmpty:function(a){if(null==a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(hasOwnProperty.call(a,b)||null!==a[b])return!1;return!0},isArray:function(a){return!$.isUndefined(a)&&a instanceof Array},merge:function(a,b){for(var c in a)$.isUndefined(b[c])||(a[c]=b[c]);return a},now:function(){return(new Date).getTime()},getISOTimeFormat:function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes(),g=a.getSeconds();return[[b,10>c?"0"+c:c,10>d?"0"+d:d].join("-"),[10>e?"0"+e:e,10>f?"0"+f:f,10>g?"0"+g:g].join(":")].join(" ")},formatSeconds:function(a){a=parseInt(a);var b=parseInt(a/60),c=b>=60?parseInt(b/60):0,d=a%60,e="";return b>=60&&(b%=60),c>0&&(e+=10>c?"0"+c:c,e+=":"),e+=10>b?"0"+b:b,e+=":",e+=10>d?"0"+d:d},getHost:function(){var a=window.location.hostname||window.location.host,b=location.host.split(".");return b.length>1&&(a=b.slice(b.length-2).join(".")),a},getUrlParam:function(a,b){b=b||document.location.toString();var c=new RegExp("(^|&|\\\\?)"+a+"=([^&]*)(&|$|#)"),d=null;return(d=b.match(c))?d[2]:""},filterXSS:function(a){return $.isString(a)?(a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/\"/g,"&quot;"),a=a.replace(/\'/g,"&apos;")):a},createGUID:function(a){a=a||32;for(var b="",c=1;a>=c;c++){var d=Math.floor(16*Math.random()).toString(16);b+=d}return b},formatSize:function(a){var b=""+a;return b.indexOf("%")>0?b:b.indexOf("px")>0?b:/^\d+$/.test(b)?b+"px":b},isTrue:function(v){return eval(svp.$.filterXSS(v))}};$.extend($,extFun),svp.Deferred=$.extend(!0,{},$).Deferred}(svp.$),function(){function a(a){return a instanceof Array}var b,c,d,e,f,g,h,i,j,k,l,m,n,o=[].slice;f="1.3.2",c="pending",e="resolved",d="rejected",j=function(a,b){return null!=a?a.hasOwnProperty(b):void 0},l=function(a){return j(a,"length")&&j(a,"callee")},i=function(b){return l(b)?i(Array.prototype.slice.call(b)):a(b)?b.reduce(function(b,c){return a(c)?b.concat(i(c)):(b.push(c),b)},[]):[b]},g=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},m=function(a,b){return function(){var c;return c=[a].concat(Array.prototype.slice.call(arguments,0)),b.apply(this,c)}},h=function(a,b,c){var d,e,f,g,h;for(g=i(a),h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(d.call.apply(d,[c].concat(Array.prototype.slice.call(b))));return h},b=function(){var a,f,g,j,k,l;return l=c,j=[],k=[],a=[],g={},this.promise=function(f){var m,n;return f=f||{},f.state=function(){return l},n=function(a,b){return function(){return l===c&&b.push.apply(b,i(arguments)),a()&&h(arguments,g),f}},f.done=n(function(){return l===e},j),f.fail=n(function(){return l===d},k),f.always=n(function(){return l!==c},a),m=function(a,c){var d,e;return d=new b,e=function(a,b,c){return a(c?function(){return b(c.apply(null,i(arguments)))}:function(){return b.apply(null,i(arguments))})},e(f.done,d.resolve,a),e(f.fail,d.reject,c),d},f.pipe=m,f.then=m,f},this.promise(this),f=function(b,d,e){return function(){return l===c&&(l=b,g=arguments,h([d,a],g,e)),this}},this.resolve=f(e,j),this.reject=f(d,k),this.resolveWith=function(){var a,b;return b=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],f(e,j,b).apply(null,a)},this.rejectWith=function(){var a,b;return b=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],f(d,k,b).apply(null,a)},this},n=function(){var a,c,d,e,f,h,j,k;for(e=new b,c=i(arguments),d=g(c.length,e.resolve),f=0,j=c.length;j>f;f++)a=c[f],a.done(d);for(h=0,k=c.length;k>h;h++)a=c[h],a.fail(function(){return e.reject()});return e.promise()},k=function(a){return a.Deferred=function(){return new b},a.ajax=m(a.ajax,function(a,c){var d,e;return null==c&&(c={}),e=new b,d=function(a,b){return m(a,function(){var a,c;return c=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],c&&c.apply(null,a),b.apply(null,a)})},c.success=d(c.success,e.resolve),c.error=d(c.error,e.reject),a(c),e.promise()}),a.ajaxTolerate=m(a.ajax,function(a,c){var d,e,f=0,g=!1;return null==c&&(c={}),e=new b,d=function(b,d,e){return m(b,function(){var b,h;if(!g)return h=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],e?1>f?(f++,a(c),null):2==f?(f++,g=!0,h&&h.apply(null,b),d.apply(null,b)):(f++,null):(g=!0,h&&h.apply(null,b),d.apply(null,b))})},c.success=d(c.success,e.resolve),c.error=d(c.error,e.reject,!0),a(c),setTimeout(function(){g||a(c)},1e3),e.promise()}),a.when=n},"undefined"!=typeof exports?(exports.Deferred=function(){return new b},exports.when=n,exports.installInto=k):(this.Deferred=function(){return new b},this.Deferred.when=n,this.Deferred.installInto=k,this.DeferedClass=b)}.call(svp),svp.Deferred.installInto(Zepto),function(a){for(var b=0,c=a.length;c>b;b++)if("function"==typeof window[a[b]]){svp.$=window[a[b]];break}}(["Zepto"]),function(){"undefined"==typeof document.DOCUMENT_NODE&&(document.DOCUMENT_NODE=9)}(),function(a){if("undefined"==typeof a.getAsyncScript&&(a.getAsyncScript=function(a,b){var c=document.getElementsByTagName("head")[0]||document.body,d=document.createElement("script");d.async="true",d.src=a,b&&(d.onload=b),c.appendChild(d)}),"undefined"==typeof a.getScript&&(a.getScript=function(a,b,c){var d=document.getElementsByTagName("head")[0]||document.body,e=document.createElement("script"),f=!1;e.type="text/javascript",e.src=a,e.onload=e.onreadystatechange=function(){f||this.readyState&&"loading"===this.readyState||(f=!0,b&&b.apply(null,c||[]),e.onload=e.onreadystatechange=null,d.removeChild(e))},d.appendChild(e)}),"undefined"==typeof a.getCSS&&(a.getCSS=function(a){var b=document.getElementsByTagName("head")[0]||document.body,c=document.createElement("link");c.href=a,c.rel="stylesheet",c.type="text/css",b.appendChild(c)}),"undefined"==typeof a.getFnName&&(a.getFnName=function(a){var b="";return"function"==typeof a&&(b=a.name||(/function ([^\(]+)/.exec(a.toString())||[])[1]||""),b}),"undefined"==typeof a.getFnArgName){var b=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;a.getFnArgName=function(a){if("function"==typeof a){var c=a.toString().replace(b,""),d=c.slice(c.indexOf("(")+1,c.indexOf(")")).match(/([^\s,]+)/g);return null===d?[]:d}return[]}}}(svp.$),function(a,b){var c={vid:"",liveId:""};a.API_KEY="f351515304020cad28c92f70f002261c",a.API_URL="http://api.tv.sohu.com/",a.API_PROXY_URL="http://m.tv.sohu.com/api/",a.API_PARAMS={api_key:a.API_KEY,plat:"17",sver:"4.0",partner:"78"},a.Helper={formatVideoData:function(a,c){var d=this,e=a,f=c,g=d.getVideoUrls(c),h="";c&&c.aid&&(h=c.aid||"");var i=b.extend(!0,f,e);i.vid=a.vid?a.vid:c.vid||"",i.tvid=a.tvid?a.tvid:c.tv_id||"",i.nid=a.nid?a.nid:c.nid||"",i.sid=a.sid?a.sid:c.aid||h,i.plid=a.plid?a.plid:c.aid||h,i.tvname=c.video_name||this.fotmatBasicParams(a,c,"tvname","tv_name")||"",i.tips=c.tip||this.fotmatBasicParams(a,c,"tips","tip")||"",i.videoCount=a.videoCount?a.videoCount:c.video_count||0,i.videoOrder=a.videoOrder?a.videoOrder:c.video_order||1,i.totalSet=a.totalSet?a.totalSet:c.total_video_count||0,i.cateCode=a.cateCode?a.cateCode:c.cate_code||"",i.setListPageSize=a.setListPageSize?a.setListPageSize:20,i.startTime=a.startTime?a.startTime:c.start_time||0,i.endTime=a.endTime?a.endTime:c.end_time||0,i.totalDuration=a.totalDuration?a.totalDuration:c.total_duration||0,i.downloadSize=a.downloadSize?a.downloadSize:c.file_size_mobile||0,i.playCount=a.playCount?a.playCount:c.play_count||0,i.showDate=a.showDate?a.showDate:c.show_date||"",i.isAds=a.isAds?a.isAds:c.is_ads||0,i.ipLimit=a.ipLimit?a.ipLimit:c.ip_limit||0,i.mobileLimit=a.mobileLimit?a.mobileLimit:c.mobile_limit||0,i.h5Limit=a.h5Limit?a.h5Limit:c.h5_limit||0,i.areaId=a.areaId?a.areaId:c.area_id||6,i.verHighPic=this.fotmatBasicParams(a,c,"verHighPic","ver_high_pic")||c.video_big_pic||c.ver_big_pic||"",i.horHighPic=this.fotmatBasicParams(a,c,"horHighPic","hor_high_pic")||c.video_big_pic||c.hor_big_pic||"",i=b.extend(!0,i,g);var j=["ip_limit","mobile_limit","clips_duration_nor","clips_duration_high","clips_bytes_high","clips_bytes_nor","clips_bytes_super","clips_duration_super","url_nor","url_high","url_super","url_nor_mp4","url_high_mp4","url_super_mp4"];return b.each(j,function(a,b){i.hasOwnProperty(b)&&delete i[b]}),i},fotmatBasicParams:function(a,b,c,d){return b&&b[d]?b[d]:a[c?c:d]||""},formatPlayUrl:function(a){if(a)var b=a.split(","),b=b.length>0&&""!=b[0]?b:[];return b},getVideoUrls:function(a){var b={};return b.durations={nor:a&&a.hasOwnProperty("clips_duration_nor")?this.formatPlayUrl(a.clips_duration_nor):[],hig:a&&a.hasOwnProperty("clips_duration_high")?this.formatPlayUrl(a.clips_duration_high):[],sup:a&&a.hasOwnProperty("clips_duration_super")?this.formatPlayUrl(a.clips_duration_super):[]},b.urls={m3u8:{nor:a&&a.hasOwnProperty("url_nor")?this.formatPlayUrl(a.url_nor):[],hig:a&&a.hasOwnProperty("url_high")?this.formatPlayUrl(a.url_high):[],sup:a&&a.hasOwnProperty("url_super")?this.formatPlayUrl(a.url_super):[]},mp4:{nor:a&&a.hasOwnProperty("url_nor_mp4")?this.formatPlayUrl(a.url_nor_mp4):[],hig:a&&a.hasOwnProperty("url_high_mp4")?this.formatPlayUrl(a.url_high_mp4):[],sup:a&&a.hasOwnProperty("url_super_mp4")?this.formatPlayUrl(a.url_super_mp4):[]},downloadUrl:a&&a.hasOwnProperty("download_url")?this.formatPlayUrl(a.download_url):[]},b},getParamsOption:function(a,c,d){a=a||{};var e=a.vid||b.getUrlParam("vid"),f=a.site||b.getUrlParam("site");if(a.vid=e?e:"",a.site=f?f:1,c&&(a[c]=a[c]?a[c]||b.getUrlParam(c):d),b.getUrlParam("aid"))try{a.aid=parseInt(b.getUrlParam("aid"))}catch(g){}return a},loadVideoUrlByVid:function(c,d){var e=this,f={};c=e.getParamsOption(c);var g=c.vid,h=c.site,i={};i.api_key=c.api_key||a.API_PARAMS.api_key,i.plat=c.plat||a.API_PARAMS.plat,i.sver=c.sver||a.API_PARAMS.sver,i.partner=c.partner||a.API_PARAMS.partner;var j=c.aid||"",k={site:h};j&&(k.aid=j);var l=a.API_URL+"v4/video/info/"+g+".json?callback=?&"+b.param(b.extend({},i,k));if(""===g)return void console.log("videoinfo vid is null ",l);var m=b.Deferred();return b.ajaxTolerate({url:l,dataType:"jsonp"}).done(function(i){if(i.data){if(f=e.formatVideoData(c,i.data),m.resolve(),!d||!b.isFunction(d))return f;d(f)}else{var j="1"==h?2:1;l=a.API_URL+"v4/video/info/"+g+".json?callback=?&"+b.param(b.extend({},a.API_PARAMS,{site:j})),b.ajax({url:l,dataType:"jsonp",success:function(a){if(a.data){if(i=a,f=e.formatVideoData(c,i.data),m.resolve(),!d||!b.isFunction(d))return f;d(f)}},error:function(){m.reject()}})}}).fail(function(){m.reject()}),m},loadHLSUrlByLiveId:function(d,e){var f={},g={},h=b.Deferred();b.extend(b.extend(f,c),d),f.liveId=0==f.liveId||""==f.liveId?147:f.liveId;var i={};i.api_key=d.api_key||a.API_PARAMS.api_key,i.plat=d.plat||a.API_PARAMS.plat,i.sver=d.sver||a.API_PARAMS.sver,i.partner=d.partner||a.API_PARAMS.partner;var j="http://live.m.tv.sohu.com/api/live/v1/stations/"+f.liveId+"?callback=?&"+b.param({},b.extend({},i,{_rnd:(new Date).valueOf()}));return b.ajaxTolerate({url:j,dataType:"jsonp"}).done(function(a){if(!a.tvStation&&!a.tvStation.id)return{};var c=a.tvStation;return g.liveId=c.id||"147",g.liveName=c.name||"浙江卫视test",g.liveUrl=c.liveUrl||"http://gslb.tv.sohu.com/live?cid=31&ver=seg&ckey=fME9d6wsjgYrRr&type=hls&prot=1&sig=PUP10dOmmowJw8sLRjPStw..&type=hls",g.liveIcon=c.iconBigPic||"",g.liveEnName=c.enName||"",g.ipLimit=c.ipLimit||"0",g.liveId||(g={}),h.resolve(),e&&b.isFunction(e)?void e(g):g}).fail(function(){h.reject()}),h},loadAlbumVideos:function(c,d){var e={},f=b.Deferred(),g=c.aid||c.plid;(0===g||""===g)&&(g=0),c.aid=c.plid=g,c.vid=0===c.vid||""===c.vid?"":c.vid,c.site=c.site||1,c.page_size=c.page_size||c.pageSize||20,c.with_trailer=c.with_trailer||0;var h={};h.api_key=c.api_key||a.API_PARAMS.api_key,h.plat=c.plat||a.API_PARAMS.plat,h.sver=c.sver||a.API_PARAMS.sver,h.partner=c.partner||a.API_PARAMS.partner;var i="http://api.tv.sohu.com/v4/album/videos/"+c.plid+".json?page_size="+c.page_size+"&with_trailer="+c.with_trailer;if(i+="&"+b.param(h),c.vid&&0!=c.vid&&""!=c.vid?i+="&vid="+c.vid+"&site="+(c.site||1):(c.page=c.page||1,i+="&page="+c.page),c.cid&&0!=c.cid&&""!=c.cid&&[76,7,13,24].indexOf(parseInt(c.cid))>-1&&(i+="&order=1"),d&&b.isFunction(d)){var j=b.getFnName(d);i+="&callback=?&_cb="+j}return b.ajaxTolerate({url:i,dataType:"jsonp"}).done(function(a){return e=a&&a.data?a:{},f.resolve(),d&&b.isFunction(d)?void d(e):e}).fail(function(){f.reject()}),f},loadSearchRecommend:function(c,d){var e={},f={},g=b.Deferred();e.vid=0==c.vid||""==c.vid?"":c.vid,e.cid=c.cid||0,e.pageSize=c.page_size||c.pageSize||10,e.pageNum=1,e.api_key=c.api_key||a.API_PARAMS.api_key,e.plat=c.plat||a.API_PARAMS.plat,e.sver=c.sver||a.API_PARAMS.sver,e.partner=c.partner||a.API_PARAMS.partner;var h="http://api.tv.sohu.com/v4/search/recommend.json?_from=h5&"+b.param(e);if(d&&b.isFunction(d)){var i=b.getFnName(d);h+="&callback=?&_cb="+i}return b.ajaxTolerate({url:h,dataType:"jsonp"}).done(function(a){return f=a&&a.data?a:{},g.resolve(),d&&b.isFunction(d)?void d(f):f}).fail(function(){g.reject()}),g},loadAlbumInfo:function(c,d){var e={},f={},g=b.Deferred();e.aid=c.aid||c.plid||0,e.api_key=c.api_key||a.API_PARAMS.api_key,e.plat=c.plat||a.API_PARAMS.plat,e.sver=c.sver||a.API_PARAMS.sver,e.partner=c.partner||a.API_PARAMS.partner;var h="http://api.tv.sohu.com/v4/album/info/"+e.aid+".json?_from=h5&"+b.param(e);if(d&&b.isFunction(d)){var i=b.getFnName(d);h+="&callback=?&_cb="+i}return b.ajaxTolerate({url:h,dataType:"jsonp"}).done(function(a){return f=a&&a.data?a:{},g.resolve(),d&&b.isFunction(d)?void d(f):f}).fail(function(){g.reject()}),g},loadAlbumSeriesByProgramId:function(c,d){var e={},f={},g=b.Deferred();e.aid=c.aid||c.plid||0,e.program_id=c.program_id||0,e.api_key=c.api_key||a.API_PARAMS.api_key,e.plat=c.plat||a.API_PARAMS.plat,e.sver=c.sver||a.API_PARAMS.sver,e.partner=c.partner||a.API_PARAMS.partner;var h="http://api.tv.sohu.com/v4/program/"+e.program_id+".json?_from=h5&"+b.param(e);if(d&&b.isFunction(d)){var i=b.getFnName(d);h+="&callback=?&_cb="+i}return b.ajaxTolerate({url:h,dataType:"jsonp"}).done(function(a){return f=a&&a.data?a:{},g.resolve(),d&&b.isFunction(d)?void d(f):f}).fail(function(){g.reject()}),g},loadAlbumSeriesDataByPlid:function(b,c){var d={},e=this;d.aid=b.aid||b.plid||0,d.program_id=b.program_id||0,d.api_key=b.api_key||a.API_PARAMS.api_key,d.plat=b.plat||a.API_PARAMS.plat,d.sver=b.sver||a.API_PARAMS.sver,d.partner=b.partner||a.API_PARAMS.partner,d.page_size=50,d.page=1,e.loadAlbumInfo(d,function(a){d.page_size=a&&a.data.latest_video_count?a.data.latest_video_count:50,e.loadAlbumVideos(d,c)})}}}(svp,svp.$);var Trace=function(){var a=1,b=parseFloat(window.devicePixelRatio)||1;$.os.android&&(window.screen.width/window.innerWidth).toFixed(2)==b.toFixed(2)&&(a=1/b);var c=window.screen,d=Math.floor(c.width*a)+"x"+Math.floor(c.height*a),e=Passport.getPassport(),f="",g="";return IsIOS?(g="ios",IsIPad?f="ipad":IsIPhone&&(f="iphone")):IsAndroid?f=g="android":IsWindowsPhone&&(f=g="windowsphone"),{getUid:function(){return Cookie.get("SUV")||""},getScreenSize:function(){return d},getPassport:function(){return e},getOS:function(){return g},getPlatform:function(){return f},getVideoData:function(a){var b=window.VideoData||window.videoData||{};return b[a]||""},getConnectionType:function(){return Util.getConnectionType()||""}}}();IS_EXTERNAL_PLAYER=location.href.match(/player=1/i)||location.host.indexOf("m.sohu.com")>-1?!0:!1;var cookieSUV=Cookie.get("SUV"),cookieIPLOC=Cookie.get("IPLOC");if(!cookieSUV||!cookieIPLOC){var _suv=1e3*+new Date+Math.round(1e3*Math.random());cookieSUV||Cookie.set("SUV",_suv,5e4,".sohu.com"),cookieIPLOC||IS_EXTERNAL_PLAYER||Util.loadScript("http://pv.sohu.com/suv/"+_suv)}window.sohuPV={pv:function(){var a={},b=window.isRecomend||!1,c=window.VideoData||window.videoData||{},d=URL.getQueryString("channeled")||c.channeled||"1212120001",e=(c.vid||"",location.href||"http://m.tv.sohu.com/");try{e.indexOf("hots")&&!b&&(d=c.channeled||URL.getQueryString("channeled")||"1212120001"),IsWeixin&&(d="1211110001"),"sogou"==URL.getQueryString("from")&&(d="1200150001"),a={url:encodeURIComponent(e),refer:encodeURIComponent(document.referrer),uid:Trace.getUid(),webtype:Trace.getConnectionType(),screen:Trace.getScreenSize(),catecode:Trace.getVideoData("cateCode")||"",pid:Trace.getVideoData("plid")||"",vid:Trace.getVideoData("vid")||"",os:Trace.getOS(),platform:Trace.getPlatform(),passport:Trace.getPassport(),t:+new Date,channeled:d||"1212120001"}}catch(f){console.log("trace pv exception ",f)}ENABLE_DEBUG&&console.log("trace pv ",a),Util.pingback("http://z.m.tv.sohu.com/pv.gif?"+$.param(a))}};var TracePV=window.sohuPV;IS_EXTERNAL_PLAYER||(window._iwt_UA="UA-sohu-123456",$(function(){window.sohuPV.pv()}),Util.loadScript("http://tv.sohu.com/upload/Trace/iwt-min.js"),Util.loadScript(("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",function(){"undefined"!=typeof window.COMSCORE&&window.COMSCORE.beacon({c1:"2",c2:"7395122",c3:"",c4:"",c5:"",c6:"",c15:""})}),"m.s.sohu.com"===location.host?$().ready(function(){Util.loadScript("http://js.sohu.com/wrating20120726.js",function(){var a;try{a=window._getAcc()}catch(b){}a&&Util.loadScript("http://sohu.wrating.com/a1.js",function(){window.vjAcc=a,window.wrUrl="http://sohu.wrating.com/";try{if(!0===window.vjValidateTrack()){var b=window.wrUrl+"a.gif"+window.vjGetTrackImgUrl();$(document.body).append('<div style="display:none"><img src="'+b+'" id="wrTagImage" /></div>'),window.vjSurveyCheck()}}catch(c){}})})}):Util.loadScript("http://tv.sohu.com/upload/Trace/wrating.js"));var RateTest={mode:"man",apiURL:"",hotURL:"",disURLQueue:[],videoTsCount:0,urlTimeoutTimers:{},urlTimeoutURLs:{},id:0,videoData:window.VideoData||window.videoData||{},init:function(){"undefined"!=typeof player&&player.videoData&&(this.videoData=player.videoData),null!==URL.getQueryString("r")&&this.videoData&&($(".main_container").prepend('<div class="rate_test"><span class="button">速度测试</span><span class="tip">UID: '+(Cookie.get("SUV")||"-")+"</span><div></div></div>"),$(".rate_test .button").on("click",function(){var a=$(this),b="disabled";a.hasClass(b)||(a.addClass(b),RateTest.startTest("man"))}))},startTest:function(a){RateTest.mode=a,$(".rate_test div").html(""),this.videoData=window.VideoData?window.VideoData:player&&player.videoData?player.videoData:{},window.callback_test=function(){},RateTest.addTitle("OpenAPI"),RateTest.apiURL="http://api.tv.sohu.com/video/playinfo/"+this.videoData.vid+".json?api_key=9854b2afa779e1a6bff1962447a09dbd&plat=6&sver=2.8&partner=999&c=1&sid=0&&callback=callback_test",RateTest.addURLItem(RateTest.apiURL);var b,c,d=RateTest.id++,e=new Date,f=0;try{var g=this.videoData.urls.m3u8;b=g.hig||g.nor||g.sup||[]}catch(h){b=[]}for(var i=b.length;i>f;f++)if(b[f]){c=b[f];break}c&&(RateTest.hotURL=c,RateTest.addTitle("Hot VRS"),$(".rate_test div").append(RateTest.getItemHTML(d,c)),c.match(/\.m3u8/i)&&(c=c.replace(/http:\/\/[^\/]+/i,"/hot_vrs")),$.ajax({url:c,type:"get",dataType:"text",success:function(a){if(a){var b,c,f=a.match(/(http:\/\/[^\s]+)/gi)||[],g=0,h=f.length;if(RateTest.videoTsCount=h,h>0){RateTest.URLLoaded(d,e,RateTest.hotURL),RateTest.addTitle("m3u8 ("+h+")","rate_test_video");for(var g=0,h=f.length;h>g;g++)c="m3u8callback_"+g,b=f[g].replace(/http:\/\/[^\/]+/i,"http://data.vod.itc.cn")+"&prot=2&callback="+c+"&id="+RateTest.id++,window[c]=function(a){var b=a.url,c=this.url,d=(c.match(/&id=([0-9]+)/i)||[])[1];if(b){var e=new Date,f=RateTest.addURLItem(b,d,RateTest.requestNextDisURL);RateTest.urlTimeoutTimers[b]=setTimeout(function(){RateTest.URLLoaded(f,e,b,d,null,!0),RateTest.requestNextDisURL()},3e4)}}.bind({url:b}),RateTest.disURLQueue.push(b);RateTest.addURLItem(RateTest.disURLQueue.shift())}else{var i=$(".rate_test .item_"+d).addClass("error");$("time",i).html("!")}}}}))},requestNextDisURL:function(){var a=RateTest.disURLQueue.shift(),b="#rate_test_video",c=$(".rate_test .item .loaded").length;a&&RateTest.addURLItem(a,null,null,b),$(b).html("m3u8 ("+c+"/"+RateTest.videoTsCount+")"),c==RateTest.videoTsCount&&$(".rate_test .button").removeClass("disabled")},addURLItem:function(a,b,c,d){var e=(a.match(/&id=([0-9]+)/i)||[])[1];return e||(e=RateTest.id++),b?$(".rate_test .item_"+b).append(RateTest.getItemHTML(e,a,b)):d?$(d).after(RateTest.getItemHTML(e,a)):$(".rate_test div").append(RateTest.getItemHTML(e,a)),Util.loadScript(a,RateTest.URLLoaded,[e,new Date,a,b,c]),e},getItemHTML:function(a,b){return'<p class="item item_'+a+'"><time>...</time><span>'+b+"</span></p>"},URLLoaded:function(a,b,c,d,e,f){var g=RateTest.urlTimeoutTimers[c];if(g&&(clearTimeout(g),delete RateTest.urlTimeoutTimers[c]),!(c in RateTest.urlTimeoutURLs)){f&&(RateTest.urlTimeoutURLs[c]=1);var h=$(".rate_test .item_"+a).addClass(f?"error":"loaded"),i="",j="",k="",l=((new Date-b)/1e3).toFixed(2);$("time",h).eq(0).html(f?"!":l+" s"),d&&(i=$(".rate_test .item_"+d+" span").html().replace(/&amp;/g,"&")),(j=c.match(/cip=([0-9\.]+)/i))&&(j=j[1],k=c.match(/http:\/\/([^\/]+)/i)[1]);var c=["http://sptjs1.hd.sohu.com.cn/h5/tttst.html","?mode=",RateTest.mode,"&uid=",Cookie.get("SUV")||"","&api=",encodeURIComponent(RateTest.apiURL),"&hotvrs=",encodeURIComponent(RateTest.hotURL),"&disp=",encodeURIComponent(i),"&url=",encodeURIComponent(c),"&clientip=",j,"&cdnip=",k,"&speed=",l,f?"&timeout":""].join("");Util.pingback(c),e&&e()}},addTitle:function(a,b){$(".rate_test div").append('<p class="title" id="'+b+'">'+a+"</p>")}};$(document).ready(RateTest.init),(location.href.match(/player=1/i)||location.host.indexOf("m.sohu.com")>-1)&&(IS_EXTERNAL_PLAYER=!0);var VideoTrace={t:+new Date,playId:+new Date,inited:!1,init:function(){var a=44,b=window.VideoData||window.videoData||{},c="";IsIPad?(a=4,c="1h5"):IsIPhone?(a=41,c="3h5"):IsAndroid?(a=42,c="6h5"):IsWindowsPhone?(a=43,c="11h5"):IsIEMobile&&(a=43),VideoTrace.qcPlat=c,VideoTrace.platType=a,VideoTrace.qfDomain=(Math.random()>.5?"qf1":"qf2")+".hd.sohu.com.cn",VideoTrace.qcURL=null!==URL.getQueryString("r")&&b?"http://sptjs1.hd.sohu.com.cn/h5/tttst.html":"http://qc.hd.sohu.com.cn/caton/video/",VideoTrace.inited=!0},qcPingback:function(a){if(!1===VideoTrace.inited&&VideoTrace.init(),"1h5"!=VideoTrace.qcPlat){var b="",c="",d=window.VideoData||window.videoData||{},e=d.video_src||"";IsIOS?b=1:IsAndroid?b=2:IsWindowsPhone&&(b=3),IsIPad?c="ipad":/iPod/i.test(UA)?c="ipod":IsIPhone?c="iphone":IsWindowsPhone&&(c="windowsphone");var f="";e.match(/\.m3u8/i)?f="m3u8":e.match(/\.mp4/i)&&(f="mp4"),a+=["&uid=",Cookie.get("SUV")||"","&poid=","&plat=",VideoTrace.qcPlat,"&sver=","&os=",b,"&sysver=",Util.getOSVersion(),"&net=",Trace.getConnectionType(),"&playmode=","&vid=",d.vid||"","&sid=",d.sid||"","&vtype=",f,"&pn=",c,"&duFile=",encodeURIComponent(e),"&version=",d.videoVersion||0,"&isp2p=0","&ltype=0","&site=",d.site||"1","&time=",+new Date].join(""),Util.pingback(VideoTrace.qcURL+"?"+a)}},parseChanneledJson:function(){var a={},b=window.isRecomend||!1,c=window.VideoData||window.videoData||{},d=URL.getQueryString("channeled")||c.channeled||"1212120001",e=c.vid||"",f=location.href||"http://m.tv.sohu.com/";try{f.indexOf("hots")&&!b&&(d=c.channeled||URL.getQueryString("channeled")||"1212120001",e&&(f+="&vid="+e)),IsWeixin&&(d="1211110001"),"sogou"==URL.getQueryString("from")&&(d="1200150001")}catch(g){console.log("trace pv exception ",g),f="http://m.tv.sohu.com/"}return a.channeled=d||"1212120001",a.href=f,a},qfPingback:function(a){!1===VideoTrace.inited&&VideoTrace.init();var b=window.VideoData||window.videoData||{};a+=["&seekto=0","&pt=",VideoTrace.platType,"&sid=",Cookie.get("SUV")||"","&vid=",b.vid||"","&nid=","&ref=",encodeURIComponent(location.href),"&dom=","&t=",VideoTrace.t++].join(""),Util.pingback("http://"+VideoTrace.qfDomain+"/dov.do?method=stat"+a)},DMPingback:function(a){var b=(window.isRecomend,Cookie.get("SUV")||""),c=window.VideoData||window.videoData||{},d=VideoTrace.parseChanneledJson(),e=d.channeled||"1212120001",f=d.href||location.href;a+=["&sid=",b,"&uid=",b,"&ua=h5","&vid=",c.vid||"","&nid=","&pid=",c.plid||"","&catcode=",c.cateCode||"","&url=",encodeURIComponent(f),"&refer=",encodeURIComponent(document.referrer),"&isHD=0","&isp2p=0","&type=vrs","&systype=0","&cateid=",c.cid,"&apikey=",API_KEY,"&trans=",$("input.trans").val()||"","&_smuid=",Cookie.get("_smuid")||"-","&site=",c.site||"1","&userid=&t=",VideoTrace.t++].join(""),Util.pingback("http://z.m.tv.sohu.com/"+a+"&channeled="+e),a+="&pvid=",URL.getQueryString("pvid")||""
},DMPingbackNew:function(a,b){var c=(window.isRecomend,window.VideoData||window.videoData||{}),d=VideoTrace.parseChanneledJson(),e=d.channeled||"1212120001",f=d.href||location.href;a=$.extend({url:f,refer:document.referrer,uid:Trace.getUid(),webtype:Trace.getConnectionType(),screen:Trace.getScreenSize(),catecode:Trace.getVideoData("cateCode"),pid:Trace.getVideoData("plid"),vid:Trace.getVideoData("vid"),cateid:Trace.getVideoData("cid"),ltype:Trace.getVideoData("ltype"),company:Trace.getVideoData("company"),version:"0",type:"9001"==Trace.getVideoData("cid")?"my":"vrs",td:Trace.getVideoData("duration"),apikey:API_KEY,t:+new Date,os:Trace.getOS(),platform:Trace.getPlatform(),passport:Trace.getPassport(),channeled:e,site:c.site||"1",playid:VideoTrace.playId},a),Util.pingback((b||"http://z.m.tv.sohu.com/vv.gif")+"?"+$.param(a)),window.flashStatistId&&(a.channeled=window.flashStatistId,Util.pingback((b||"http://z.m.tv.sohu.com/vv.gif")+"?"+$.param(a)))},vv:function(){var a,b=window.VideoData||window.videoData||{};a="undefined"!=typeof b&&"undefined"!=typeof b.duration?b.duration:10,VideoTrace.qfPingback("&error=0&code=2&allno=0&vvmark=1&totTime="+a),IS_EXTERNAL_PLAYER||Util.pingback("http://b.scorecardresearch.com/b?c1=1&c2=7395122&c3=&c4=&c5=&c6=&c11="+(Cookie.get("SUV")||"")),VideoTrace.DMPingbackNew({site:b.site||"1",msg:"playCount",time:"0"}),VideoTrace.playId=+new Date,VideoTrace.qcPingback("code=10&duation=0")},realVV:function(a){{var b=a?(+new Date-a)/1e3:0;window.VideoData||window.videoData||{}}VideoTrace.DMPingbackNew({msg:"videoStart",time:(+new Date-VideoTrace.playId)/1e3}),VideoTrace.qcPingback("code=5&duation="+b)},start:function(){var a=window.VideoData||window.videoData||{};ClickTrace.pingback(null,"video_play_start",JSON.stringify({vid:a.vid})),VideoTrace.qcPingback("code=15")},heart:function(a){VideoTrace.DMPingbackNew({tc:a},"http://z.m.tv.sohu.com/playtime.gif")},ended:function(a,b){VideoTrace.DMPingbackNew({msg:"videoEnds",time:a}),VideoTrace.qcPingback("code=7&duration="+a+"&ct="+b)},abort:function(){VideoTrace.qfPingback("&code=8&error=800&allno=1&drag=-1")},error:function(a){VideoTrace.qfPingback("&error=500&code=2&allno=1&vvmark=0"),VideoTrace.qcPingback("code=8&duation="+(+new Date-a)/1e3+"&error="+(window.VideoData.video_src?"1000":"401"))},buffer:function(a,b){var c=(+new Date-b)/1e3;(1==a||4==a)&&VideoTrace.qfPingback("&code=5&bufno=1&allbufno="+a),VideoTrace.qcPingback("code="+(1==a?6:4)+"&ct="+a+"&duation="+c),null!==URL.getQueryString("r")&&1==a&&"undefined"!=typeof RateTest&&RateTest.startTest("auto")},autoPlay:function(){VideoTrace.qcPingback("code=30")},userClickPlay:function(){VideoTrace.qcPingback("code=31")}},ClickTrace={pingback:function(a,b,c){var b=b||a.attr("position")||"",d=window.VideoData||window.videoData||{},e={},f=window.isRecomend||!1,g=URL.getQueryString("channeled")||d.channeled||"1212120001",h=Trace.getVideoData("vid")||"",i=location.href||"http://m.tv.sohu.com/";c=c||a&&a.attr("details")||"";try{i.indexOf("hots")>-1&&!f&&(g=d.channeled||URL.getQueryString("channeled")||"1212120001"),IsWeixin&&(g="1211110001"),"sogou"===URL.getQueryString("from")&&(g="1200150001"),e={t:+new Date,uid:Trace.getUid(),position:b,op:"click",details:JSON.stringify(c),nid:Trace.getVideoData("nid")||"",url:encodeURIComponent(i),refer:encodeURIComponent(document.referrer),screen:Trace.getScreenSize(),os:Trace.getOS(),platform:Trace.getPlatform(),passport:Trace.getPassport(),vid:h||"",channeled:g||"1212120001"}}catch(j){console.log("trace click exception ",j)}Util.pingback("http://z.m.tv.sohu.com/h5_cc.gif?"+$.param(e))}};!function(a){"use strict";a=a||{};var b=($.userAgent,{model:{},view:{},ctrl:{}}),c=b.model,d=b.view,e=b.ctrl;c.getModeData=function(a){var b={},c=a.modeType,d=[];return a&&$.each(a.modeTypeList,function(a,b){b!==c&&d.push(b)}),b.curMode=c,b.selList=d,b},c.getTitleData=function(a){var b={};return b.title=a.title||"",b},c.getCtrlData=function(a){var b={};return b.pointList=[],$.each(a.pointList,function(c,d){var e={};e.left=d.time/a.duration*100+"%",e.desc=d.desc,b.pointList.push(e)}),b},c.getPosterData=function(a){var b={};return b.poster=a.poster,b.posterType=a.posterType,b.desc=a.desc,b.latestCount=a.latestCount,b.mainActor=a.mainActor,b},d.title=function(a){var b=[];return b.push('<div class="video_title svp_title">'),b.push("<strong>"),b.push('<span class="svp_title_content">'+a.title+"</span>"),b.push("</strong>"),b.push("</div>"),b.join("")},d.videoCon=function(){return'<div class="video"></div>'},d.poster=function(a){var b=[],c=' style="background:url('+a.poster+'); background-size: 100% 100%;"';return b.push('<div class="poster svp_poster"'),"horizon"===a.posterType&&b.push(c),b.push(">"),"vertical"===a.posterType&&(b.push('<div class="cover svp_poster_right" data-key="video_cover" data-type="image"'),b.push(c),b.push(">")),b.push("</div>"),"vertical"===a.posterType&&(b.push('<div class="player_info svp_info">'),b.push('<h3 data-key="tv_name svp_info_title"></h3>'),b.push('<div data-key="tv_summary svp_info_summary">'),b.push("</div>"),b.push("</div>"),b.push("</div>")),b.join("")},d.playMode=function(a){var b=[];return""!==a.curMode&&a.selList.length>0&&(b.push('<div class="quality_button quality_container svp_mid_mode">'),b.push(d.playModeContent(a)),b.push("</div>")),b.join("")},d.playModeContent=function(b){var c=[];return c.push('<div class="quality_definition_button svp_mid_cur_mode_btn">'),c.push('<span class="svp_mid_cur_mode" data-mode="'+b.curMode+'">'+a.PLAY_MODE[b.curMode]+"</span>"),c.push("</div>"),c.push('<div class="quality_definition_list">'),c.push('<ul class="svp_mid_mod_list" style="display: none">'),$.each(b.selList,function(b,d){c.push('<li data-mode="'+d+'"><span>'+a.PLAY_MODE[d]+"</span></li>")}),c.push("</ul>"),c.push("</div>"),c.join("")},d.midCtrl=function(){var a=[];return a.push('<div class="play_pause_con svp_mid">'),a.push('<span class="svp_mid_play" style="display:none;">'),a.push('<b class="state_play"></b>'),a.push("</span>"),a.push('<span class="svp_mid_pause" style="display:none;">'),a.push('<b class="state_pause"></b>'),a.push("</span>"),a.push('<span class="svp_mid_loading">'),a.push('<b class="state_loading"></b>'),a.push("</span>"),a.push("</div>"),a.join("")},d.bottomCtrlBar=function(a){var b=[];return b.push('<div class="slider_bar svp_ctrl_bar">'),b.push('<div class="left_btn_play">'),b.push('<div class="svp_ctrl_play"><b class="state_play"></b></div>'),b.push('<div class="svp_ctrl_pause" style="display:none;"><b class="state_pause"></b></div>'),b.push("</div>"),b.push('<div class="action_trackBar svp_ctrl_track_bar">'),b.push('<div class="trackbar">'),b.push('<b class="buffered svp_ctrl_buffer"></b>'),b.push('<div class="time-points svp_ctrl_points">'),$.each(a.pointList,function(a,c){b.push('<em style="left:'+c.left+'"></em>')}),b.push("</div>"),b.push('<b class="played svp_ctrl_played_bar">'),b.push('<em class="handle svp_ctrl_drag_anchor"></em>'),b.push("</b>"),b.push('<em class="drag_timer svp_ctrl_drag_time">00:00</em>'),b.push("</div>"),b.push("</div>"),b.push('<div class="time svp_ctrl_time">'),b.push('<b class="current_time svp_ctrl_cur_time">00:00</b> / '),b.push('<span class="duration svp_ctrl_duration" data-key="totalDuration" data-type="time">00:00</span>'),b.push("</div>"),b.push('<div class="controllers svp_ctrl_screen">'),b.push('<div class="fullscreen disabled svp_ctrl_full_screen">'),b.push("<span></span>"),b.push("</div>"),b.push('<div class="shrinkscreen disabled svp_ctrl_shrink_screen" style="display:none;">'),b.push("<span></span>"),b.push("</div>"),b.push("</div>"),b.join("")},d.msgWithBtn=function(a){var b=[],c=a&&a.msg?a.msg:"";return b.push('<div class="appdl_download2 svp_msg_width_btn" style="display: none;">'),b.push('<div class="msg_block">'),b.push('<span class="msg svp_content">'+c+"</span>"),b.push('<a href="javascript:void(0);" class="svp_download_btn actionLink">搜狐视频客户端</a>'),b.push("</div>"),b.push("</div>"),b.join("")},d.msg=function(a){var b=[],c=a&&a.msg?a.msg:"";return b.push('<div class="appdl_download2 svp_msg" style="display: none;">'),b.push('<table class="msg_block"><tr><td>'),b.push('<span class="msg svp_content">'+c+"</span>"),b.push("</td></tr></table>"),b.push("</div>"),b.join("")},d.ctrl=function(a){var b=[];return b.push('<div class="player_controls svp_ctrl">'),b.push(d.midCtrl()),b.push('<div class="message">'),b.push("<p></p>"),b.push("</div>"),b.push(d.bottomCtrlBar(a)),b.push('<div class="ad-img">'),b.push("<em></em>"),b.push("</div>"),b.push("</div>"),b.push("</div>"),b.join("")},d.playerLoading=function(){var a=[];return a.push('<div class="player_bg_loading svp_player_bg_loading">'),a.push('<b class="player_loading_icon"></b>'),a.push("<p>努力加载中...</p>"),a.push(d.msgWithBtn()),a.push(d.msg()),a.push("</div>"),a.join("")},e.makeErrorTmpl=function(b){var c=[],e=$.isNumber(b.height)?b.height+"px":b.height,f=$.isNumber(b.width)?b.width+"px":b.width;return c.push('<div class="player inline_player" id="main_player_'+a.BaseHtml5.maxId+'" style="height:'+e+"; width:"+f+'">'),c.push(d.msgWithBtn()),c.push(d.msg()),c.push("</div>"),c.join("")},e.makeTmpl=function(b){var e=[],f=$.isNumber(b.height)?b.height+"px":b.height,g=$.isNumber(b.width)?b.width+"px":b.width;e.push('<div class="player inline_player" id="main_player_'+a.BaseHtml5.maxId+'" style="height:'+f+"; width:"+g+'">'),e.push(d.videoCon());var h=c.getTitleData(b);e.push(d.title(h));var i=c.getPosterData(b);e.push(d.poster(i));var j=c.getCtrlData(b);e.push(d.ctrl(j));var k=c.getModeData(b);return e.push(d.playMode(k)),e.push('<div class="mask-layer svp_mask_layer" style="display: none;"></div>'),e.push(d.msgWithBtn()),e.push(d.msg()),e.push("</div>"),e.join("")},a.tmpl=function(a){return $.isUndefined(a)?"":e.makeTmpl(a)},a.errorTmpl=function(a){return $.isUndefined(a)?"":e.makeErrorTmpl(a)},a.updateModeTypeList=function(a){var b=c.getModeData(a);return d.playModeContent(b)},a.playerLoadingTmpl=function(){return d.playerLoading()}}(svp),function(a,b){"use strict";var c=b.userAgent,d={isMediaAdContent:!1,vid:"",elemId:"",poster:"",posterType:"",mediaType:"",modeType:"",modeTypeList:[],srcType:"",width:"",height:"",volume:0,curPlayUrl:"",srcList:{},pointList:[],alwaysShowControls:!1,autoplay:!1,defControls:!1,loop:!1,preload:!1,title:"",duration:0,curIndex:-1,totCounts:-1,html5SkinCss:"",history:{},ipLimit:"",liveEnName:"",liveIcon:"",liveId:"",timeLimit:-1,liveUrl:"",vidList:[],vidCurIndex:-1,isPauseAd:!1,pauseAdImg:"",mediaAdPlatform:"none",copyrightRst:!0,appid:"",debug:!1,mainActor:"",latestCount:"",desc:"",oriUrls:null,channeled:"default",fullscreenType:0,isRemHistory:!1},e=function(a,c){b.extend(!0,this,d),b.merge(this,a),b.isUndefined(c)||(this.isMediaAdContent||g(c),"vod"===a.mediaType?this._initVOD(a,c):this._initHLS(a,c))},f=function(a,c){var d=a.cateCode||a.cate_code||"",e=["vid="+a.vid,"&uid="+Cookie.get("SUV")||"","&plat=17","&pt="+Util.getUserPt(),"&prod=h5","&pg=1&eye=0","&cateCode="+d.split(";")[0]||""].join("");return b.isUndefined(c)||(c+=(c.match(/\?/)?"&":"?")+e),c},g=function(a){var c=a.urls;for(var d in c)if("downloadUrl"===d){{c[d]}if(!b.isUndefined(c[d][0])&&""!==c[d][0]){var e=c[d][0];c[d][0]=f(a,e)}}else for(var g in c[d])b.each(c[d][g],function(b,e){c[d][g][b]=f(a,e)})};e.prototype._initHLS=function(d,e){var f=this;b.merge(this,e),f.title=e.liveName||"",f.srcType=/Android 2\./i.test(c.desc)?"client":a.support.isSupportM3u8()?"m3u8":"client",f.liveId=e.liveId,f.curPlayUrl=e.liveUrl},e.prototype.getPlayList=function(){return this.srcList[this.modeType]||[]},e.prototype.getNextUrl=function(){var a=this.getPlayList(),c=this.curIndex+1,d=a[c];return b.isUndefined(d)?"":d.url},e.prototype.getFirstUrl=function(){var a=this.getPlayList(),c=a[0];return b.isUndefined(c)?"":c.url},e.prototype._initVOD=function(d,e){var f=this;f.poster="horizon"===f.posterType?e.horHighPic||e.verHighPic||"":e.verHighPic||e.horHighPic||"";var g=e.totalDuration||e.total_duration||0;f.duration=parseInt(g,10),f.timeLimit>-1&&f.timeLimit<f.duration&&(f.duration=f.timeLimit),f.title=e.tvname||"",f.mainActor=e.main_actor||"",f.latestCount=e.latest_video_count||"",f.desc=e.video_desc||"",b.isUndefined(e.srcType)?a.isForceUseM3u8()?f.srcType="m3u8":a.isForceUseDownloadUrl()?(e.urls.mp4={},e.urls.mp4.nor=e.urls.downloadUrl):f.srcType=a.support.isSupportM3u8()?"m3u8":a.support.isSupportMP4()?"mp4":"client":f.srcType=e.srcType,b.isUndefined(e.urls)||(f.oriUrls=e.urls),!b.isUndefined(e.ep)&&e.ep instanceof Array&&b.each(e.ep,function(a,b){var c={};c.time=parseInt(b.k,10),c.desc=b.v,f.pointList.push(c)}),f.vid=e.vid,"default"!==f.channeled?e.channeled=f.channeled:f.channeled=e.channeled;var h=!1;if(!b.isUndefined(e.urls)){var i=e.urls[f.srcType],j=e.durations;for(var k in i)f.srcList[k]=[],i[k]instanceof Array&&b.each(i[k],function(a,b){var c={};c.url=b,c.duration=parseInt(j[k][a]||-1,10),f.srcList[k].push(c)}),!h&&f.srcList[k].length>0&&(h=!0,f.totCounts=f.srcList[k].length);var l=function(){var a={};a.url="",b.isUndefined(e.urls.downloadUrl)||(a.url=e.urls.downloadUrl[0]||""),a.duration=parseInt(f.duration||-1,10),f.srcType="mp4",f.modeType="nor",f.srcList.nor=[a],f.totCounts=f.srcList.nor.length};h||"client"===f.srcType||l(),f.totCounts>0&&(f.curIndex=0),!f.isMediaAdContent&&(!c.isIphone&&c.isUCBrowser&&"client"!==f.srcType||IsWeixin)&&l(),/Android 2./i.test(c.desc)&&l(),f._initCurPlayUrlAndModeType()}},e.prototype._initCurPlayUrlAndModeType=function(){var a=this,c=a.getPlayList(),d=["nor","hig","sup"];b.each(d,function(d,e){if(!b.isUndefined(a.srcList[e])&&a.srcList[e].length>0){if(0===c.length)return a.modeType=e,!1;a.modeTypeList.push(e)}}),c=a.getPlayList(),c.length>0&&(this.curPlayUrl=c[0].url)},a.VideoInfo=e}(svp,svp.$),function(a){"use strict";a=a||{};var b=$.userAgent;a.COOPERATOR_LIST=[/XiaoMi\/MiPad/i],a.FORBID_AUTOPLAY_LIST=[/MI-ONE/i,/Android\/?\s?2\../i,/XiaoMi\/MiPad/i,/SAMSUNG/i,/Windows Phone/i,/iphone/i,/GiONEE/i,/OPPP|R80/i,/HM NOTE/i,/Nexus\s5/i,/iPad.*Mac OS/i,/HTC\sZ710e/i,/GT-/],a.WX_FORBID_AUTOPLAY_LIST=[/MI[\s\-_]+/i,/SM\-N90/i,/HUAWEI/i,/Coolpad/i,/E7/i,/GT\-I95/i,/GT\-N71/i,/Android\/?\s?4\.0/],a.PLID_LIST=[],a.ADV_BLACK_LIST=[/Android\/?\s?2\../i,/Android\/?\s?4\.0.*X907.*QQBrowser/i,/QQBrowser\/4\.2/i,/HTC8088_TD/i],a.SERVICE_BLACK_LIST={ios:[],android:[],winPhone:[]},a.FULL_SCREEN_LIST=[/XiaoMi\/MiPad/i],a.M3U8_BLACK_LIST={ios:[],android:[/Build\/HM.*XiaoMi\/MiuiBrowser/i,/vivo/i,/ZTE/i,/TCL/i,/Coolpad/i,/MQQBrowser(\/4\.|\s4\.)+/i],winPhone:[]},a.MP4_BLACK_LIST={ios:[],android:[],winPhone:[]},a.VIDEO_DOWNLOAD_SRC_LIST=["1000","1102"],a.VIDEO_M3U8_SRC_LIST=["1080"];var c=function(a,c){var d=!1;return!$.isUndefined(a)&&$.isArray(c[a])&&$.each(c[a],function(a,c){return c.test(b.desc)?b.isQQBrowser&&-1===c.toString().indexOf("QQBrowser")?(d=!1,!1):(d=!0,!1):void 0}),d},d=function(){var a=URL.getQueryString("src")||URL.getQueryString("SRC")||"";return""!==a&&a.length>=4&&(a=a.substr(0,4)),a};a.isInBlackList=function(d){var e="",f=!1;return b.isIphone||b.isIpad?e="ios":b.isAndroid?e="android":b.isWindowsPhone&&(e="winPhone"),"m3u8"===d&&(c(e,a.SERVICE_BLACK_LIST)||c(e,a.M3U8_BLACK_LIST))?f=!0:"mp4"===d&&(c(e,a.SERVICE_BLACK_LIST)||c(e,a.MP4_BLACK_LIST))&&(f=!0),f},a.isForceUseM3u8=function(){var b=!1,c=d();return $(a.VIDEO_M3U8_SRC_LIST).indexOf(c)>=0&&(b=!0),b},a.isForceUseDownloadUrl=function(){var b=!1,c=d();return $(a.VIDEO_DOWNLOAD_SRC_LIST).indexOf(c)>=0&&(b=!0),b},a.isCooperator=function(){var c=!1;return $.each(a.COOPERATOR_LIST,function(a,d){return d.test(b.desc)?(c=!0,!1):void 0}),c},a.cooperatorProcess=function(b){var c=URL.getQueryString("src")||URL.getQueryString("SRC")||"";""!==c&&c.length>=4&&(c=c.substr(0,4),$(a.VIDEO_DOWNLOAD_SRC_LIST).indexOf(c)>=0&&b.urls.downloadUrl.length>0&&(b.urls.mp4={},b.urls.mp4.nor=b.urls.downloadUrl))},a.isFullScreen=function(){var c=!1;$.each(a.FULL_SCREEN_LIST,function(a,d){return d.test(b.desc)?(c=!0,!1):void 0});var d=URL.getQueryString("player")||URL.getQueryString("PLAYER")||"";return"1"===d&&(c=!0),c},a.advFilter=function(){var a=URL.getQueryString("src")||URL.getQueryString("SRC")||"";return a&&a.indexOf("|")>-1&&(a=a.split("|")[0]),"1000"===a||"1080"===a?!0:!1},a.isForbidAutoplay=function(){var c=!1;return $.each(a.FORBID_AUTOPLAY_LIST,function(a,d){return d.test(b.desc)?(c=!0,!1):void 0}),IsWeixin&&$.each(a.WX_FORBID_AUTOPLAY_LIST,function(a,d){return d.test(b.desc)?(c=!0,!1):void 0}),IsAndroidPad&&(c=!0),c},a.isAllowPlayAdv=function(c){var d=!0;return $.each(a.ADV_BLACK_LIST,function(a,c){return c.test(b.desc)?(d=!1,!1):void 0}),a.advFilter(c)?!1:d}}(svp),function(){"use strict";svp=svp||{};var a=$.userAgent;svp.support={isUseHtml5:function(a){var b=navigator.userAgent,c=null;if(/ipad|ipod|iphone|lepad_hls|IEMobile/gi.test(b))return!0;if(svp.$.os.android){if(svp.support.isSupportMP4(a))return!0;if(svp.$.browser.MQQ&&svp.$.browser.getNumVersion()>=4.2)return!0;if(-1!==b.indexOf("MI-ONE")||-1!==b.indexOf("MI2"))return!0;if(svp.$.os.version>="4"&&(c=b.match(/MicroMessenger\/((\d+)\.(\d+))\.(\d+)/))&&c[1]>=4.2)return!0;if(svp.$.os.version>="4.1")return!0}return svp.support.isSupportMP4(a)||svp.support.isSupportM3u8(a)?!0:svp.$.browser.ie&&svp.$.os.windows&&svp.$.browser.getNumVersion()>=9?!0:!1},isUseHLS:function(){return svp.$.os.ios?!0:!1},isLiveUseHTML5:function(){return svp.$.os.ios?!0:svp.$.os.android&&svp.$.browser.MQQ&&svp.$.browser.getNumVersion()>=4.2?!0:!1},isUseFlash:function(){return svp.$.browser.ie&&svp.$.os.windows?!0:!1},isSupportM3u8:function(){if(svp.isInBlackList("m3u8"))return!1;if(a.isIphone||a.isIpad||"m3u8"===URL.getQueryString("srcType"))return!0;var b=document.getElementsByTagName("video")[0]||document.createElement("video");if("function"==typeof b.canPlayType){var c=b.canPlayType("application/x-mpegURL");if(a.isAndroid&&a.isUCBrowser)return!1;if("probably"===c)return!0;if("maybe"===c)return a.isAndroid&&(a.isBaiduBrowser||a.isQQBrowser)?!0:!1}return!1},isSupportWebm:function(){if(svp.$.os.android&&svp.$.os.version>="4.1")return!0;var a=document.getElementsByTagName("video")[0]||document.createElement("video");return"function"!=typeof a.canPlayType||"probably"!==a.canPlayType('video/webm; codecs="vp8.0, vorbis"')&&"probably"!==a.canPlayType('video/webm; codecs="vp9.0, vorbis"')?!1:!0},isSupportMP4:function(){if(svp.isInBlackList("mp4"))return!1;if(a.isWindowsPhone||a.isFirefoxBrowser||"mp4"===URL.getQueryString("srcType"))return!0;var b=document.getElementsByTagName("video")[0]||document.createElement("video");if("function"==typeof b.canPlayType){if(""===b.canPlayType('video/mp4; codecs="mp4v.20.8"'))return!1;if(""===b.canPlayType('video/mp4; codecs="avc1.42E01E"')||""===b.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'))return!1}return!0},isSupportSVG:function(){return document.implementation&&svp.$.isFunction(document.implementation.hasFeature)?document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1},isEnforceMP4:function(){if(svp.$.os.android){if(svp.$.browser.firefox)return!0;if(svp.$.os.version>="4.0"&&svp.$.browser.MQQ&&svp.$.browser.version<"4.0")return!0}return!1}}}(),function(a){function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function d(){j=null,k.last&&(k.el.trigger("longTap"),k={})}function e(){j&&clearTimeout(j),j=null}function f(){g&&clearTimeout(g),h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),g=h=i=j=null,k={}}if(!(a.browser.WeChat&&a.browser.getNumVersion()<5||a.os.windows&&a.browser.ie||a.isFunction(a.fn.tap))){var g,h,i,j,k={},l=750;a(document).ready(function(){var m,n;a(document.body).bind("touchstart",function(c){m=Date.now(),n=m-(k.last||m),k.el=a(b(c.touches[0].target)),g&&clearTimeout(g),k.x1=c.touches[0].pageX,k.y1=c.touches[0].pageY,n>0&&250>=n&&(k.isDoubleTap=!0),k.last=m,j=setTimeout(d,l)}).bind("touchmove",function(a){e(),k.x2=a.touches[0].pageX,k.y2=a.touches[0].pageY}).bind("touchend",function(){e(),k.x2&&Math.abs(k.x1-k.x2)>30||k.y2&&Math.abs(k.y1-k.y2)>30?i=setTimeout(function(){k.el&&"function"==typeof k.el.trigger&&(k.el.trigger("swipe"),k.el.trigger("swipe"+c(k.x1,k.x2,k.y1,k.y2)),k={})},0):"last"in k&&(h=setTimeout(function(){if(k.el&&"function"==typeof k.el.trigger){var b=a.Event("tap");b.cancelTouch=f,k.el.trigger(b),k.isDoubleTap?(k.el.trigger("doubleTap"),k={}):g=setTimeout(function(){g=null,k.el&&k.el.trigger("singleTap"),k={}},250)}},0))}).bind("touchcancel",f),a(window).bind("scroll",f)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}}(svp.$),function(a){"use strict";a=a||{};var b=$.userAgent;a.IosAdvertise=function(a,c){var d=this,e={param:{player:null,mediaAdPlatform:"none",adClose:"0",debug:!1,timeout:2e3,timeoutFlag:!1,getAdInfoFlag:!1,addAdCallback:null,urls:{iosMedia:"http://m.aty.sohu.com/h",iosMediaDebug:"http://60.28.168.195/h"}},model:{cache:null,totDuration:0,appid:"",curIndex:0,adDurList:[],mediaAd:{}},view:{},ctrl:{}},f=e.param,g=e.model,h=(e.view,e.ctrl);f.init=function(a,b){return $.isUndefined(a)?!1:(f.player=a,f=$.merge(f,b),null!==URL.getQueryString("adClose")&&(f.adClose=URL.getQueryString("adClose")),"0"!==b.adClose&&(f.adClose=b.adClose),!0)},f.reset=function(){f.timeoutFlag=!1,f.getAdInfoFlag=!1},g.init=function(a,b){g.cache=$.extend(!0,{},a.videoData),g.appid=b.appid},g.reset=function(){g.cache=null,g.totDuration=0,g.curIndex=0,g.adDurList=[],g.mediaAd={}},g.getAdParam=function(a){var c={};return c.pt="oad",c.plat=g.getPlatId(),c.sysver=b.osVersion,c.c="tv",c.cat="1",c.vc=g.getVc(a),c.pn=g.getPn(),c.al=a.plid||a.sid||a.aid||"",c.ag="",c.st="",c.ar=a.areaId||a.area_id||6,c.vu="",c.tuv=Cookie.get("MUV")||Cookie.get("SUV")||"",c.appid=g.appid,c.type=a.site&&2===a.site||a.cid&&"9001"===a.cid?"my":"vrs","0"!==f.adClose&&(c.adClose=f.adClose),c.vid=a.vid||"",c.tvid=a.tvid||a.tv_id||"",c.pageUrl=window.location.href,c.du=a.totalDuration||a.duration||0,c.partner=URL.getQueryString("src")||URL.getQueryString("SRC")||Cookie.get("MTV_SRC")||"-2",c},g.getPlatId=function(){return b.isAndroid&&b.phone?"h6":b.isIphone?"h3":b.isIpad?"h1":b.isAndroidPad?"h0":"unknowm"},g.getVc=function(a){var b=a.cateCode||a.cate_code||a.cid||"";return b&&b.indexOf(";")>-1&&(b=b.replace(/.*?;/,"")),b},g.getPn=function(){var a=g.getPlatId();return"h6"===a?"androidphone":"h3"===a?"iphone":"h16"===a?"androidpad":"h1"===a?"ipad":"unknowm"},g.repOrAddParams=function(a){try{if(""!==a&&a.indexOf("mmg.aty.sohu.com")>=1){var b=a.match(/partner=([a-zA-Z0-9\-_\|]*)/i),c=URL.getQueryString("src")||URL.getQueryString("SRC")||Cookie.get("MTV_SRC")||"-2";(!b||b.length>=2&&""===b[1])&&(a=a+"&partner="+c)}}catch(d){console.log(d)}return a},g.sendPingback=function(a){if(""!==a){var b=a.split("|");$.each(b,function(a,b){var c=document.createElement("script");b=g.repOrAddParams(b),console.log("上报统计URL",b),c.src=b,$("body").append(c)})}},g.toString=function(a){var b=[];for(var c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")},g.getIosAdInfo=function(a,b){var c;f.debug?(c=f.urls.iosMediaDebug,Console.log("debug -> ios广告请求:"+c+"?"+g.toString(a))):c=f.urls.iosMedia,$.ajax({url:c,data:a,dataType:"jsonp",success:b})},g.initAdDurList=function(a){var b=[];return $.each(a.adDataList,function(a,c){b.push(c.duration)}),b},g.isoAdInfoProcess=function(a){var b={adVidList:[],adDataList:[],totDuration:0,realTotalCounts:0,emptyCounts:0,effCounts:0};if(!$.isUndefined(a)&&1===a.status){var c=a.data.oad;if(c instanceof Array){var d=1,e=1;$.each(c,function(a,c){var f={};$.isUndefined(c.vid)||""===c.vid?f.effAdPosition=-1:(b.adVidList.push(c.vid),f.effAdPosition=e,e++),"number"==typeof c.duration&&(b.totDuration+=c.duration),f.duration=c.duration||-1,f.clickUrl=c.clickurl?c.clickurl:"",f.pingback=c.pingback||"",f.pingbacks=c.pingbacks||[],f.vid=c.vid||"",f.finishPingback=c.finishedstatistics||"";var g=f.pingback?URL.getQueryData(f.pingback):"",h=g.p?g.p.split(","):[];f.counts=h.length,0===f.duration&&(b.emptyCounts+=f.counts),b.realTotalCounts+=f.counts;for(var i=[],j=0;j<f.counts;j++)i.push(d+j);d+=f.counts,f.adPosition=i.join(","),b.adDataList.push(f)}),b.effCounts=b.realTotalCounts-b.emptyCounts}}return b},g.sendInnerPingback=function(a,b){if("undefined"!=typeof a){var c={video_catecode:g.cache.cateCode.split(";")[0]||"",video_plid:g.cache.sid||g.cache.plid||"",video_dur:g.cache.totalDuration,partner:URL.getQueryString("src")||URL.getQueryString("SRC")||Cookie.get("MTV_SRC")||"-2"};"video_ad_response"===a?(c.ad_status=1,c.ad_total_num=0,c.ad_empty_num=0,c.ad_eff_num=0,c.ad_total_dur=0):"video_ad_play"===a?(c.ad_is_empty=0,c.ad_total_num=g.mediaAd.realTotalCounts,c.ad_eff_num=g.mediaAd.effCounts):"video_ad_close"===a&&(c.ad_total_num=g.mediaAd.realTotalCounts,c.ad_eff_num=g.mediaAd.effCounts);for(var d in b)c[d]=b[d];console.log("发送内部行为统计数据 ("+a+"):",c),ClickTrace.pingback(null,a,c)}},h.init=function(a,b){f.init(a,b)&&(g.init(a,b),h.eventInit())},h.addAdvertise=function(b){this.isMediaPlayed=!1,f.addAdCallback=b;{var c=f.player.cache;f.player.videoTag}setTimeout(function(){f.getAdInfoFlag||(f.timeoutFlag=!0,console.log("ios广告请求超时，直接播放视频"),g.sendInnerPingback("video_ad_response"),c.curPlayUrl=c.srcList[c.modeType][0].url,a.initVideoTag(),d.isFinishAdvReq=!0,a.adv.isMediaPlayed=!0,$.isFunction(b)&&b())},f.timeout),g.sendInnerPingback("video_ad_request"),h.getIosAdInfo(function(e){if(!f.timeoutFlag){g.mediaAd=e;var h={ad_status:0,ad_total_num:e.realTotalCounts,ad_empty_num:e.emptyCounts,ad_eff_num:e.effCounts,ad_total_dur:e.totDuration};g.sendInnerPingback("video_ad_response",h),g.totDuration=e.totDuration;var i=f.player.adv;if(i.mediaAd=e,g.adDurList=g.initAdDurList(i.mediaAd),"0"===f.adClose){console.log("ios广告获取成功",e);for(var j in c.srcList)$.each(c.srcList[j],function(a,b){e.adVidList.length>0&&(b.url+=(b.url.indexOf("?")>-1?"&":"?")+"ads="+e.adVidList.join(","))})}else{a.adv.isMediaPlayed=!0,console.log("ios广告已经获取成功，但是广告被屏蔽",e),g.sendInnerPingback("video_ad_close");var i=f.player.adv;$.each(i.mediaAd.adDataList,function(a,b){g.sendPingback(b.pingback);var c={ad_inc_num:b.counts,ad_pos:b.adPosition,ad_eff_pos:b.effAdPosition,ad_dur:b.duration,ad_vid:b.vid};if(0!==b.duration?(console.log("ios广告上报 start:"+b.pingback),c.ad_is_empty=1):console.log("ios空广告上报 start:"+b.pingback),g.sendInnerPingback("video_ad_play",c),b.pingback="",0!==b.pingbacks.length){var d=b.pingbacks[0];0===d.v&&(g.sendPingback(d.v),console.log(0!==b.duration?"ios广告上报 v:"+d.v+", curIndex: 0":"ios空广告上报 v: "+d.v+", curIndex: 0"))}})}c.curPlayUrl=c.srcList[c.modeType][0].url,a.initVideoTag(),d.isFinishAdvReq=!0,a.play(),$.isFunction(b)&&b()}})},h.updateAdv=function(){f.reset(),g.reset(),f.player.adv.mediaAd=null,f.player.adv.isMediaPlayed=!1,g.cache=$.extend(!0,{},f.player.cache),h.addAdvertise(f.addAdCallback)},h.getIosAdInfo=function(a){if(b.isIphone||b.isIpad){var c=g.getAdParam(g.cache);g.getIosAdInfo(c,function(b){f.getAdInfoFlag=!0;var c=g.isoAdInfoProcess(b);a(c)})}else{var d=g.isoAdInfoProcess();a(d)}},h.eventInit=function(){var a=h.process;f.player.addEvent("timeupdate",a.timeupdate)},h.process={},h.process.timeupdate=function(){var a=this,b=(f.player.cache,a.currentTime);if(0!==b){var c=a.adv,d=c.mediaAd.adDataList,e=c.mediaAd.adVidList;if(!a.adv.isMediaPlayed&&null!==f.player.adv.mediaAd)if("0"!==f.adClose)a.adv.isMediaPlayed=!0,$.each(d,function(a,b){b.pingback+=b.pingback.indexOf("?")>-1?"&":"?",b.pingback+="adClose="+f.adClose,g.sendPingback(b.pingback),console.log("ios广告上报 start:"+b.pingback);var c={ad_is_empty:1,ad_inc_num:b.counts,ad_pos:b.adPosition,ad_eff_pos:b.effAdPosition,ad_dur:b.duration,ad_vid:b.vid};g.sendInnerPingback("video_ad_play",c),b.pingback=""});else{if(b>0&&Math.abs(b-this._lastCurTime)>2&&(this._startPlayTime=$.now()),b-a._lastCurTime>2)return void a.seekTo(a._lastCurTime);var h=0,i=0;$.each(g.adDurList,function(c,d){return 0===h&&0===c&&(h=d,i=d),b=parseInt(b,10),b>=h&&0!==c&&(h+=d,i=d,h>=b&&(g.curIndex=c),c===g.adDurList.length-1&&b>=h)?(g.curIndex=c,a.$video.attr("data-adover","true"),!1):void 0}),e.length!==d.length&&$.each(d,function(a,b){if(!(a<=g.curIndex))return!1;if(0===b.duration&&""!==b.pingback){if(g.sendPingback(b.pingback),console.log("ios空广告上报 start:"+b.pingback),""!==b.pingback){var c={ad_inc_num:b.counts,ad_pos:b.adPosition,ad_eff_pos:b.effAdPosition,ad_dur:b.duration,ad_vid:b.vid};g.sendInnerPingback("video_ad_play",c)}b.pingback="",$.each(b.pingbacks,function(a,c){0===c.t&&(g.sendPingback(c.v),0===j.pingbacks.length,console.log("ios空广告上报 v: "+b.v+", curIndex: "+a))})}}),b>g.totDuration&&g.curIndex===d.length-1&&(a.adv.isMediaPlayed=!0),a._lastCurTime=b;var j=c.mediaAd.adDataList[g.curIndex],k=parseInt(b,10);if(k-=h-i,0===k&&""!==j.pingback){if(g.sendPingback(j.pingback),console.log("ios广告上报 start:"+j.pingback),""!==j.pingback){console.log("发送内部行为统计数据: video_ad_play");var l={ad_is_empty:1,ad_inc_num:j.counts,ad_pos:j.adPosition,ad_eff_pos:j.effAdPosition,ad_dur:j.duration,ad_vid:j.vid};g.sendInnerPingback("video_ad_play",l)}j.pingback=""}$.each(j.pingbacks,function(a,b){k===b.t&&(g.sendPingback(b.v),j.pingbacks.splice(a,1),console.log("ios广告上报 v: "+b.v+", curIndex: "+a))}),k>=j.duration-1&&""!==j.finishPingback&&(g.sendPingback(j.finishPingback),j.finishPingback="",console.log("ios end广告上报: endIndex: "+g.curIndex))}}},h.init(a,c),this.mediaAdPlatform=c.mediaAdPlatform,this.isMediaPlayed=!1,this.isFinishAdvReq=!1,this.addAdvertise=h.addAdvertise,this.updateAdv=h.updateAdv}}(svp),function(a){"use strict";a=a||{};var b=$.userAgent,c=$.now();a.AndoridAdvertise=function(d,e){var f=this,g={param:{player:null,pauseAdConClass:"svp_ad_pause_"+c,pauseAdCloseBtnClass:"svp_ad_pause_close_"+c,mediaTimerConClass:"svp_poster_ad_time_"+c,mediaTimerClass:"svp_poster_ad_timer_"+c,adDetailBtnClass:"svp_ad_detail_"+c,isPauseAd:!1,mediaAdPlatform:"none",addAdCallback:null,adClose:"0",debug:!1,timeout:2e3,timeoutFlag:!1,isGetFlag:!1,isValidFlag:!1,isFirstLoad:!0,urls:{adrMedia:"http://m.aty.sohu.com/h",adrMediaDebug:"http://60.28.168.195/h",advIframe:"http://tv.sohu.com/upload/touch/public/showInIframe_new.html"}},model:{oldAdIndex:0,curAdIndex:-1,sendRepAdIndex:-1,cache:null,appid:"",mediaAd:{},effMediaData:[],mptIndex:[]},view:{},ctrl:{}},h=g.param,i=g.model,j=g.view,k=g.ctrl,f=this;h.init=function(a,b){return $.isUndefined(a)?!1:(h.player=a,h=$.merge(h,b),null!==URL.getQueryString("adClose")&&(h.adClose=URL.getQueryString("adClose")),"0"!==b.adClose&&(h.adClose=b.adClose),!0)},h.reset=function(){h.timeoutFlag=!1,h.isGetFlag=!1,h.isValidFlag=!1},i.init=function(a,b){i.cache=$.extend(!0,{},a.cache),i.videoData=a.videoData,i.appid=b.appid},i.reset=function(){i.oldAdIndex=0,i.curAdIndex=-1,i.cache=null,i.mediaAd={},i.effMediaData=[],i.mptIndex=[]},i.getQueryAdVideoURL=function(a,b){var c=a.cateCode||a.cate_code||"",d=["vid="+a.vid,"&uid="+Cookie.get("SUV")||"","&plat=17","&pt="+Util.getUserPt(),"&prod=h5","&pg=1&eye=0","&cateCode="+c.split(";")[0]||"","&advEFId="+a.advEFId].join("");return $.isUndefined(b)||(b+=(b.match(/\?/)?"&":"?")+d),b},i.getPlatId=function(){return b.isAndroid&&b.phone?"h6":b.isIphone?"h3":b.isIpad?"h1":b.isAndroidPad?"h0":"unknowm"},i.getAdParam=function(a){var c={};return c.pt="oad",c.plat=i.getPlatId(),c.sver="",c.sysver=b.osVersion,c.c="tv",c.vc=i.getVc(a),c.pn=i.getPn(),c.al=a.plid||a.sid||a.aid||"",c.du=a.totalDuration||a.duration||0,c.vid=a.vid||"",c.tvid=a.tvid||"",c.tuv=Cookie.get("MUV")||Cookie.get("SUV")||"",c.vu="",c.prot="vast",c.cat="1",c.ar=a.areaId||a.area_id||6,c.callback="getAdsCallback",c.json="std","0"!==h.adClose&&(c.adClose=h.adClose),c.appid=i.appid,c.pageUrl=window.location.href,c.type=a.site&&2===a.site||a.cid&&"9001"===a.cid?"my":"vrs",c.ag="",c.st="",c.partner=URL.getQueryString("src")||URL.getQueryString("SRC")||Cookie.get("MTV_SRC")||"-2",c},i.getVc=function(a){var b=a.cateCode||a.cate_code||a.cid||"";
return b&&b.indexOf(";")>-1&&(b=b.replace(/.*?;/,"")),b},i.getPn=function(){var a=i.getPlatId();return"h6"===a?"androidphone":"h3"===a?"iphone":"h16"===a?"androidpad":"h1"===a?"ipad":"unknowm"},i.getPauseAdInfo=function(a,b){b({imgUrl:"http://t12.baidu.com/it/u=3602855978,1840777505&fm=56"})},i.pauseAdInfoProcess=function(a){return a},i.sendInnerPingback=function(a,b){if("undefined"!=typeof a){var c={video_catecode:i.videoData.cateCode.split(";")[0]||"",video_plid:i.videoData.sid||i.videoData.plid||"",video_dur:i.cache.duration,partner:URL.getQueryString("src")||URL.getQueryString("SRC")||Cookie.get("MTV_SRC")||"-2"};"video_ad_response"===a?(c.ad_status=1,c.ad_total_num=0,c.ad_empty_num=0,c.ad_eff_num=0,c.ad_total_dur=0):"video_ad_play"===a?(c.ad_is_empty=0,c.ad_total_num=i.mediaAd.realTotalCounts,c.ad_eff_num=i.mediaAd.effCounts):"video_ad_close"===a&&(c.ad_total_num=i.mediaAd.realTotalCounts,c.ad_eff_num=i.mediaAd.effCounts);for(var d in b)c[d]=b[d];console.log("发送内部行为统计数据 ("+a+"):",c),ClickTrace.pingback(null,a,c)}},i.getAndroidAdInfo=function(a,b){var c;h.debug?(c=h.urls.adrMediaDebug+"?"+i.toString(a),Console.log("debug -> android广告请求:"+c)):c=h.urls.adrMedia+"?"+i.toString(a),setTimeout(function(){h.isGetFlag||(console.log("android广告请求超时，直接播放视频"),i.sendInnerPingback("video_ad_response"),h.timeoutFlag=!0,d.adv.mediaAd=i.androidAdInfoProcess(),k.process.ended())},h.timeout),vast.getData(c,function(a){a=i.androidAdInfoProcess(a),b(a)})},i.androidAdInfoProcess=function(a){var b={totalDuration:0,urls:{mp4:{nor:[]},downloadUrl:[]},durations:{nor:[]},adDataList:[],adVidList:[],realTotalCounts:0,emptyCounts:0,effCounts:0};if(!$.isUndefined(a)&&a instanceof Array){var c=1,d=1;$.each(a,function(a,e){if(!$.isUndefined(e.videoUrl)){var f={};f.duration=e.duration,f.clickUrl=e.clickUrl,f.vid=e.vid||"",f.cateCode=i.videoData.cateCode,f.advEFId="adv_id_"+a,f.counts=parseInt(e.cnt)||1,"error"!==e.videoUrl?(f.src=i.getQueryAdVideoURL(f,e.videoUrl),f.effAdPosition=d,d++):(f.src=e.videoUrl,f.effAdPosition=-1,b.emptyCounts+=f.counts),$.isUndefined(e.vid)||""===e.vid||b.adVidList.push(e.vid);for(var g=[],h=0;h<f.counts;h++)g.push(c+h);c+=f.counts,f.adPosition=g.join(","),b.adDataList.push(f),b.urls.mp4.nor.push(f.src),b.durations.nor.push(f.duration),b.realTotalCounts+=f.counts,"number"==typeof f.duration&&(b.totalDuration+=f.duration)}}),b.effCounts=b.realTotalCounts-b.emptyCounts}return b},i.toString=function(a){var b=[];for(var c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")},i.getEffectiveMediaData=function(a){var b,c=$.extend(!0,{},a);for(b=c.adVidList.length-1;b>=0;b--)"error"===c.adVidList[b]&&c.adVidList.splice(b,1);for(b=c.adDataList.length-1;b>=0;b--){var d=c.adDataList[b];"error"===d.duration&&"error"===d.src&&c.adDataList.splice(b,1)}for(b=c.urls.mp4.nor.length-1;b>=0;b--)c.urls.mp4.nor[b].indexOf("error")>-1&&c.urls.mp4.nor.splice(b,1);for(b=c.durations.nor.length-1;b>=0;b--)(c.durations.nor[b]+"").indexOf("error")>-1&&c.durations.nor.splice(b,1);return c},j.pauseAd=function(a){var b=[];return b.push('<div class="ad_pause '+h.pauseAdConClass+'" style="display: none;">'),b.push('<img src="'+a.imgUrl+'">'),b.push('<em class="'+h.pauseAdCloseBtnClass+'"></em>'),b.push("</div>"),b.join("")},j.mediaTimer=function(){var a=[];return a.push('<span class="ad_time '+h.mediaTimerConClass+'" style="display: none;">'),a.push('<span class="ad_time_desc">广告倒计时:</span>'),a.push('<span class="ad_time_timer '+h.mediaTimerClass+'"></span>'),a.push('<span class="ad_time_desc">秒</span>'),a.push("</span>"),a.join("")},j.mediaAdvDetail=function(){var a=[];return a.push('<div class="gg_area '+h.adDetailBtnClass+'">'),a.push('<div class="ad_detail">'),a.push("详情"),a.push("</div></div>"),a.join("")},k.init=function(a,b){h.init(a,b)&&i.init(a,b)},k.platformAdaptation=function(){return h.mediaAdPlatform.indexOf("android")>-1&&b.isAndroid?!0:h.mediaAdPlatform.indexOf("ios")>-1&&(b.isIphone||b.isIpad)?!0:!1},k.getPauseAdView=function(a){if(h.isPauseAd){var b={};i.getPauseAdInfo(b,function(b){a(j.pauseAd(b))})}else a("")},k.getMediaAdView=function(a){if(b.isAndroid){var c="";c+=j.mediaTimer(),c+=j.mediaAdvDetail(),a(c)}else a("")},k.showParamAd=function(){h.isPauseAd&&$("."+h.pauseAdConClass).show()},k.hideParamAd=function(){h.isPauseAd&&$("."+h.pauseAdConClass).hide()},k.getAndroidAdInfo=function(a){var b=i.getAdParam(i.videoData);i.sendInnerPingback("video_ad_request"),i.getAndroidAdInfo(b,function(b){if(!h.timeoutFlag){var c={ad_status:0,ad_total_num:b.realTotalCounts,ad_empty_num:b.emptyCounts,ad_eff_num:b.effCounts,ad_total_dur:b.totalDuration};i.sendInnerPingback("video_ad_response",c),h.isGetFlag=!0,0!==b.totalDuration&&(h.isValidFlag=!0),a(b)}})},k.showMediaTimer=function(){$("."+h.mediaTimerConClass).show()},k.hideMediaView=function(){$("."+h.mediaTimerConClass).hide(),$("."+h.adDetailBtnClass).hide()},k.updateMediaTimer=function(a){$("."+h.mediaTimerClass).html(a)},k.addAdView=function(a){h.isPauseAd&&k.getPauseAdView(function(b){a.$main.append(b)}),h.mediaAdPlatform.indexOf("android")>-1&&k.getMediaAdView(function(b){a.$main.append(b)})},k.addAdvertise=function(b){var c=h.player;h.addAdCallback=b,k.getAndroidAdInfo(function(b){if(c.adv.mediaAd=b,i.mediaAd=b,"0"===h.adClose){if(b.adDataList.length>0&&console.log("android广告获取成功",b),c.duration=b.totalDuration,h.isFirstLoad&&(k.eventInit(),h.isFirstLoad=!1),0===b.adDataList.length)return console.log("没有获取到android广告贴片内容"),void k.process.ended();if(f.isFinishAdvReq=!0,i.effMediaData=i.getEffectiveMediaData(i.mediaAd),i.effMediaData.adDataList.length>0){var d=c.settings;d.isMediaAdContent=!0,d.modeType="nor",i.effMediaData.srcType="mp4",c.cache=new a.VideoInfo(d,i.effMediaData),c.initVideoTag();var e=function(){k.addAdView(c),k.updateMediaTimer(c.duration),k.showMediaTimer()};c.$main&&c.$main.length>0?e():c.on("loaded",function(){e()}),c.play()}else i.curAdIndex=i.mediaAd.adDataList.length-1,$.each(i.mediaAd.adDataList,function(a,b){console.log("发送android空广告上报 cIndex:"+a),vast.trackempty(a);var c={ad_inc_num:b.counts,ad_pos:b.adPosition,ad_eff_pos:b.effAdPosition,ad_dur:b.duration,ad_vid:b.vid};i.sendInnerPingback("video_ad_play",c)}),k.process.ended()}else console.log("android广告已经获取成功，但是广告被屏蔽"),i.sendInnerPingback("video_ad_close"),k.process.ended()})},k.emptyAdCheckAndReport=function(a){var b=a.cache.curPlayUrl;$.each(i.mediaAd.adDataList,function(a,c){if(a<=i.curAdIndex&&"error"===c.duration&&"error"===c.src&&!c.reportFlag){console.log("发送android空广告上报 cIndex:"+a),i.mptIndex.push(a),vast.trackempty(a);var d={ad_inc_num:c.counts,ad_pos:c.adPosition,ad_eff_pos:c.effAdPosition,ad_dur:c.duration,ad_vid:c.vid};i.sendInnerPingback("video_ad_play",d),c.reportFlag=!0}return b===c.src&&a>i.oldAdIndex?(i.curAdIndex=a,!1):void 0})},k.getCurAdIndex=function(){var a=0,b=d.getSrc()||"";return $.each(i.mediaAd.adDataList,function(c,d){return"error"!==d.src&&b.indexOf(d.src.split("?")[1])>-1?(a=c,!1):void 0}),a},k.updateAdv=function(){h.reset(),i.reset(),h.player.adv.isMediaPlayed=!1,i.cache=$.extend(!0,{},h.player.cache),i.videoData=h.player.videoData,k.addAdvertise(h.addAdCallback)},k.eventInit=function(){var a=k.process,b=h.player;b.$midPlay.on(END_EVENT,function(){a.play(this)}),b.$main.on(END_EVENT,"."+h.adDetailBtnClass,function(){a.adDetail()}),b.addEvent("timeupdate",a.timeupdate),b.addEvent("pause",a.pause),b.on("ended",a.ended),h.isPauseAd&&b.addEvent("playing",a.playing)},k.process={},k.process.adDetail=function(){if(i.mediaAd.adDataList){var a=i.curAdIndex,b=h.urls.advIframe+"?url="+encodeURIComponent(i.mediaAd.adDataList[a].clickUrl);console.log("android click广告上报: clickIndex: "+a),vast.trackClick(a),h.player.pause(),setTimeout(function(){window.open(b)},50)}},k.process.timeupdate=function(){var a=h.player;if(!a.adv.isMediaPlayed){var c=a.adv,d=a.videoTag.currentTime;if(0===d)return;var e=a.currentTime;if(e>0&&Math.abs(e-a._lastCurTime)>2&&(a._startPlayTime=$.now()),b.isUCBrowser||b.isQQBrowser)if(c.isMediaPlayed)a._lastCurTime=e;else{if(e-a._lastCurTime>1)return void a.seekTo(a._lastCurTime);a._lastCurTime=e}if(-1===i.curAdIndex&&(i.curAdIndex=k.getCurAdIndex()),a.$posterCon.addClass("hidden"),a.$mid.oriHide(),a.hideMainCtrl(),k.emptyAdCheckAndReport(a),i.oldAdIndex!==i.curAdIndex)return-1===$(i.mptIndex).indexOf(i.oldAdIndex)&&(console.log("android end广告上报: endIndex: "+i.oldAdIndex),vast.trackAdComplete(i.oldAdIndex)),void(i.oldAdIndex=i.curAdIndex);if(vast.trackAd(d,i.curAdIndex),i.sendRepAdIndex!==i.curAdIndex){var f=i.mediaAd.adDataList[i.curAdIndex],g={ad_is_empty:1,ad_inc_num:f.counts,ad_pos:f.adPosition,ad_eff_pos:f.effAdPosition,ad_dur:f.duration,ad_vid:f.vid};i.sendInnerPingback("video_ad_play",g),i.sendRepAdIndex=i.curAdIndex}k.updateMediaTimer(a.duration-parseInt(a.currentTime,10));var j=a.videoTag.duration,l=a.videoTag.currentTime;/SAMSUNG SM-N90/i.test(b.desc)&&parseInt(j,10)>=parseInt(l,10)-1&&a.cache.curIndex===a.cache.totCounts&&k.process.ended()}},k.process.ended=function(){var a=h.player;if(a.adv&&!a.adv.isMediaPlayed){f.isFinishAdvReq=!0;var c=function(){a.$maskLayer.oriHide(),k.hideMediaView()};a.$video.attr("data-adover","true"),"0"===h.adClose&&h.isGetFlag&&h.isValidFlag&&(console.log("android end广告上报: endIndex: "+i.curAdIndex),vast.trackAdComplete(i.curAdIndex)),a.$maskLayer&&a.$maskLayer.length>0?c():a.on("loaded",function(){c()}),a.cache=i.cache,a.initVideoTag(),a.adv.isMediaPlayed=!0,a.cache.isMediaAdContent=!1;var d=a.adv.mediaAd.adDataList;if(i.curAdIndex<d.length-1)for(var e=i.curAdIndex+1;e<d.length;e++){var g="发送android"+("0"!==h.adClose?"":"空")+"广告上报 cIndex:";console.log(g+e),vast.trackempty(e);var j={ad_inc_num:d[e].counts,ad_pos:d[e].adPosition,ad_eff_pos:d[e].effAdPosition,ad_dur:d[e].duration,ad_vid:d[e].vid};i.sendInnerPingback("video_ad_play",j)}b.isIphone&&IsWeixin||a.showMainCtrl(),b.isQQBrowser?setTimeout(function(){a.play()},50):a.play(),$.isFunction(h.addAdCallback)&&h.addAdCallback()}},k.process.pause=function(){d.adv.isMediaPlayed||(d.$mid.oriShow(),d.$midPlay.oriShow(),d.$maskLayer.oriHide(),h.isPauseAd&&k.showParamAd())},k.process.play=function(a){a.adv&&!a.adv.isMediaPlayed&&(a.$mid.oriHide(),a.play())},k.process.playing=function(){k.hideParamAd()},k.init(d,e),this.mediaAdPlatform=e.mediaAdPlatform,this.isMediaPlayed=!1,this.isFinishAdvReq=!1,this.isPauseAd=e.isPauseAd,this.addAdvertise=k.addAdvertise,this.updateAdv=k.updateAdv}}(svp),function(a){"use strict";a=a||{};var b={param:{retryCount:3,urls:{ipLimit:"http://api.tv.sohu.com/mobile_user/device/clientconf.json"}},model:{},view:{},ctrl:{}},c=b.param,d=b.model,e=(b.view,b.ctrl);d.getIpLimitData=function(a,b){$.ajax({url:c.urls.ipLimit,data:a,dataType:"jsonp",success:b})},e.copyRightCheck=function(b,c){var e="您所在的国家或地区, 不在所播放的节目版权范围",f={};if(f.result=!0,f.msg="版权有效",$.isUndefined(b))c(f);else{var g=b.fee||b.apiData&&b.apiData.fee||0;if(("2"==b.mobileLimit||"1"==b.h5Limit||"0"!=g)&&(f.result=!1,f.msg=e,c(f)),"1"==b.ipLimit){var h={};$.extend(h,a.API_PARAMS,{from:"h5",poid:"1",sysver:$.userAgent.osVersion||"0"}),d.getIpLimitData(h,function(a){a.data&&"1"==a.data.iplimit?(f.result=!1,f.msg=e):(f.result=!0,f.msg="版权有效"),c(f)})}else c(f)}},a.copyright=e.copyRightCheck}(svp);var svp=svp||{};!function(svp){"use strict";var Action={URLProtocol:"sohuvideo"+(IsIPad?"hd":"")+"://",openTime:IsIOS?800:1e3,appChanneled:1000120001,channelSrc:"0",appointUrl:"",maxEffectiveTime:72e5,appPortArr:["23456","23457"],appInfoReqCounts:0,getDownloadUrl:function(a,b){var c=this;if(a&&a.downUrl)b(a.downUrl);else if(""!==this.appointUrl)b(this.appointUrl);else{var d=a&&a.channelSrc?a.channelSrc:this.channelSrc;(d+"").length>4&&(d=d.substr(0,4));var e="http://m.tv.sohu.com/h5/cooperation/"+d+".json?pos=1&platform="+Util.getUserPt()+"&callback=?";console.log("获取下载链接ajax:",e),$.ajax({url:e,type:"get",dataType:"jsonp",success:function(a){var d;a&&a.records.length>0&&(d=c.appointUrl=a.records[0].link),b(d&&""!==d?d:Action.getSohuDefaultApplink())},error:function(){b(Action.getSohuDefaultApplink())}})}},gotoDownload:function(a){this.getDownloadUrl(a,function(b){if(""!==b){var c=a&&a.delayTime?a.delayTime:Action.openTime;setTimeout(function(){window.location.href=b},c)}})},openIos:function(a,b){if(a){ClickTrace.pingback(null,"app2_ios_action");var c=document.createElement("iframe");c.style.display="none";var d,e=document.body,f=function(a,d){b&&"function"==typeof b&&b(d),window.removeEventListener("pagehide",g,!0),window.removeEventListener("pageshow",g,!0),c&&(c.onload=null,e.removeChild(c),c=null)},g=function(a){clearTimeout(d),f(a,!1)};window.addEventListener("pagehide",g,!0),window.addEventListener("pageshow",g,!0),c.onload=f,c.src=a,e.appendChild(c);var h=+new Date;d=setTimeout(function(){d=setTimeout(function(){var a=+new Date;h-a>1300?f(null,!1):f(null,!0)},1200)},60)}},openAndroid:function(a,b){if(a){if(ClickTrace.pingback(null,"app1_android_action"),(/SAMSUNG-SM-G90|SAMSUNG[\s-]+SM-N900|Nexus\s5/i.test(UA)||"undefined"!=typeof a&&a.indexOf("intent")>-1||/Nexus\s5/i.test(UA)||/UCBrowser/i.test(UA))&&-1===a.indexOf("svawebsocket"))window.location.href=a;else{var c=document.createElement("iframe");c.style.display="none",c.src=a;var d=document.body;d.appendChild(c),setTimeout(function(){d.removeChild(c),c.onload=null,c=null},200)}b&&"function"==typeof b&&b()}},sendAction:function(a,b){var c=Action.makeActionUrl(a);if(IsAndroid)Action.openAndroid(c,b);else if(IsIOS)Action.openIos(c,b);else{var d=this.getIframe();d.attr("src",c)}},getIframe:function(){var a=$("#j_redirectNativeFrame");return 0===a.length&&(a=$('<iframe id="j_redirectNativeFrame" style="display:none"></iframe'),$("body").append(a)),a},getPopTipsView:function(){var a=[];return a.push('<div class="app_download_select js_download_select" style="display: none;">'),a.push('<div class="app_download_title js_download_select_title"></div>'),a.push('<div class="app_downlaod_btn app_downlaod_left js_download_select_left">立刻安装</div>'),a.push('<div class="app_downlaod_btn app_downlaod_right js_download_select_right">关闭</div>'),a.push("</div>"),a.push('<div class="download_masklayer js_download_masklayer" style="display: none;"></div>'),a.join("")},popTips:function(a,b){var c=$(".js_download_select"),d=$(".js_download_masklayer");0===c.length&&($("body").append(this.getPopTipsView()),c=$(".js_download_select"),d=$(".js_download_masklayer"),$(".js_download_select_left").on(END_EVENT,function(){Action.gotoDownload(),c.oriHide(),d.oriHide()}),$(".js_download_select_right").on(END_EVENT,function(){c.oriHide(),d.oriHide()}));var e=a&&a.title?a.title:"高速观看需安装搜狐视频客户端";$(".js_download_select_title",c).html(e),d.oriShow(),c.oriShow(),$.isFunction(b)&&b()},isIntentList:function(){var a=!1;return IsAndroid&&/SAMSUNG-SM-G90|SAMSUNG[\s-]+SM-N900|Nexus\s5/i.test(UA)&&(a=!0),a},isForceIntent:function(){var a=!1;return IsAndroid&&Action.isIntentList()&&!/UCBrowser/i.test(UA)&&(a=!0),a},getAppChanneled:function(){var a=window.isRecomend||!1,b=window.VideoData||window.videoData||{},c=URL.getQueryString("channeled")||b.channeled||Action.appChanneled,d=location.href||"http://m.tv.sohu.com/";try{d.indexOf("hots")&&!a&&(c=b.channeled||URL.getQueryString("channeled")||Action.appChanneled)}catch(e){channeld=Action.appChanneled,console.log(e)}return c},makeActionUrl:function(a){var b=Action.URLGlobalParms;a.scheme=b.clientType&&"1"===b.startClient||!Cookie.test()?"sohuvideo":"1"===b.startClient||Action.isForceIntent()?"intent":"sohuvideo";var c=a.scheme,d=a.action||a.actionVer||"1.1",e=a.cateCode||"",f=a.channeled||Action.getAppChanneled();e=e.toString().split(",")[0]||"",a=Action.formatArgs(a);var g={action:d,vid:a.vid,sid:a.sid,cid:a.cid,cateCode:e,ex1:a.ex1||1,ex2:a.ex2||"",ex3:a.ex3||"",site:a.site||"",more:{sourcedata:{channeled:f,enterid:4,preid:location.href}}};a&&a.action&&a.site&&"2"===a.site&&(g.ex3=2,g.sid="",g.site="2"),a&&a.more&&(g.more=a.more),g.more.hasOwnProperty("sourcedata")||(g.more.sourcedata={channeled:f,enterid:4,preid:location.href}),c?c=c.replace("://",""):(c=Action.URLProtocol,c=c.replace("://",""));var h="";if(IsAndroid)if(c.indexOf("intent")>-1){h="intent://",h+="?"+URL.objToQueryString(g).replace(/index\.html%2C/,"index.html");var i="#Intent;scheme=sohuvideo;package=com.sohu.sohuvideo;end";h+=i,console.log("android intent 1:",JSON.stringify(g))}else h=c+"://",h+="action.cmd",h+="?"+URL.objToQueryString(g).replace(/index\.html%2C/,"index.html"),console.log("android intent 2:",JSON.stringify(g));else console.log("android sohovideo:",JSON.stringify(g)),console.log("android sohovideo:###",c),h=Action.URLProtocol,h+="action.cmd",h+="?"+URL.objToQueryString(g).replace(/index\.html%2C/,"index.html");return console.log("makeActionUrl : "+h),h},getSohuDefaultApplink:function(){return Util.getSohuDefaultApplink()},URLGlobalParms:{},updateGlobalParms:function(a,b){var c,d=$("a[href],form",a),e=d.length;for(b=b||Action.URLGlobalParms;e--;)c=d.get(e),URL.setQueryString(c,b)},formatArgs:function(a){var b=a.vid||"",c=a.sid||"",d=a.url||window.location.href,e=a.action+""||"1.1";if(!a)return a;if(b||c){if(a.action=e,"1.1"===e&&(9001===a.cid||"2"===a.site)&&(a.ex3=2,a.sid="",a.site="2"),"1.19"===e||"1.20"===e){if(!b)return;d=d.split("?")[0],a.urls=d,a.ex1="",a.ex2="",a.ex3="","1.20"===e&&(a.urls=d.replace(/play/,"index")+","+d)}"1.17"===e&&(a.ex1=a.ex1||1,a.ex2=a.ex2||"",a.ex3=a.ex3||"",2===a.ex1&&(a.open=1))}else(a.live||d.match(/live/i)||d.match(/\.m3u8/i))&&(a.action=a.action||"1.1",a.ex1=a.ex1||3);return a},parserUrls:function(){!StartClient||Action.URLGlobalParms.clientType||Action.URLGlobalParms.actionVer||URL.setQueryString(this,{startClient:1});for(var a,b=["clientType","clientVer","actionVer","startClient","actionId"],c=b.length,d=URL.getQueryData(location.search.substring(1)),e={};c--;)a=b[c],d.hasOwnProperty(a)&&d[a]&&(e[a]=d[a]);Action.updateGlobalParms(DOC,e),Action.URLGlobalParms=e},parserAttributes:function(data,el){for(var videoParmsKeys=["vid","cid","sid","plid","cateCode","site"],c=videoParmsKeys.length,URLParms=Action.URLGlobalParms,vd=data||window.VideoData||window.videoData||{},args={};c--;){var key=videoParmsKeys[c];vd&&vd[key]&&(args[key]=vd[key]),URLParms&&URLParms.hasOwnProperty(key)&&URLParms[key]&&(args[key]=URLParms[key])}var channeled=URLParms.channeled||Action.getAppChanneled(),more={sourcedata:{channeled:channeled,enterid:4,preid:location.href}},vid=args.vid||"",sch=Action.URLProtocol,downUrl=args.downUrl||"",actionId=args.actionId||args.actionVer||"1.1";if("undefined"!=typeof el){el=$(el),channeled=el.attr("channeled")||channeled,vid=el.attr("vid")||vid;var _sch=el.attr("data-scheme");_sch&&(sch=_sch.toLowerCase()),downUrl=el.attr("data-downUrl")||el.attr("data-downurl")||downUrl,actionId=el.attr("actionId")||el.attr("actionid")||"1.1",args.action=actionId,args.vid=vid,args.channeled=channeled,args.scheme=sch,args.downUrl=downUrl;try{var _params=eval(el.attr("data-params"))||[];for(var i in _params){var jsonObj=_params[i]||{};jsonObj&&$.extend(!0,args,jsonObj)}}catch(e){console.log(e)}}return vd.site&&"2"===vd.site?args.ex3=2:args.ex1=1,more.sourcedata.channeled=channeled,args.more=more,args.action=actionId,args=Action.formatArgs(args),args.scheme=sch,args.downUrl=downUrl,console.log("parserAttributes:",JSON.stringify(args)),args},init:function(){this.parserUrls(),this.URLProtocol="sohuvideo"+(IsIPad?"hd":"")+"://",this.channelSrcInit()},channelSrcInit:function(){var a=URL.getQueryString("src")||URL.getQueryString("SRC")||Cookie.get("MTV_SRC")||"0";this.channelSrc=a.split("|")[0]||"0"},addIosMeta:function(){var a,b,c,d=document.createElement("meta");IsIOS&&(IsIPhone&&(a="https://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8",content="app-id=458587755",content+=", app-argument=sohuvideo://action.cmd ",content+=", affiliate-data=mt=8",d.setAttribute("content",content),d.setAttribute("name","apple-itunes-app"),b=document.getElementsByTagName("meta"),c=b[0].parentNode,c.appendChild(d)),IsIPad&&(a="https://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8",content="app-id=414430589",content+=", app-argument=sohuvideo://action.cmd ",content+=", affiliate-data=mt=8",d.setAttribute("content",content),d.setAttribute("name","apple-itunes-app"),b=document.getElementsByTagName("meta"),c=b[0].parentNode,c.appendChild(d)))},bindAction:function(){var a="ontouchstart"in window?"touchend":"mouseup";$("body").on(a,".actionLink",function(){var a=this,b=window.VideoData||window.videoData||{},c=Action.parserAttributes(b,a);console.log("params",c),Action.sendAction(c)}),$("body").on("click",".hotActionLink",function(){var a=this,b=window.VideoData||window.videoData||{},c=Action.parserAttributes(b,a);console.log("params",c),c&&c.site&&"2"===c.site&&(c.ex3=2),IsIOS?(c.action="2.4",c.cid="9006"):c.action="1.1",Action.sendAction(c)})},makeWebActionUrl:function(a){var b=Action.URLGlobalParms,c="svawebsocket";b.clientType&&"1"===b.startClient||!Cookie.test()?c="svawebsocket":a.sch?c=a.sch:("1"===b.startClient||Action.isForceIntent())&&(c="intent");var d={action:"1.1",more:{sourcedata:{channeled:Action.getAppChanneled(),enterid:4,preid:location.href}}},e="";if(IsAndroid)if(c.indexOf("intent")>-1){e="intent://",e+="?"+URL.objToQueryString(d).replace(/index\.html%2C/,"index.html");var f="#Intent;scheme=svawebsocket;package=com.sohu.sohuvideo;end";e+=f,console.log("android intent 1:",JSON.stringify(d))}else e=c+"://",e+="action.cmd",e+="?"+URL.objToQueryString(d).replace(/index\.html%2C/,"index.html"),console.log("android intent 2:",JSON.stringify(d));else console.log("android sohovideo:###",c),e="svawebsocket://",e+="action.cmd",e+="?"+URL.objToQueryString(d).replace(/index\.html%2C/,"index.html");return console.log("makeWebActionUrl : "+e),e},sendWebAction:function(a,b,c){var d=this,e=Action.makeWebActionUrl(a);if(console.log("start websocket url: "+e),IsAndroid)Action.openAndroid(e,b);else if(IsIOS)Action.openIos(e,b);else{var f=this.getIframe();f.attr("src",e)}setTimeout(function(){Action.getAppInfoByAjax(a,function(b){null===b&&d.appPortArr.length-1>=d.appInfoReqCounts?Action.getAppInfoByAjax(a,function(a){c(a)}):c(b)})},200)},getAppInfoByAjax:function(a,b){var c,d=a&&a.ip?a.ip:"127.0.0.1";a&&a.port?c=a.port:this.appPortArr[this.appInfoReqCounts]?(c=this.appPortArr[this.appInfoReqCounts],this.appInfoReqCounts++):c="23456";var e="http://"+d+":"+c+"/?t=1&k=sohu1234&callback=?";console.log("ajax getAppInfoByAjax url: "+e);var f=null;$.ajax({url:e,dataType:"jsonp",success:function(a){console.log("success:  "+JSON.stringify(a)),b&&"function"==typeof b&&b(a)},error:function(a){console.log("error: "+JSON.stringify(a)),b&&"function"==typeof b&&b(f)}})},appInfoCheck:function(a){var b=["AndroidPhone","AndroidPad","iPhone","iPad","WindowsPhone","WindowsPad"];if(a){var c=a.name&&"sohuVideo"===a.name?!0:!1,d=a.clientType&&-1!==$(b).indexOf(a.clientType)?!0:!1,e=a.clientVer?!0:!1;if(c&&d&&e)return!0}return!1},getAppInfo:function(a){var b=this,c=Storage.get("localAppInfo");if(c&&c.time&&Date.now()-c.time<this.maxEffectiveTime)"function"==typeof a&&a(c);else{var d={};d.sch="svawebsocket",Action.sendWebAction(d,null,function(c){b.appInfoCheck(c)?(c.time=Date.now(),Storage.set("localAppInfo",c)):c=null,"function"==typeof a&&a(c)})}}};Action.init(),onDomReady(Action.bindAction),window.Action=Action,svp.playInClient=function(a){var b={param:{conDom:null,settings:null,firstLoadFlag:!0},model:{videoData:null,channeled:Action.appChanneled,urlParam:{}},view:{},ctrl:{}},c=b.param,d=b.model,e=b.view,f=b.ctrl;c.init=function(a){$.isUndefined(a.parentDom)||0===$(a.parentDom).length||(c.conDom=$(a.parentDom)),$.isUndefined(a.settings)||(c.settings=a.settings)},d.init=function(a){return $.isUndefined(a.videoData)?!1:(d.videoData=a.videoData,$.isUndefined(a.channeled)&&(d.channeled=a.channeled),d.urlParam=URL.getQueryData(location.search.substring(1)),!0)},d.getClientUrl=function(a){var b=URL.getQueryData(location.search.substring(1));(b.clientType||"1"==b.startClient)&&(a.scheme="sohuvideo");var c=Action.makeActionUrl(a);return c},e.download=function(){var a=[];return a.push('<div class="appdl_download2">'),a.push('<div class="msg_block">'),a.push('<span class="msg">体验高清视频,请使用</span>'),a.push('<a href="javascript:void(0);" class="actionLink">搜狐视频客户端</a>'),a.push("</div>"),a.push("</div>"),a.join("")},f.init=function(a){c.init(a),d.init(a)&&(null!==c.conDom&&$(c.conDom).append(e.download()),Action.sendAction(Action.parserAttributes()),c.firstLoadFlag&&(c.firstLoadFlag=!1),setTimeout(function(){VideoTrace.realVV(+new Date)},200))},f.init(a)}}(svp),function(a){"use strict";a=a||{};var b={param:{localHistoryName:"sohu_video_history",maxSize:20,checkArr:["sid","vid","site","playTime","duration"],paramArr:["sid","vid","site","cid","playTime","duration","sysTime","title","flag"]},model:{localDataStr:""},view:{},ctrl:{}},c=b.param,d=b.model,e=(b.view,b.ctrl);d.historyCheck=function(a){var b=!0;return $.each(c.checkArr,function(c,d){return"undefiend"==typeof a[d]?(b=!1,!1):void 0}),b},d.objToStr=function(a){var b=[];try{var d=parseInt(a.duration,10),e=parseInt(a.playTime,10);a.flag=0===e?"0":15>d-e?"2":"1"}catch(f){}return a.sysTime=Date.now(),$.each(c.paramArr,function(c,d){if("playTime"===d)try{a[d]=parseInt(a[d],10)}catch(e){}a[d]=a[d]?a[d]:"",b.push(encodeURIComponent(a[d]))}),b.join(",")},d.strToObj=function(a){var b=null;if("string"==typeof a&&"null"!==a&&""!==a){var d=a.split(",");b={},$.each(c.paramArr,function(a,c){b[c]="playTime"===c||"duration"===c||"sysTime"===c||"flag"===c||"sid"===c?parseInt(d[a],10):decodeURIComponent(d[a])})}return b},d.strToArr=function(a){var b=[];if("string"==typeof a&&""!==a&&"null"!==a){0===a.indexOf("|")&&(a=a.substr(1));var c=a.split("|");$.each(c,function(a,c){b.push(d.strToObj(c))})}return b},e.setHistory=function(a){if(d.historyCheck(a)){var b=d.objToStr(a);""===d.localDataStr&&(d.localDataStr=Storage.get(c.localHistoryName)||"");var e=""!==d.localDataStr?d.localDataStr.split("|"):[],f=","+a.vid+","+a.site+",";if(-1===d.localDataStr.indexOf(f))e.unshift(b);else{var g=[];g.push(b),$.each(e,function(a,b){-1===b.indexOf(f)&&g.push(b)}),e=g}e.length>c.maxSize&&(e.length=c.maxSize),d.localDataStr=e.join("|"),Storage.set(c.localHistoryName,d.localDataStr)}},e.getHistory=function(a){var b=[],e=d.localDataStr&&""!==d.localDataStr?d.localDataStr:Storage.get(c.localHistoryName);if(e&&"undefined"!=typeof a){if("undefined"!=typeof a.vid&&"undefined"!=typeof a.site){var f=new RegExp("(^|\\|)\\d+,"+a.vid+","+a.site+"(,[\\w\\.\\W]*){6}","ig"),g=e.match(f)+"";b=d.strToObj(g),b=null===b?[]:[b]}else if("undefined"!=typeof a.sid){var h=d.strToArr(e);$.each(h,function(c,d){d.sid+""==a.sid+""&&b.push(d)}),("undefiend"==typeof a.type||0===a.type||1!==a.type)&&(b.length=1)}}else b=d.strToArr(e);return b},a.setHistory=e.setHistory,a.getHistory=e.getHistory,SohutvJSBridge.setHistory=e.setHistory,SohutvJSBridge.getHistory=e.getHistory}(svp),function(a){"use strict";var b=function(){this.playerid="",this.videoTag=null,this.$video=null,this.cache=null,this.videoData=null,this.settings=null,this.currentTime=0,this.duration=0,this.eventProcess={loadstart:[],progress:[],suspend:[],abort:[],error:[],stalled:[],play:[],playing:[],pause:[],loadedmetadata:[],loadeddata:[],waiting:[],canplay:[],canplaythrough:[],seeking:[],seeked:[],timeupdate:[],ratechange:[],durationchange:[],ended:[],volumechange:[]},this.eventList=["loaded","loadedvideodata","loadstart","progress","suspend","abort","error","stalled","play","playing","pause","loadedmetadata","loadeddata","waiting","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"]};b.prototype.getSrc=function(){return this.$video.attr("src")},b.prototype.setSrc=function(a){this.$video.attr("src",a)},b.prototype.getPoster=function(){return this.$video.attr("poster")},b.prototype.setPoster=function(a){this.$video.attr("poster",a)},b.prototype.getPreLoad=function(){return this.$video.attr("preload")},b.prototype.setPreLoad=function(a){this.$video.attr("preload",a)},b.prototype.getControls=function(){return this.$video.attr("controls")},b.prototype.setControls=function(a){this.$video.attr("controls",a)},b.prototype.getLoop=function(){return this.$video.attr("loop")},b.prototype.setLoop=function(a){this.$video.attr("loop",a)},b.prototype.getMuted=function(){return this.$video.attr("muted")},b.prototype.setMuted=function(a){this.$video.attr("muted",a)},b.prototype.getPlaybackRate=function(){return this.$video.attr("playbackRate")},b.prototype.setPlaybackRate=function(a){this.$video.attr("playbackRate",a)},b.prototype.initOriginalEvent=function(){},b.prototype.addEvent=function(){},b.prototype.removeEvent=function(){},b.prototype.fireEvent=function(){},b.prototype.pause=function(){},b.prototype.play=function(){},b.prototype.on=function(){},b.prototype.off=function(){},b.prototype.trigger=function(){},b.prototype.one=function(){},b.prototype.htmlToElem=function(){},b.prototype.showGetDataError=function(){},b.prototype.getCurrentTime=function(){},b.prototype.setCurrentTime=function(){},b.prototype.getDuration=function(){},b.prototype.seekTo=function(){},b.prototype.playByMode=function(){},b.prototype.updateByVodData=function(){},b.prototype.updateByVideoData=function(){},b.prototype.showMsg=function(){},b.prototype.showMsgWidthBtn=function(){},a.BasePlayer=b}(svp),function(a){"use strict";var b=$.userAgent,c=function(){this.eventList=this.eventList.concat(["html5error"]),this.initBaseParam()};c.prototype=new a.BasePlayer,c.maxId=0,c.prototype.initVideoTag=function(){if(this.$video){this.setSrc(this.cache.curPlayUrl);try{this.videoTag.pause()}catch(a){}!$.isUndefined(this.$title)&&this.$title.length>0&&this.$title.html(this.cache.title)}else{var b=this.createVideoTag(this);this.playerid=this.cache.elemId,this.videoTag=b[0],this.$video=$(this.videoTag)}},c.prototype.createVideoTag=function(c){var d=[],e=c.cache;return d.push("client"===e.srcType?'<div data-noSupport="noSupport"':"<video"),d.push(' id="'+e.elemId+'"'),e.autoplay&&!IsWeixin&&d.push(" autoplay"),e.defControls&&d.push(" controls"),d.push(' x-webkit-airplay="isHtml5UseAirPlay"'),IsWeixin&&d.push(" webkit-playsinline"),d.push(' data-adover="false"'),e.autoplay||d.push(' preload="none"'),e.mediaAdPlatform&&a.isAllowPlayAdv(c)&&(e.mediaAdPlatform.indexOf("ios")>-1&&(b.isIphone||b.isIpad)||e.mediaAdPlatform.indexOf("android")>-1&&b.isAndroid)&&!/QQBrowser\/4\.2/i.test(b.desc)||d.push(' src="'+e.curPlayUrl+'"'),d.push(' height="'+e.height+'"'),d.push(' width="'+e.width+'"'),b.isIphone?d.push(' style="position:absolute; left:-200%;"'):!e.autoplay&&b.isUCBrowser&&d.push(' style="display: none;"'),d.push(' volume="'+e.volume+'"'),d.push(">"),$(d.join(""))},c.prototype.initBaseParam=function(){this._MaxQstTime=5e3,this._startTime=0,this._loadedFlag=!1,this._timeoutFlag=!1,this._getDataFlag=!1,this._nextPreLoadImg=null,this._showErrorFlag=!1,this._startPlayTime=0,this._bufferCount=0},c.prototype.reqCheck=function(){var a=this;this._startTime=$.now(),this._timeoutFlag=!1,this._getDataFlag=!1;var b=setInterval(function(){$.now()-a._startTime>a._MaxQstTime&&(clearInterval(b),a._getDataFlag||(a._timeoutFlag=!0))},100)},c.prototype.copyrightCheck=function(b,c){var d=this;b.isCopyrightCheck?a.copyright(b.data,function(e){if(e.result)c();else{if(d.trigger("loadedvideodata"),d.cache=new a.VideoInfo(b),d.cache.copyrightRst=e.result,$.isUndefined(d.$video)){var f=d.createVideoTag(d);d.playerid=f.id,d.videoTag=f,d.$video=$(d.videoTag)}d.showMsgWidthBtn(a.TYPE_CODE_MSG.COPYRIGHT[100]),c()}}):c()},c.prototype.initDoms=function(){var b="#main_player_"+a.BaseHtml5.maxId;this.$main=$(b),this.$titleCon=$(b+" .svp_title"),this.$title=$(b+" .svp_title_content"),this.$posterCon=$(b+" .svp_poster"),this.$posterRight=$(b+" .svp_poster_right"),this.$posterAdTime=$(b+" .svp_poster_ad_time"),this.$infoCon=$(b+" .svp_info"),this.$infoTitle=$(b+" .svp_info_title"),this.$infoSummary=$(b+" .svp_info_summary"),this.$mid=$(b+" .svp_mid"),this.$midPlay=$(b+" .svp_mid_play"),this.$midPause=$(b+" .svp_mid_pause"),this.$midLoading=$(b+" .svp_mid_loading"),this.$midModeListCon=$(b+" .svp_mid_mode"),this.$mideCurModeBtn=$(b+" .svp_mid_cur_mode_btn"),this.$midCurMode=$(b+" .svp_mid_cur_mode"),this.$midModeList=$(b+" .svp_mid_mod_list"),this.$ctrlCon=$(b+" .svp_ctrl"),this.$ctrlBar=$(b+" .svp_ctrl_bar"),this.$ctrlPlay=$(b+" .svp_ctrl_play"),this.$ctrlPause=$(b+" .svp_ctrl_pause"),this.$ctrlBuffer=$(b+" .svp_ctrl_buffer"),this.$ctrlPointsCon=$(b+" .svp_ctrl_points"),this.$ctrlCurPlayedBar=$(b+" .svp_ctrl_played_bar"),this.$ctrlDragBar=$(b+" .svp_ctrl_drag_bar"),this.$ctrlTime=$(b+" .svp_ctrl_time"),this.$ctrlCurTime=$(b+" .svp_ctrl_cur_time"),this.$ctrlDuration=$(b+" .svp_ctrl_duration"),this.$ctrlDragAnchor=$(b+" .svp_ctrl_drag_anchor"),this.$ctrlTrackBar=$(b+" .svp_ctrl_track_bar"),this.$ctrlDragTime=$(b+" .svp_ctrl_drag_time"),this.$ctrlScreen=$(b+" .svp_ctrl_screen"),this.$ctrlFullScreen=$(b+" .svp_ctrl_full_screen"),this.$ctrlShrinkScreen=$(b+" .svp_ctrl_shrink_screen"),this.$maskLayer=$(b+" .svp_mask_layer"),this.$pauseAdCon=$(b+" .svp_ad_pause"),this.$pauseAdCloseBtn=$(b+" .svp_ad_pause_close"),this.$downloadBtn=$(b+" .svp_download_btn"),this.$openBtn=$(b+" .svp_open_client_btn"),this.$msg=$(b+" .svp_msg"),this.$msgWidthBtn=$(b+" .svp_msg_width_btn")
},c.prototype.initSettings=function(b){var c=$.extend(!0,{},a.DEFAULT_CONFIG);return $.isUndefined(b)||($.extend(c,b),$.isUndefined(c.elemId)&&(c.elemId="sohu_video_player_"+a.BaseHtml5.maxId++),c.src="",c.poster=""),a.isForbidAutoplay()&&(c.autoplay=!1),c},c.prototype.onLoadedData=function(a,b){var c=this;if(this._timeoutFlag)return void b.call(this);if(this._getDataFlag)a.call(this);else var d=setInterval(function(){c._timeoutFlag?(clearInterval(d),b.call(c)):c._getDataFlag&&(clearInterval(d),a.call(c))},100)},c.prototype.liveDataService=function(b,c){var d=this,e=b.data,f={};f.site=e.site,f.liveId=$.isUndefined(e.liveId)?$.getUrlParam("liveId")||"147":e.liveId,a.Helper.loadHLSUrlByLiveId(f,function(e){d._getDataFlag=!0,d.settings=d.initSettings(b),d.videoData=e,d.cache=new a.VideoInfo(d.settings,d.videoData),d.trigger("loadedvideodata");var f=window.VideoData.channeled;window.VideoData=d.videoData,window.VideoData.channeled=f,window.VideoData.video_src=e.video_src,d.initVideoTag(),"function"==typeof c&&c()})},c.prototype.videoDataService=function(b,c){var d=this,e={};e.vid=b.data.vid,e.site=b.data.site,a.Helper.loadVideoUrlByVid(e,function(a){d.updatePlayerByVideoData(a,c)})},c.prototype.updatePlayerByVideoData=function(b,c){a.cooperatorProcess(b),this._getDataFlag=!0,this.videoData=b,(this.cache&&this.cache.copyrightRst||!this.cache)&&(this.cache=new a.VideoInfo(this.settings,this.videoData),this.trigger("loadedvideodata"));var d=window.VideoData.channeled;window.VideoData=this.videoData,window.VideoData.channeled=d,window.VideoData.video_src=this.cache.curPlayUrl,this.initVideoTag(),"function"==typeof c&&c()},c.prototype.vidListService=function(a,b){$.isUndefined(a.vidCurIndex)&&(a.vidCurIndex=0),a.data.vid=a.data.vidList[a.vidCurIndex],a.vidList=a.data.vidList,this.videoDataService(a,b)},c.prototype.playSourceService=function(b,c){this._getDataFlag=!0,this.settings=this.initSettings(b);var d=b.data;this.cache=new a.VideoInfo(this.settings),this.trigger("loadedvideodata"),this.cache.title=d.title,this.cache.curPlayUrl=d.src,this.cache.poster=d.poster,this.cache.modeType="",window.VideoData=window.VideoData||{},window.VideoData.video_src=d.src,this.initVideoTag(),$.isEmpty(d.src)||this.setSrc(d.src),"function"==typeof c&&c()},c.prototype.initParam=function(a,b){var c=this;this._nextPreLoadImg=null,this.settings=this.initSettings(a);var d=a.dataType;$.isUndefined(a.mediaType)||"vod"===a.mediaType?"video_data"===d?c.copyrightCheck(a,function(){c.reqCheck(),c.videoDataService(a,b)}):"vid_list"===d?c.copyrightCheck(a,function(){c.reqCheck(),c.vidListService(a,b)}):"play_source"===d&&c.playSourceService(a,b):"live_data"===d?c.liveDataService(a,b):"play_source"===d&&c.playSourceService(a,b)},c.prototype.getDataType=function(a){var b=a.data;return b.vidList instanceof Array&&b.vidList.length>0?"vid_list":$.isUndefined(b.vid)?$.isUndefined(b.src)?$.isUndefined(b.liveId)?"unknown":"live_data":"play_source":"video_data"},c.prototype.pause=function(){var a=this;this.onLoadedData(function(){null===a.$video.attr("data-noSupport")&&a.videoTag.pause()},this.loadError)},c.prototype.play=function(){var b=this;if("client"===a.playType){var c={};return c.videoData=this.settings.data,c.channeled=URLParms.channeled,c.settings=this.settings,a.playInClient(c),void VideoTrace.vv()}var d=function(){if(null===b.$video.attr("data-noSupport"))try{null!==b.$video.attr("preload")&&b.$video.removeAttr("preload"),b.videoTag.play()}catch(a){b.$video.one("canplay",function(){b.videoTag.paused&&b.videoTag.play()})}};this.onLoadedData(d,this.loadError)},c.prototype.isSupportSysFullScreen=function(){var a=!1,b=this.videoTag;return b.requestFullscreen?a=!0:b.mozRequestFullScreen?a=!0:b.webkitRequestFullscreen?a=!0:b.webkitEnterFullscreen?a=!0:b.msRequestFullscreen&&(a=!0),$(this.videoTag).hasClass("inline_player")&&!$.isEmpty(this.cache.fullscreenType)&&"1"!==this.cache.fullscreenType&&(a=!1),a},c.prototype.apiEnterFullScreen=function(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitEnterFullscreen?a.webkitEnterFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()},c.prototype.apiExitFullScreen=function(a){a.exitFullscreen?a.exitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitExitFullscreen?a.webkitExitFullscreen():a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.msExitFullscreen&&a.msExitFullscreen()},c.prototype.enterSysFullScreen=function(){var a=this;!UA.match(/HS\-U950|HUAWEI_C8812|vivo/i)||IsUC||IsQQBrowser||a.videoTag.play();var b=function(){a.videoTag.paused&&!IsIOS&&setTimeout(function(){a.videoTag.play()},0)};if(this.isSupportSysFullScreen()){var c=a.videoTag;document.addEventListener("fullscreenchange",b,!1),document.addEventListener("mozfullscreenchange",b,!1),document.addEventListener("webkitfullscreenchange",b,!1),document.addEventListener("MSFullscreenChange",b,!1),a.apiEnterFullScreen(c)}setTimeout(function(){a.videoTag.play()},0)},c.prototype.exitSysFullScreen=function(){var a=this,b=a.videoTag;a.apiExitFullScreen(b)},c.prototype.loadError=function(){var b="main_player_"+a.BaseHtml5.maxId;this._showErrorFlag||(this._showErrorFlag=!0,0===$("#"+b).length&&(this.cache={},this.cache.height=this.settings.height,this.cache.width=this.settings.width,$(this._parentDom).html(a.errorTmpl(this.cache)),this.initDoms(),this._loadedFlag=!0),this.showMsg(a.TYPE_CODE_MSG.REQUEST[100]))},c.prototype.htmlToElem=function(b){var c=this;if(0!==$(b).length){var d=function(){var d="main_player_"+a.BaseHtml5.maxId;0===$("#"+d).length?($(b).html(a.tmpl(c.cache)),c.settings.defControls&&$("#"+d).addClass("def_ctrl"),$("#"+d+" .video").html(c.videoTag)):$("#"+d).appendTo($(b)),c.initDoms(),c._loadedFlag=!0,c.trigger("loaded")};this.onLoadedData(d,c.loadError)}},c.prototype.on=function(a,c){var d=this,e=function(){return a=a.toLowerCase(),"loadedvideodata"===a?void $("body").on(a,c):void(!/SAMSUNG SM-N90/i.test(b.desc)||"ended"!==a&&"onended"!==a?d.$video.on(a,function(b){if(d._loadedFlag)if("ended"===a||"onended"===a){var e=d.cache;(e.curIndex===e.totCounts||-1===e.curIndex)&&c.call(d,b)}else c.call(d,b)}):d.addEvent("timeupdate",function(a){var b=(d.videoTag.duration,d.videoTag.currentTime,d.cache);(b.curIndex===b.totCounts||-1===b.curIndex)&&c.call(d,a)}))};this.onLoadedData(e,d.loadError)},c.prototype.off=function(a,b){return a=a.toLowerCase(),"loadedvideodata"===a?void $("body").off(a,b):void this.$video.off(a,b)},c.prototype.trigger=function(a){a=a.toLowerCase(),"loadedvideodata"===a?$("body").trigger(a):this.$video.trigger(a)},c.prototype.one=function(a,b){var c=this;a=a.toLowerCase(),"loadedvideodata"===a?$("body").one(a,b):"ended"===a?this.$video.on(a,function(){c.cache.curIndex===c.cache.totCounts-1&&c.$video.one(a,function(a){b.call(c,a)})}):this.$video.one(a,function(a){b.call(c,a)})},c.prototype.onBaseEnded=function(){var a=this,b=a.cache,c=b.getNextUrl();if(this._startPlayTime=$.now(),this._bufferCount=0,-1===b.curIndex&&(b.curIndex=0),""!==c)this.trigger("waiting"),b.curPlayUrl=c,b.curIndex++,this.setSrc(b.curPlayUrl),setTimeout(function(){a.videoTag.play()},100),this.videoData.video_src=c;else if(b.loop&&!b.isMediaAdContent){this.trigger("waiting");var d=b.getFirstUrl();this.setSrc(d),this.play(),b.curPlayUrl=d,b.curIndex=-1,this.videoData.video_src=d}else b.curPlayUrl=c,b.curIndex++;this._nextPreLoadImg=null},c.prototype.onBaseTimeupdate=function(){var a=this.videoTag.duration,c=this.videoTag.currentTime;if(20>=a-c&&null===this._nextPreLoadImg){var d=this.cache,e=d.getNextUrl();""!==e&&(this._nextPreLoadImg=new Image,this._nextPreLoadImg.src=e)}this.currentTime=this.getCurrentTime(),this.duration=this.getDuration(),/SAMSUNG SM-N90/i.test(b.desc)&&parseInt(c,10)>=parseInt(a,10)-1&&this.cache.curIndex>-1&&this.fireEvent("ended")},c.prototype.init=function(a,b){var c=this;a.dataType=this.getDataType(a),this.initParam(a,function(){c.settings.debug&&Console.log("启动debug模式"),c.initBaseEvent(),"function"==typeof b&&b()})},c.prototype.initBaseEvent=function(){this.initOriginalEvent(),this.addEvent("ended",this.onBaseEnded),this.addEvent("timeupdate",this.onBaseTimeupdate)},c.prototype.initOriginalEvent=function(){var a=this,c=this.eventProcess;this.$video&&this.$video.length>0&&$.each(a.eventList,function(d,e){$.isArray(c[e])&&(/SAMSUNG SM-N90/i.test(b.desc)&&"ended"!==e||!/SAMSUNG SM-N90/i.test(b.desc))&&a.$video.on(e,function(b){$(a.$video,a.$main).length>0&&$.each(c[e],function(c,d){d.process.call(a,b)})})})},c.prototype.addEvent=function(a,b,c){var d=this.eventProcess;if(!$.isUndefined(a)&&!$.isUndefined(d[a])){var e={};$.isFunction(b)?(e.name="_"+a+(new Date).getTime(),e.process=b,d[a].push(e)):$.isString(b)&&$.isFunction(c)&&(e.name=b,e.process=c,d[a].push(e))}},c.prototype.removeEvent=function(a,b){var c=this.eventProcess;$.isUndefined(a)||$.isUndefined(c[a])||($.isUndefined(b)?c[a]=[]:$.isString(b)&&$.each(c[a],function(d,e){e.name===b&&c[a].splice(d,1)}))},c.prototype.fireEvent=function(a){var b=this.eventProcess,c=this;$.isUndefined(a)||$.isUndefined(b[a])||$.each(b[a],function(a,b){b.process.call(c)})},c.prototype.showMsg=function(a){this.$msg&&(this.$msg.find(".svp_content").html(a),this.$msg.oriShow(),this.$video&&(this.pause(),this.$video.oriHide().remove(),this.$maskLayer.oriShow()))},c.prototype.showMsgWidthBtn=function(a){this.$msgWidthBtn&&(this.$msgWidthBtn.find(".svp_content").html(a),this.$msgWidthBtn.oriShow(),this.$video&&(this.pause(),this.$video.oriHide().remove(),this.$maskLayer.oriShow()))},a.BaseHtml5=c}(svp),function(a,b){function c(a){console.log(a)}var d=document,e=window,f=(e.navigator.userAgent,!!d.all),g=function(c,d){var e,g,h;if(f)e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),e&&(g=parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0],10));else{var i=window.navigator.plugins;if(i&&i.length>0&&(e=i["Shockwave Flash"]))for(var j=e.description.split(" "),k=0,l=j.length;l>k;k++){var m=parseInt(j[k],10);isNaN(m)||(g=m)}}return g&&d.vid?(b.getScript("http://js.tv.itc.cn/base/plugin/swfobject13123101.js",function(){if("9001"==d.cid||"2"==d.site)var e=new SWFObject("http://share.vrs.sohu.com/my/v.swf&showRecommend=0&autoplay=true&sogouBtn=0&shareBtn=0&topBarFull=0&topBar=0&topBarNor=0&skinNum=8&topBarFull=0&id="+d.vid+"&api_key="+a.API_KEY,"sohuplayer","100%","100%","9,0,115","#000000");else{var f="http://tv.sohu.com/upload/swf/20140429/Main.swf",e=new SWFObject(f,"sohuplayer","100%","100%","9,0,115","#000000");e.addVariable("skinNum","1"),e.addVariable("pageurl",location.href),e.addVariable("vid",d.vid),e.addVariable("pid",d.pid),e.addVariable("nid",""),e.addVariable("seekTo","0"),e.addVariable("jump","0"),e.addVariable("autoplay","true"),e.addVariable("showRecommend","0"),e.addVariable("wmode","Opaque"),e.addVariable("sid",Cookie.get("SUV")||d.sid),e.addVariable("api_key",a.API_KEY)}e.addParam("quality","high"),e.addParam("allowscriptaccess","always"),e.addParam("allowfullscreen","true"),e.flashVars="",h=e.getFlashHtml(),console.log("@@@@!!!!",h);var g=b(c.elPlayer);g.addClass("flash_player"),b(g,".video").html(h)}),!0):!1},h=function(b,d){d=d||{},d.elPlayer=b;var e;a.Helper.loadVideoUrlByVid(d,function(a){e=g(d,a)});var f={};f.plid=6807767,f.vid=1759102,f.site=1,f.cid=2,f.page_size=10,f.with_trailer=1,f.vid||(f.page_size=3),a.Helper.loadSearchRecommend(f,c)};a.Html5FlashPlayer=h}(svp,svp.$),function(a,b){"use strict";var c=b.userAgent,d=!1,e=function(a){this.settings=a,VideoTrace.vv()};e.prototype=new a.BasePlayer,e.prototype.htmlTo=function(c){if(b(c).length>0){var d=URL.getQueryData(location.search.substring(1)),e={};e.videoData=this.settings.data,e.channeled=d.channeled,e.parentDom=c,e.settings=this.settings,a.playInClient(e)}};var f=function(c){var d=b.extend(!0,{},a.DEFAULT_CONFIG);this.settings=b.extend(d,c),VideoTrace.vv()};f.prototype=new a.BasePlayer,f.prototype.htmlTo=function(c){var d=this.settings;if(b(c).length>0&&!b.isUndefined(d.data)){var e;b.isUndefined(d.data.vidList)?e=d.data:(e={},e.vid=d.data.vidList[0]),new a.Html5FlashPlayer(c,e)}};var g=function(a){var b=this;this.initPlayerParam(),this.init(a,function(){(/m\.tv\.sohu\.com/i.test(window.location.href)||/10\.2\.9\.71/i.test(window.location.href))&&(console.log("统计: vv"),VideoTrace.vv(),b._sendVVFlag=!0),b._timeoutFlag||b.eventPlayerInit()}),this.updateATagAddr()};g.prototype=new a.BaseHtml5,g.prototype.initPlayerParam=function(){this._ctrlShowFlag=!0,this._ctrlLockFlag=!1,this._dragFlag=!1,this._dragRangeFlag=!1,this._changeModeFlag=!1,this._mediaAdOverFlag=!1,this._firstWaitingFlag=!0,this._sendVVFlag=!1,this._sendRealVVFlag=!1,this._sendStartFlag=!1,this._sendEndFlag=!1,this._initAdvFlag=!1,this._adUpdateFlag=!1,this._makeHistoryFlag=!1,this._playByHistoryFlag=!1,this._hideMainCtrlTime=null,this._touchStratX=0,this._touchMoveX=0,this._moveTime=-1,this._traceHeartInterval=null,this._lastWaitingTime=0,this._lastCurTime=0,this._parentDom=null,this._scrollTop=0,this.cssReset=null,this.midAniCB=function(){}},g.prototype.showMainCtrl=function(){var a=this;if("block"!==this.$mid.css("display")||this.$ctrlBar.hasClass("hide")){this._ctrlLockFlag&&this.stopUIAnimation(),this._ctrlLockFlag=!0;var b=function(){a._ctrlLockFlag=!1,a._ctrlShowFlag=!0};this.midAniCB=b,this.$mid.oriShow().animate({opacity:1},500,"",b),this.$ctrlBar.removeClass("hide"),this.$titleCon.removeClass("hide"),IsWeixin||(this.$midModeList.oriHide(),this.$midModeListCon.oriShow().animate({opacity:1},500))}},g.prototype.hideMainCtrl=function(){var a=this;if("none"!==this.$mid.css("display")||!this.$ctrlBar.hasClass("hide")){this._ctrlLockFlag&&this.stopUIAnimation(),this._ctrlLockFlag=!0;var b=function(){a.$mid.oriHide(),a._ctrlLockFlag=!1,a._ctrlShowFlag=!1};this.midAniCB=b,this.$mid.animate({opacity:0},500,"",b),this.$ctrlBar.addClass("hide"),this.$titleCon.addClass("hide"),IsWeixin||this.$midModeListCon.animate({opacity:0},500,"",function(){a.$midModeListCon.oriHide()})}},g.prototype.stopUIAnimation=function(){if(null===this.cssReset){var a={Webkit:"webkit",Moz:"",O:"o"},c=document.createElement("div"),d="",e={};b.each(a,function(a){return void 0!==c.style[a+"TransitionProperty"]?(d="-"+a.toLowerCase()+"-",!1):void 0}),e[d+"transition-property"]="",e[d+"transition-duration"]="",e[d+"transition-delay"]="",e[d+"transition-timing-function"]="",e[d+"animation-name"]="",e[d+"animation-duration"]="",e[d+"animation-delay"]="",e[d+"animation-timing-function"]="",this.cssReset=e}this.$ctrlBar.css(this.cssReset),this.$titleCon.css(this.cssReset),this.$mid.css(this.cssReset),this.midAniCB()},g.prototype.showPlayBtn=function(){this.$mid.oriShow().css({opacity:1}),this.$midLoading.oriHide(),this.$midPlay.oriShow(),this.$midPause.oriHide(),this.$ctrlPause.oriHide(),this.$ctrlPlay.oriShow()},g.prototype.showPauseBtn=function(){this.$midLoading.oriHide(),this.$midPlay.oriHide(),this.$midPause.oriShow(),this.$ctrlPause.oriShow(),this.$ctrlPlay.oriHide()},g.prototype.showLoading=function(){this.$midPlay.oriHide(),this.$midLoading.oriShow(),this.$midPause.oriHide()},g.prototype.playOrPause=function(a){var d=this;if(this.cache.copyrightRst&&(this._initAdvFlag||(this.adInit(),this._initAdvFlag=!0),this.adv&&this._adUpdateFlag&&(this.adv.updateAdv(this),this._adUpdateFlag=!1),!this._ctrlLockFlag))if(clearTimeout(this._hideMainCtrlTime),"pause"===a)this.pause(),c.isNewWindowsPhone?setTimeout(function(){d.showPlayBtn()},300):this.showPlayBtn(),this.showMainCtrl();else{if(this._sendVVFlag||(console.log("统计: vv"),VideoTrace.vv(),this._sendVVFlag=!0),!this._sendRealVVFlag&&(/QQBrowser\/5\./i.test(c.desc)||c.isUCBrowser)&&c.isIphone&&(console.log("统计: reallvv"),VideoTrace.realVV(this._startPlayTime),this._sendRealVVFlag=!0,this.$video.attr("data-adover","true"),this.cooperatorVideoAttr()),!c.isUCBrowser&&!c.isQQBrowser||d.settings.autoplay||this.$video.oriShow(),(/UCBrowser\/9\./i.test(c.desc)||c.isSonyPhone||c.isVivoPhone)&&c.isAndroid?setTimeout(function(){d.play()},50):c.isWindowsPhone?setTimeout(function(){d.play()},300):this.play(),this._startPlayTime=b.now(),c.isBaiduBrowser)return void this.showPlayBtn();if(c.isIphone&&!IsWeixin||c.isOldWindowsPhone||c.isQQBrowser)return;if(!c.isMIOne||c.isSAMSUNG)return void this.showLoading();this.$ctrlPlay.oriHide(),this.$ctrlPause.oriShow(),this._hideMainCtrlTime=setTimeout(function(){d.hideMainCtrl()},3e3)}},g.prototype.adInit=function(){var d=this.settings;"play_source"!==d.dataType&&a.isAllowPlayAdv(this)&&((c.isIphone||c.isIpad)&&d.mediaAdPlatform.indexOf("ios")>-1?this.adv=new a.IosAdvertise(this,d):c.isAndroid&&d.mediaAdPlatform.indexOf("android")>-1&&(this.adv=new a.AndoridAdvertise(this,d))),b.isUndefined(this.adv)||this.adv.addAdvertise(),b.isUndefined(this.adv)&&this.$video.attr("data-adover","true"),(this.cache.autoplay||c.isIphone&&!IsWeixin||c.isOldWindowsPhone||c.isUCBrowser||c.isQQBrowser||c.isMIOne)&&(this._ctrlShowFlag=!0)},g.prototype.onMainClick=function(){var a=this;(b.isUndefined(this.adv)||this.adv.isMediaPlayed)&&(clearTimeout(this._hideMainCtrlTime),this._ctrlLockFlag||(this._ctrlShowFlag?(this.videoTag.pause&&this.play(),this.hideMainCtrl()):(this.showMainCtrl(),this._hideMainCtrlTime=setTimeout(function(){a.hideMainCtrl()},3e3))))},g.prototype.cooperatorVideoAttr=function(c){var d=this,e=function(){var a=d.cache.oriUrls.m3u8,c="";if(0===a[d.cache.modeType].length){var e=["nor","hig","sup"];b.each(e,function(b,d){return 0!==a[d].length?(c=a[d][0],!1):void 0})}else c=a[d.cache.modeType][0];if(""!==c&&d.$video.attr("data-playUrl",c),!b.isUndefined(d.videoData.urls.downloadUrl)&&!b.isUndefined(d.videoData.urls.downloadUrl[0])){var f=d.videoData.urls.downloadUrl[0];d.$video.attr("data-downloadUrl",f)}};a.isCooperator()&&(b.isNumber(c)&&c>0?setTimeout(function(){e()},3e3):e())},g.prototype.onPlaying=function(){var a=this;return this._sendVVFlag||(console.log("统计: vv"),VideoTrace.vv(),this._sendVVFlag=!0),clearTimeout(this._hideMainCtrlTime),c.isIphone&&!IsWeixin||c.isOldWindowsPhone||c.isBaiduBrowser||c.isUCBrowser||c.isQQBrowser?void this.$midPlay.oriShow():(!/Android\s4\./i.test(c.desc)||c.isQQBrowser||c.isUCBrowser?this.showPauseBtn():this.showLoading(),void(a._dragFlag||(this._hideMainCtrlTime=setTimeout(function(){a.hideMainCtrl()},3e3))))},g.prototype.onPlay=function(){var a=this,c=this.adv;if(!a._sendStartFlag){if(!b.isUndefined(c)&&!c.isMediaPlayed)return;console.log("统计: 测速start"),VideoTrace.start(),a._sendStartFlag=!0}},g.prototype.onLoadStart=function(){c.isIphone&&!IsWeixin||c.isOldWindowsPhone||c.isBaiduBrowser||c.isAndroid&&(c.isQQBrowser||c.isUCBrowser)||c.isMIOne||/Android\/?\s?2\../i.test(c.desc)||"block"!==this.$midPause.css("display")||!this._loadedFlag||this.onWaiting();var a=this.adv;if((b.isUndefined(a)||a.isMediaPlayed)&&this._sendVVFlag){var d=b.now();if(!this._changeModeFlag&&!this._dragRangeFlag&&!this._firstWaitingFlag&&d-this._lastWaitingTime>1e3){var e=(d-this._startPlayTime)/1e3;e>3&&(this._bufferCount++,console.log("统计: buffer",this._bufferCount),VideoTrace.buffer(this._bufferCount,this._startPlayTime))}this._lastWaitingTime=d}},g.prototype.onWaiting=function(){this.showLoading()},g.prototype.onPlayerPause=function(){IsWeixin||(clearTimeout(this._hideMainCtrlTime),this.showPlayBtn())},g.prototype.onAbort=function(){!this._changeModeFlag&&this._mediaAdOverFlag&&(console.log("统计: abort"),VideoTrace.abort())},g.prototype.onPlayerTimeUpdate=function(){var d=this.adv,e=this,f=this.currentTime,g=this.duration;if(0!==f&&(this.$posterCon.hasClass("hidden")||this.$posterCon.addClass("hidden"),this.historyRec(),b.isUndefined(d)||d.isMediaPlayed)){if(f>1&&!this._sendRealVVFlag){if(!b.isUndefined(d)&&!d.isMediaPlayed)return;console.log("统计: reallvv"),VideoTrace.realVV(this._startPlayTime),this._sendRealVVFlag=!0,this.$video.attr("data-adover","true"),this.cooperatorVideoAttr()}/SAMSUNG SM-N90/i.test(c.desc)&&0===f&&this.showMainCtrl(),f>0&&Math.abs(f-this._lastCurTime)>2&&(this._startPlayTime=b.now()),(c.isIphone&&!IsWeixin||c.isOldWindowsPhone)&&this.$midModeList.oriHide(),this._lastCurTime=f,!this._sendEndFlag&&f>g-15&&(console.log("统计: ended"),VideoTrace.ended(f,this._bufferCount),this._sendEndFlag=!0),null===this._traceHeartInterval&&(this._traceHeartInterval=setInterval(function(){console.log("统计: heart"),VideoTrace.heart(f)},12e4)),this._changeModeFlag=!1,this._dragRangeFlag=!1,this._firstWaitingFlag=!1,this._mediaAdOverFlag=!0,c.isIphone&&!IsWeixin||c.isOldWindowsPhone||/Android\/?\s?2\../i.test(c.desc)||IsWeixin&&c.isQQBrowser?(this.$ctrlBar.removeClass("hide"),this.$titleCon.removeClass("hide"),this.showPlayBtn()):c.isIphone&&IsWeixin||c.isIpad||this.showPauseBtn();var h=f/g*100+"%";f>=g&&this.cache.timeLimit===g&&(f=g,h="100%",e.showMsgWidthBtn(a.TYPE_CODE_MSG.SUPPORT[101])),f>g&&(f=g),this.$ctrlCurTime.html(b.formatSeconds(f)),this.$ctrlDuration.html(b.formatSeconds(g)),this._dragFlag||this.$ctrlCurPlayedBar.css({width:h}),c.isUCBrowser&&c.isIphone&&parseInt(f,10)===parseInt(g,10)&&this.onPlayerEnded()}},g.prototype.historyRec=function(){var c=this;if(c.cache.isRemHistory&&b.isFunction(a.setHistory)&&0!==c.currentTime){var d=c.videoData,e=c.cache,f={vid:d.vid,site:d.site},g=a.getHistory(f),h=null;if(c._playByHistoryFlag||e.isMediaAdContent||(g.length>0&&(h=g[0],c.seekTo(h.playTime)),c._playByHistoryFlag=!0),!c._makeHistoryFlag){var i={sid:d.sid,vid:d.vid,site:d.site,cid:d.cid,playTime:c.currentTime,duration:d.totalDuration,title:d.tvname||""};if(e.isMediaAdContent){if(null!==h&&0!==h.flag)return;i.flag="0",i.playTime=1}a.setHistory(i),c._makeHistoryFlag=!0,setTimeout(function(){c._makeHistoryFlag=!1},1e3)}}},g.prototype.onUpdateBuffered=function(){var a=this,c=a.videoTag.buffered,d=a.duration,e=0,f=0,g=function(b,c){a.$ctrlBuffer.css({width:(c-b)/d*100+"%",left:b/d*100+"%"})},h=[];h=b.isUndefined(a.cache.childDurList)?a.getChildDurationList():a.cache.childDurList;try{e=c.start(0),f=c.end(0)}catch(i){}h.length>0&&b.each(h,function(b,c){return b<a.cache.curIndex?(e+=c,void(f+=c)):!1}),g(e,f)},g.prototype.fullOrShrink=function(a){if("fullScreen"===a)if("1"===this.cache.fullscreenType)this.enterSysFullScreen();else{if(c.isIphone&&!IsWeixin||c.isOldWindowsPhone||c.isAndroid&&c.isQQBrowser&&IsWeixin)this.playOrPause("play");else{this._scrollTop=b(window).scrollTop(),b("html").addClass("position_fullscreen");var d=b(window).width(),e=b(window).height();this.$main.width(d+"px").height(e+"px"),this.$ctrlFullScreen.oriHide(),this.$ctrlShrinkScreen.oriShow()}b(".finPic").oriHide()}else b("html").removeClass("position_fullscreen"),this.$main.width("100%").height("100%"),this.$ctrlFullScreen.oriShow(),this.$ctrlShrinkScreen.oriHide(),b(window).scrollTop(this._scrollTop),setTimeout(function(){b(".finPic").oriShow()},500)},g.prototype.showOrHideModeList=function(){var a=this;clearTimeout(this._hideMainCtrlTime),"none"===a.$midModeList.css("display")?this.$midModeList.oriShow():(this.$midModeList.oriHide(),"block"===this.$midPause.css("display")&&(!c.isIphone||c.IsWeixin||c.isUCBrowser||c.isQQBrowser)&&(this._hideMainCtrlTime=setTimeout(function(){a.hideMainCtrl()},3e3)))},g.prototype.onSelectMode=function(a){this._changeModeFlag=!0;var c=a.attr("data-mode"),d=a.html(),e=this.$midCurMode.attr("data-mode"),f=this.$midCurMode.html();this.$midCurMode.attr("data-mode",c).html(d),b(a).attr("data-mode",e).html(f),this.$midModeList.oriHide(),this.playByMode(c),ClickTrace.pingback(null,"video_play_code")},g.prototype.onProgressBarStart=function(a){clearTimeout(this._hideMainCtrlTime),this._dragFlag=!0,this._dragRangeFlag=!0,this._touchStratX=a.touches[0].pageX,this.$ctrlDragTime.addClass("dragging")},g.prototype.onProgressBarMove=function(a){var c=this;clearTimeout(c._hideMainCtrlTime);var d=function(a,d){c._moveTime=a,c.$ctrlDragTime.html(b.formatSeconds(a)),c.$ctrlDragTime.css({left:a/d*100+"%",margin:"0 0 0 -"+c.$ctrlDragTime.width()/2+"px"}),c.$ctrlCurPlayedBar.width(a/d*100+"%")};c._touchMoveX=a.touches[0].pageX;var e=c.$ctrlTrackBar.width(),f=c.duration,g=c.currentTime,h=f/e*(c._touchStratX-c._touchMoveX)*-1,i=g+h;0>i?d(0,f):i>f?d(f,f):d(i,f)},g.prototype.onProgressBarEnd=function(){this._dragFlag=!1,this.$ctrlDragTime.removeClass("dragging"),this.seekTo(this._moveTime),this._startPlayTime=b.now()},g.prototype.onTrackBarClick=function(a,d){clearTimeout(this._hideMainCtrlTimer),c.isFirefoxBrowser&&(d.offsetX=d.clientX-a.offset().left);var e=(d.clientX?d.clientX:d.changedTouches[0].pageX)-a.offset().left,f=a.width(),g=this.getDuration()/f*e;this._startPlayTime=b.now(),this.seekTo(g)},g.prototype.onCtrlClick=function(){clearTimeout(this._hideMainCtrlTimer),c.isIphone||c.isUCBrowser||c.isQQBrowser||(this._hideMainCtrlTimer=setTimeout(this.hideMainCtrl,3e3))},g.prototype.resize=function(){"block"===this.$ctrlShrinkScreen.css("display")&&this.$main.css({width:b(window).width(),height:b(window).height()})},g.prototype.onPlayerEnded=function(){var a=this;clearInterval(this._traceHeartInterval),this._traceHeartInterval=null,this._bufferCount=0,"vid_list"===this.settings.dataType&&this.cache.vidList.length-1>this.settings.vidCurIndex&&(this.settings.vidCurIndex++,this.initParam(this.settings,function(){a.setSrc(a.cache.curPlayUrl),a.$title.html(a.cache.title)}))},g.prototype.unload=function(){!b.isUndefined(Notification)&&b.isFunction(Notification.fire)&&Notification.fire("playerOnUnLoad",[this.videoData,this.currentTime])},g.prototype.onLoaded=function(){return"client"===this.cache.srcType?void this.showMsgWidthBtn(a.TYPE_CODE_MSG.SUPPORT[100]):this.cache.copyrightRst?(c.isBaiduBrowser||c.isAndroid&&c.isQQBrowser&&!IsWeixin||c.isUCBrowser&&c.isIphone||c.isIphone&&/QQBrowser\/5\./i.test(c.desc)?(this.$ctrlTrackBar.oriHide(),this.$ctrlTime.oriHide(),this.$ctrlScreen.oriHide()):c.isAndroid&&c.isUCBrowser?(this.$ctrlTrackBar.oriShow(),this.$ctrlTime.oriShow(),this.$ctrlScreen.oriHide()):c.isAndroid&&c.isQQBrowser&&IsWeixin?(this.$ctrlTrackBar.oriHide(),this.$ctrlTime.oriHide()):this.$ctrlDuration.html(b.formatSeconds(this.getDuration())),IsWeixin&&this.$midModeListCon.oriHide(),this.showPlayBtn(),void this.playerEventService()):void this.showMsgWidthBtn(a.TYPE_CODE_MSG.COPYRIGHT[100])},g.prototype.playerEventService=function(){var d=this;if(this.$mideCurModeBtn.on(END_EVENT,function(){return d.showOrHideModeList(),!1}),this.$midModeListCon.find("li").on(END_EVENT,function(){return d.onSelectMode(b(this)),!1}),this.$midPlay.on(END_EVENT,function(){return d.playOrPause("play"),!1}),this.$ctrlPlay.on(END_EVENT,function(){return d.playOrPause("play"),!1}),this.addEvent("loadstart",this.onLoadStart),!c.isUCBrowser&&!c.isQQBrowser||d.settings.autoplay||/QQBrowser\/4\.2/i.test(c.desc)||this.$video.oriHide(),this.addEvent("timeupdate",this.onPlayerTimeUpdate),!(c.isBaiduBrowser||c.isAndroid&&c.isQQBrowser&&!IsWeixin||(this.$ctrlFullScreen.on(END_EVENT,function(){return d.fullOrShrink("fullScreen"),!1}),a.isFullScreen()&&this.fullOrShrink("fullScreen"),c.isIphone&&!IsWeixin||c.isOldWindowsPhone))){this.$ctrlCon.on(END_EVENT,function(){d.onMainClick()}),this.$midPause.on(END_EVENT,function(){return d.playOrPause("pause"),!1}),this.$ctrlPause.on(END_EVENT,function(){return d.playOrPause("pause"),!1}),this.$ctrlShrinkScreen.on(END_EVENT,function(){return d.fullOrShrink("shrinkScreen"),!1}),this.$ctrlDragAnchor.on("touchstart",function(a){return d.onProgressBarStart(a),!1}),this.$ctrlDragAnchor.on("touchmove",function(a){return d.onProgressBarMove(a),!1}),this.$ctrlDragAnchor.on("touchend",function(){return d.onProgressBarEnd(),!1}),this.$ctrlTrackBar.on(END_EVENT,function(a){return d.onTrackBarClick(b(this),a),!1}),this.$ctrlBar.on(END_EVENT,function(){return d.onCtrlClick(),!1}),this.addEvent("ended",this.onPlayerEnded),IsWeixin&&c.isAndroid&&c.desc.match(/MI/i)&&(this.firstPlayFlag=!0),!/Android\s4\.0.*OPPO/i.test(c.desc)||c.isUCBrowser||c.isQQBrowser||this.$ctrlScreen.oriHide();try{this.$ctrlDuration.html(b.formatSeconds(this.cache.duration||0))}catch(e){}}},g.prototype.eventPlayerInit=function(){var a=this;this.on("loaded",function(){a.onLoaded()}),b(window).on("unload",function(){a.unload()}),this.addEvent("play",this.onPlay),this.addEvent("pause",this.onPlayerPause),this.addEvent("playing",this.onPlaying),this.addEvent("abort",this.onAbort),c.isBaiduBrowser||c.isMIOne||/Android\/?\s?2\../i.test(c.desc)||c.isAndroid&&(c.isQQBrowser||c.isUCBrowser)||(IsWeixin||c.isIphone&&/MQQBrowser\/5\..* Mobile/i.test(c.desc)||(this.addEvent("waiting",this.onWaiting),!c.isIphone))&&(this.addEvent("progress",this.onUpdateBuffered),this.addEvent("canplay",this.showPlayBtn),window.onorientationchange?b(window).on("onorientationchange",function(){a.resize()}):b(window).on("resize",function(){a.resize()}))},g.prototype.curMediaSeekTo=function(a){var b=this;try{this.videoTag.currentTime=a,this.videoTag.paused&&this.videoTag.play()}catch(c){this.$video.one("canplay",function(){b.videoTag.currentTime=a,b.videoTag.paused&&b.videoTag.play()})}},g.prototype.seekTo=function(a){var d=this,e=this.androidAdv;if(!b.isUndefined(e)&&!e.isMediaPlayed&&c.isUCBrowser&&c.isVivoPhone)return void this.curMediaSeekTo(a);var f=[];if(f=b.isUndefined(this.cache.childDurList)?this.getChildDurationList():this.cache.childDurList,/Android\s4\./i.test(c.desc)&&!IsWeixin&&this.onWaiting(),c.isAndroid&&IsWeixin&&this.onPlaying(),1===f.length)this.curMediaSeekTo(a);else{var g=0;b.each(f,function(b,c){if(g+c>a){var e=d.cache;if(b!==e.curIndex){e.curIndex=b;var f=e.srcList[e.modeType][b].url;e.curPlayUrl=f,d.setSrc(f)}return a-=g,setTimeout(function(){d.curMediaSeekTo(a)},300),!1}g+=c})}},g.prototype.getMediaList=function(){var a=this.cache;return a.srcList[a.modeType]||[]},g.prototype.getChildDurationList=function(){var a=[],c=this.getMediaList();return b.each(c,function(b,c){return-1===c.duration||0===c.duration?(a=[],!1):void a.push(c.duration)}),a},g.prototype.getCurrentTime=function(){var a=[],d=this.androidAdv;if(!b.isUndefined(d)&&!d.isMediaPlayed&&c.isUCBrowser&&c.isVivoPhone)return this.videoTag.currentTime;if(a=b.isUndefined(this.cache.childDurList)?this.getChildDurationList():this.cache.childDurList,a.length>1){var e=this.videoTag.currentTime,f=this.cache.curIndex;return b.each(a,function(a,b){return f>a?void(e+=b):!1}),e}return this.videoTag.currentTime},g.prototype.getDuration=function(){var a=[],c=0,d=this.cache;return a=b.isUndefined(d.childDurList)?this.getChildDurationList():d.childDurList,c=a.length>0?d.duration:this.videoTag.duration,d.timeLimit>-1&&c>d.timeLimit?d.timeLimit:c},g.prototype.buffered=function(){},g.prototype.playByMode=function(a){var d=this,e=this.cache;(!b.isUndefined(a)&&e.modeType!==a||IsWeixin)&&b.each(e.modeTypeList,function(b,f){if(f===a){d.pause();var g=d.currentTime,h=e.srcList[a][0].url;return e.curPlayUrl=h,e.curIndex=0,e.modeType=a,d.setSrc(h),setTimeout(function(){d.seekTo(g),d.play(),(c.isUCBrowser||c.isQQBrowser)&&d.$video.oriShow()},50),!1}})},g.prototype.updateDetailInfo=function(c){var d=this;if(!IsWeixin){this.$midModeListCon.html(a.updateModeTypeList(c));var e="#"+this.$main.attr("id");this.$midModeListCon=b(e+" .svp_mid_mode"),this.$mideCurModeBtn=b(e+" .svp_mid_cur_mode_btn"),this.$midCurMode=b(e+" .svp_mid_cur_mode"),this.$midModeList=b(e+" .svp_mid_mod_list"),0===c.modeTypeList.length?this.$midModeListCon.oriHide():(this.$midModeListCon.oriShow(),this.$mideCurModeBtn.on(END_EVENT,function(){return d.showOrHideModeList(),!1}),this.$midModeListCon.find("li").on(END_EVENT,function(){return d.onSelectMode(b(this)),!1}))}this.$title.html(this.cache.title),"horizon"===c.posterType?this.$posterCon.attr("style","background:url("+c.poster+"); background-size: 100% 100%;"):this.$posterRight.attr("style","background:url("+c.poster+"); background-size: 100% 100%;")},g.prototype.updateUI=function(){clearTimeout(this._hideMainCtrlTime),this.updateDetailInfo(this.cache),this.$mid.oriShow().css({opacity:1}),this.$midLoading.oriHide(),this.$midPlay.oriShow(),this.$midPause.oriHide(),this.$ctrlPause.oriHide(),this.$ctrlPlay.oriShow(),this.$ctrlCurTime.html(b.formatSeconds(0)),this.$ctrlDuration.html(b.formatSeconds(this.duration)),this.$ctrlCurPlayedBar.css({width:0}),this.$ctrlDragTime.css({left:"0%"}),this.showMainCtrl(),this.showPlayBtn(),this.$posterCon.removeClass("hidden"),c.isIphone&&this.$ctrlBar.oriShow()
},g.prototype.updateByVodData=function(a,d){var e=this;if(!b.isUndefined(a)&&!b.isUndefined(a.vid)){this._sendRealVVFlag&&!this._sendEndFlag&&(console.log("统计: ended"),VideoTrace.ended(this.currentTime,this._bufferCount),this._sendEndFlag=!0),b.isUndefined(this.videoData)||(this.settings.data=this.videoData,this.settings.dataType="video_data",this.settings.isMediaAdContent=!1,a.channeled&&"default"!==a.channeled&&(this.settings.channeled=a.channeled)),this._sendVVFlag=!1,this._sendRealVVFlag=!1,this._sendStartFlag=!1,this._sendEndFlag=!1,this._playByHistoryFlag=!1;var f=a.vid;this.settings.data.vid=f,b.isUndefined(a.site)||(this.settings.data.site=a.site),this.pause(),this.showLoading(),this.initParam(this.settings,function(){if(e.cache.copyrightRst){e._adUpdateFlag=!0,e.duration=e.cache.duration,e.updateUI();var f=b.isUndefined(a.autoplay)?e.cache.autoplay:a.autoplay;f?(e._sendVVFlag||(console.log("统计: vv"),VideoTrace.vv(),e._sendVVFlag=!0),e.playOrPause("play")):(c.isUCBrowser||c.isQQBrowser&&!/QQBrowser\/4\.2/i.test(c.desc))&&e.$video.oriHide(),b.isFunction(d)&&d()}})}},g.prototype.updateByVideoData=function(a,d){var e=this;a.videoData&&(this._sendRealVVFlag&&!this._sendEndFlag&&(console.log("统计: ended"),VideoTrace.ended(this.currentTime,this._bufferCount),this._sendEndFlag=!0),this._sendVVFlag=!1,this._sendRealVVFlag=!1,this._sendStartFlag=!1,this._sendEndFlag=!1,this._playByHistoryFlag=!1,this.settings.data=a.videoData,this.copyrightCheck(this.settings,function(){e.cache.copyrightRst&&(e._adUpdateFlag=!0,e.updatePlayerByVideoData(a.videoData,function(){e.duration=e.cache.duration,e.updateUI();var f=b.isUndefined(a.autoplay)?e.cache.autoplay:a.autoplay;f?(e._sendVVFlag||(console.log("统计: vv"),VideoTrace.vv(),e._sendVVFlag=!0),e.playOrPause("play")):(e.$posterCon.removeClass("hidden"),(c.isUCBrowser||c.isQQBrowser&&!/QQBrowser\/4\.2/i.test(c.desc))&&e.$video.oriHide()),b.isFunction(d)&&d()}))}))},g.prototype.htmlTo=function(c){var d=this;0!==b(c).length&&(this._parentDom=c,this.$playerLoading?(b(c).html(this.$playerLoading),this.cache.autoplay&&this.playOrPause("play")):(0===b(".svp_player_bg_loading",b(c)).length&&(b(c).html(a.playerLoadingTmpl()),this.$playerLoading=b(".svp_player_bg_loading",b(c))),this.onLoadedData(function(){d.htmlToElem(d.$playerLoading),d.cache.autoplay&&d.playOrPause("play")},this.loadError)))},g.prototype.updateATagAddr=function(){b.isUndefined(window.VideoData)||-1===b(a.PLID_LIST).indexOf(window.VideoData.plid)||d||(setTimeout(function(){b.each(b("a"),function(a,c){c=b(c);var d=c.attr("href");if(d&&-1===d.indexOf("javascript:void(0);")||""===d){var e=d+(d.indexOf("?")>-1?"&":"?")+"startClient=1";c.attr("href",e)}})},2e3),d=!0)},a.Html5Player=g,a.ClientPlayer=e,a.FlashPlayer=f}(svp,svp.$),function(a){"use strict";var b=function(){var a=!1,b=$.userAgent,c=URL.getQueryData(location.search.substring(1));return"1"===c.startClient&&(a=b.isAndroid),a?"client":b.isPCIEBrowser&&b.version<10?"flash":"html5"};a.playerType=b();var c=function(a){this.settings=a};c.prototype.createPlayer=function(){var b=this.settings,c=a.playerType,d=b.mediaType;return"client"===c?new a.ClientPlayer(b):"live"===d?new a.Html5LivePlayer(b):"flash"===c?new a.FlashPlayer(b):new a.Html5Player(b)},a.SohuPlayer=c}(svp),WeixinJS="undefined"==typeof WeixinJS?{}:WeixinJS,WeixinJS.hideOptionMenu=function(){"undefined"!=typeof WeixinJSBridge&&document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.call("hideOptionMenu")})},WeixinJS.hideToolbar=function(){"undefined"!=typeof WeixinJSBridge&&document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.call("hideToolbar")})};var getVideoMetaData=function(){for(var a=document.getElementsByTagName("meta"),b={},c=0;c<a.length;c++){var d=a[c].getAttribute("name"),e=a[c].getAttribute("property"),f=a[c].getAttribute("content")||"";(null==d||void 0==d||0==d.length)&&(d=e),null!=d&&void 0!=d&&0!=d.length&&(b[d]=f)}return b};WeixinJS.getVideoMetaData=window.getVideoMetaData=getVideoMetaData;var videoMetaData=getVideoMetaData();console.log("videoMetaData",videoMetaData),WeixinJS.dataForWeixin={appId:"wxb6c82517aa33d525",MsgImg:videoMetaData["og:image"]||"http://css.tv.itc.cn/global/images/nav1/logo.gif",TLImg:videoMetaData["og:image"]||"http://css.tv.itc.cn/global/images/nav1/logo.gif",url:videoMetaData["og:url"]||encodeURIComponent(window.location.href),imgWidth:videoMetaData["og:imgWidth"]||"120",imgHeight:videoMetaData["og:imgHeight"]||"120",title:videoMetaData["og:title"]||document.getElementsByTagName("title")[0].text.split(" ")[0]||"",desc:videoMetaData.description||document.getElementsByTagName("title")[0].text.split(" ")[0]||"",callback:function(){}},function(){var a=function(){if("undefined"!=typeof WeixinJSBridge){var a=WeixinJS.dataForWeixin;if("undefined"!=typeof a){var b=a.title;b.indexOf("搜狐视频")>-1||(b+="-搜狐视频",a.title=b),WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{appid:a.appId,img_url:a.MsgImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,desc:a.desc,title:a.title},function(b){"send_app_msg:ok"==b.err_msg&&console.log(b.err_msg),a.callback()})}),WeixinJSBridge.on("menu:share:timeline",function(){a.callback(),WeixinJSBridge.invoke("shareTimeline",{img_url:a.TLImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,desc:a.desc,title:a.title},function(a){"share_timeline:ok"==a.err_msg&&console.log(a.err_msg)})}),WeixinJSBridge.on("menu:general:share",function(b){var c="#分享视频#"+a.title;IsIOS&&(c+=a.url),b.generalShare({type:"video",content:c,title:a.title,desc:a.desc,img_url:a.TLImg,img_width:a.imgWidth,img_height:a.imgHeight,link:a.url,data_url:a.url},function(a){WeixinJSBridge.log(a.err_msg)})}),WeixinJSBridge.on("menu:share:weibo",function(){WeixinJSBridge.invoke("shareWeibo",{content:a.title,url:a.url},function(b){"share_weibo:ok"==b.err_msg&&console.log(b.err_msg),a.callback()})})}}};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a))}();