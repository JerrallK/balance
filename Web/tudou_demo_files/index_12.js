/**
 * @modified $Author: cyliu $
 * @version $Rev: 3bc3e9a33b8bd77756d49e28030a69fa87579da6 $
 */
require.config({enable_ozma:true});define("tui/scrollLoader",[],function(){var t=$(window),e=t.height(),i=[],s={node:function(t,e){t=$(t);return this.y(t.offset()?t.offset().top:0,e?t.outerHeight(true):void 0)},y:function(t,e){this._y=t;this._s=e||0;return this},threshold:function(t){this._th=t;return this},size:function(t){this._s=t;return this},delay:function(t){this._d=t;return this},time:function(t){var e=this;e._t=t;setTimeout(function(){e.start()},t);return e},load:function(){this._cb=this._cb.concat(Array.prototype.slice.call(arguments,0));this._no&&i.push(this);this._no=false;this._f&&this.fire();this._f=false;return this},start:function(){this._enable&&this._cb.forEach(function(t){t()});return this.cancel()},cancel:function(){this.disable();for(var t=0,e=i.length;t<e;t++)if(i[t]==this){i.splice(t,1);break}},enable:function(){this._enable=true;return this},disable:function(){this._enable=false;return this},fire:function(i,s){i=i||t.scrollTop();s=s||e;var n=this;if(n._s){clearTimeout(n._timeout);n._timeout=setTimeout(function(){if(n._enable&&n._y<=i+s+n._th&&n._y+n._s>=i-n._th)a()},n._d)}else if(this._enable&&this._y<=i+s+this._th)a();function a(){n._cb.forEach(function(t){t()});n.cancel()}return this}},n=function(){this._y=0;this._th=0;this._d=0;this._s=0;this._cb=[];this._no=true;this._enable=true;this._timeout=null;this._f=true},a={};n.prototype=s;function r(){var s=t.scrollTop();i.concat().forEach(function(t){t.fire(s,e)})}t.bind("resize",function(){e=t.height();r()});t.bind("scroll",r);for(var o in s)!function(t){a[t]=function(){var e=new n;return e[t].apply(e,Array.prototype.slice.call(arguments,0))}}(o);return a});define("page/mobile/ch2/lazyImage",["tui/scrollLoader"],function(t){var e,i,s,n={};var a=$(document.body);var r=(window.devicePixelRatio||1)>=1.5?true:false;function o(a){a=a||{};i=a.size||700;s=a.attr||"data-lazy";e=a.imgs||$(".lazyImg");if(0==e.length)return false;for(var o=0,c=e.length;o<c;o++){var h=e[o];var u=$(h).offset().top||0;l(u,h)}for(var d in n)!function(e){var a=n[e];t.y(e).threshold(i).load(function(){for(var t=0,e=a.length;t<e;t++){var i=$(a[t]);var n=i.attr(s);var o=i.attr("r2");var l=i.attr("data-r2");if(r)if(o)n=n.replace(/(.*)(\.\w+)/,"$1_r2$2");else if(l)n=l;i.css({"background-image":"url("+n+")"});i.removeAttr(s);if(i[0].className.indexOf("lazyImg")!==-1)i.removeClass("lazyImg")}})}(parseInt(d))}function l(t,e){var s=2*a.width();t-=t%i;n[t]=n[t]||[];n[t].push(e)}return o});define("module/stat/stat-info",["tui/cookie","tui/browser","module/global","module/stat/common"],function(t,e,i,s){var n=window;var a=encodeURIComponent;var r=n.config||{};var o=r.item||n.itemData||{};var l=r.pageId||n.pageId||1;var c=e.iOS;var h=e.iOSVersion;var u=e.android;var d=e.wphone;var f={1:96001,2:96002,3:96003,4:96003,5:96003,6:96004,81:96081}[l];var p={1:96311,2:96310,3:96312,4:96312,5:96312,6:96313}[l];var g={1:11e3,2:1e4,3:10200,4:10200,5:10200,6:10300}[l];var v={1:31100,2:31e3,3:31200,4:31200,5:31200,6:31300}[l];if(u){f+=1e3;p+=1e3}var m={device:c||u&&(e.isPad?"androidpad":"androidphone")||d&&"wphone"||"others",version:c&&h.join(".")||u||d||0,iOSVersion:h,isMobile:!!c||!!u||false,isRetina:(n.devicePixelRatio||1)<2?false:true,areacode:t("tudouad_citycode")||0,uid:i.uid||0,lid:r.lid||n.lid||0,aid:n.aid||0,sid:r.lid||n.lid||n.aid||0};if(r.lid&&r.pageId>=3&&r.pageId<=5)m.aid=r.lid;var _={iid:function(){return o.iid||n.iid||0},cid:function(){return o.cid||n.cid||0},oid:function(){return o.oid||n.oid||0},time:function(){return o.time||n.time||""},url:function(){return a(o.url||n.location.href)},refer:function(){return a(o.referrer||s.referrer)},get:function(t){if(void 0!=m[t])return m[t];else if(this[t])return this[t]();else return""},getSourceId:function(){if(m.isMobile)return i.isYoukuSrc?p:f;else return i.isYoukuSrc?v:g},checkYoukuSrc:function(){if(o&&o.vcode)return i.isYoukuSrc=true;else return i.isYoukuSrc=false}};_.checkYoukuSrc();return _});define("module/stat/aop",["tui/net","module/global","module/stat/pv","module/stat/stat-info"],function(t,e,i,s){var n=s.get("isMobile");var a=s.get("version");var r=s.get("device");var o=1e7*({ipad:1,iphone:2,ipod:3,androidphone:4,androidpad:5,wphone:8}[r]||0);if(window.abtest)o+=1e5*window.abtest;function l(i,o,c,h){if(i>=5700&&!n&&!h){l(5897,i,null,true);return}var u=[i,encodeURIComponent(navigator.userAgent)];o&&u.push(o);u.push(c||+new Date);t.getRequest("http://stat.tudou.com/aopstat/aop3",{pvid:e.pvid,ocvid:"",cvid:e.cvid||window.cvid||0,ppid:e.ppid||window.ppid||"",juid:e.juid,iid:s.get("iid"),srcid:s.getSourceId(),log:u.join("|"),fast:"",pcnt:0,pscnt:0,adcnt:0,prcnt:0,player:n?r+"|"+a:((window.playerUrl||"").match(/([^\/]+)\.swf/)||["",""])[1],url:s.get("url"),referUrl:s.get("refer")})}function c(t,e,s){e=e||[];var n=0;if(i.pvCount>1)n=1e4;try{l(o+n+t,e.join("|"),s)}catch(a){}}return{send:n?c:l,srcid:s.getSourceId()}});define("page/mobile/ch2/shortcut",["tui/view","module/stat/aop","tui/browser","tui/art"],function(t,e,i,s){var n=24*60*1e3*60;var a=window.localStorage;if(a){var r="_localStorage_";try{a.setItem(r,r)}catch(o){var l=function(){};a.__proto__={setItem:l,getItem:l,removeItem:l,clear:l}}if(a.getItem(r)===r)a.removeItem(r)}var c=t.extend({el:"",events:{"click .close":"close"},initialize:function(){var t=navigator.userAgent.toLowerCase();if(!i.iOS||!(t.indexOf("safari")!=-1&&!/chrome|crios|ucbrowser|mqqbrowser|lebrowser/.test(t)))return false;if(window.navigator.standalone){e.send(5901);return false}this.isHome=~~/^(?:\/phone)?\/$/i.test(window.location.pathname);var r=JSON.parse(a.getItem("shortcut")||"{}")||{};var o=r[this.isHome]||0;if(o&&o+7*n>+new Date)return false;var l='<div class="add-desktop" id="add-desktop">\n<b class="icon"<%if(pic){%> style="background-image:url(<%=pic%>);"<%}%>></b>\n<p class="desc">先点击<i class="upload"></i><br/>再选择"添加到主屏幕"</p>\n<b class="close"><i class="icon-x iconfont"></i></b>\n</div>\n';var c=s.compile(l)({pic:$('link[rel="apple-touch-icon"]').attr("href")});this.$el=$(c).appendTo("body");this.el=this.$el[0];this.setElement(this.el,this.events)},close:function(){this.$el.remove();var t=JSON.parse(a.getItem("shortcut")||"{}");if(!$.isPlainObject(t))t={};t[this.isHome]=+new Date;a.setItem("shortcut",JSON.stringify(t))}});var h=null;c.create=function(){if(!a)return;if(!h)h=new c;else h.$el.remove();return h};return c});define("page/mobile/ch2/recom",["tui/net","tui/view","tui/cookie","tui/browser","tui/template"],function(t,e,i,s,n){var a='<div class="index-app-recom" style="background:#EBE5D5 url(http://u1.tdimg.com/6/90/199/_15480939984349288135618679248139779376.jpg) center no-repeat;background-size:320px;">\n<div class="app-logo"></div>\n<div class="app-info"><strong>热门韩剧</strong><em>土豆独播</em></div>\n<a href="<%=url%>" class="app-inst" target="_blank" id="appInstall">免费安装</a>\n<div class="close" id="closeAppRecom"></div>\n</div>\n';var r=$("#gBotAppDownload").attr("href");return e.extend({el:"",initialize:function(){$("#gBotAppDownload").attr("href",r)},appRecom:function(){$("#gTop").before('<div id="indexAppRecom"></div>');this.el=$("#indexAppRecom");this.setElement(this.el);$("#navAppDownload").attr("href",r);var t=parseInt(i("g_app_banner_hide")||0);if(1!=t){this.$el.html(n.convertTpl(a,{url:r}));$("#closeAppRecom").click(this.closeAppRecom.bind(this))}},closeAppRecom:function(){this.$el.empty();i("g_app_banner_hide",1,{expires:1,domain:"tudou.com",path:"/"});t.getRequest(closebtnURL)}})});define("module/mobile/subscribe/model",["tui/event","module/domain","module/login/login"],function(t,e,i){var s=e.url.main;var n=window.pageId&&window.pageId<=6?"mobileplay":"mobilebrowser";var a=$.extend(new t,{check:function(t,e){var a=this;t=$.extend({uid:i.uid(),app:n},t);return $.getJSON(s+"/uis/sub/checkSub.action?jsoncallback=?",t,function(t){if(t.code)a.trigger("check:fail",[t]);else{e&&e(t);a.trigger("check:success",[t])}},"jsonp")},sub:function(t,e,a){var r=this;t=$.extend({uid:i.uid(),app:n},t);return $.getJSON(s+"/uis/sub/sub.action?jsoncallback=?",t,function(t){if(t.code){r.trigger("sub:fail",[t]);a&&a(t)}else{e&&e(t);r.trigger("sub:success",[t])}},"jsonp")},unsub:function(t,e){var a=this;t=$.extend({uid:i.uid(),app:n},t);return $.getJSON(s+"/uis/sub/unsub.action?jsoncallback=?",t,function(t){if(t.code)a.trigger("unsub:fail",[t]);else{e&&e(t);a.trigger("unsub:success",[t])}},"jsonp")}});return a});define("page/mobile/ch2/subscribe",["tui/view","tui/art","module/domain","module/login/login","module/mobile/login/login","module/mobile/view/panel","module/mobile/subscribe/model"],function(t,e,i,s,n,a,r){e.helper("$splitNum",function(t){return String(t).replace(/(\d)(?=(\d{3})+($|\.))/g,"$1,")});var o='<%if(isSubed){%>\n<span class="gbtn_sub gbtn_subed">\n<span title="取消订阅"><em class="s2">已订阅</em><em class="s3">取消订阅</em></span>\n<%}else{%>\n<span class="gbtn_sub">\n<span title="点击订阅"><i class="icon-rss"></i><em class="s1">订阅</em></span>\n<%}%>\n<%if(cfg.detail == \'left\'){%>\n<em class="num_l"><%=$splitNum(total)%><i class="ac"><i></i></i></em>\n<%}%>\n</span>';var l=t.extend({events:{"tap .gBtnSub":"action"},initialize:function(t){this.box=$(t.box);this.uid=s.uid();this.ids1=[];this.ids2=[];this.num={};this.elems={};this.check()},check:function(){var t=this;this.box.forEach(function(e,i){var s=$(e);var n=s.attr("data-id");var a=s.attr("data-total")||0;var r=s.attr("data-type")||2;if(n){if(1==r){t.ids1.push(n);t.num[n]=a;t.elems[n]=e}if(2==r){t.ids2.push(n);t.num[n]=a;t.elems[n]=e}s.click(function(e){t.action(e)})}});if(this.ids1.length){var e={subId:t.ids1.join(","),uid:this.uid,type:1};r.check(e,function(e){t.ids1.forEach(function(i,s){t.render({elem:t.elems[i],isSubed:1==t.ids1.length?e.data:e.data[i],total:t.num[i],cfg:t.options})})})}if(this.ids2.length){var i={subId:t.ids2.join(","),uid:this.uid,type:2};r.check(i,function(e){t.ids2.forEach(function(i,s){t.render({elem:t.elems[i],isSubed:1==t.ids2.length?e.data:e.data[i],total:t.num[i],cfg:t.options})})})}},render:function(t){var i=this;var s=e.compile(o)({isSubed:t.isSubed,total:t.total,cfg:i.options});$(t.elem).html(s)},action:function(t){var e=this;var i=$(t.currentTarget);var s=i.find(".gbtn_sub");var a=i.attr("data-id");var o=i.attr("data-type");var l={subId:a,type:o};n.needLogin(function(){if(s.hasClass("gbtn_unsub"))r.unsub(l,function(t){if(0==t.code){e.num[a]--;e.render({elem:i,isSubed:false,total:e.num[a]});e.trigger("unsub:success",[t,a])}else e.trigger("unsub:fail",[t,a])});else if(s.hasClass("gbtn_subed"))s.addClass("gbtn_unsub");else r.sub(l,function(t){if(0==t.code){e.num[a]++;e.render({elem:i,isSubed:true,total:e.num[a]});e.panel();e.trigger("sub:success",[t,a])}else{e.panel(t.code,t.msg||"");e.trigger("sub:success",[t,a])}})})},panel:function(t,i){var s='<div class="g-panel-main">\n<div class="g-panel-close" data-action="remove"><i class="icon-xbtn"></i></div>\n<div class="image"></div>\n<% if (state) { %>\n<h2>订阅成功</h2>\n<p>你可以去<a href="http://www.tudou.com/watch/" target="_blank">我的订阅</a>查看更新</p>\n<% } else if (msg) { %>\n<p><%=msg%></p>\n<% } else { %>\n<p>啊哦，你的订阅数量已经达到了上限～</p>\n<p>你可以先去<a href="http://www.tudou.com/watch/" target="_blank">我的订阅</a>整理下</p>\n<% } %>\n</div>\n';var n=e.compile(s)({state:!t,msg:i});new a({className:"g-subscribe"+(t?" g-subscribe-fail":""),template:n,type:"card",center:true,mask:true}).open()}});return l});define("module/mobile/view/page-content",["tui/view"],function(t){var e=navigator.userAgent.toLowerCase();var i=(e.match(/(ipad|iphone|ipod)/)||[])[0];var s=(e.match(/os\s+([\d_]+)\s+like\s+mac\s+os/)||[0,"0_0_0"])[1].split("_");var n=e.indexOf("msie")>-1;var a=e.indexOf("firefox")>-1;var r=e.indexOf("webkit")>-1;var o;if(r)o="webkit";else if(a)o="moz";else if(n)o="ms";var l=t.extend({initialize:function(t){t=t||{};this.loop=t.loop||false;this.current=t.page||0;this.bounce=void 0!=t.bounce?t.bounce:.7;this.delay=void 0!=t.delay?t.delay:i?0:700;this.autoupdate=void 0!=t.autoupdate?t.autoupdate:true;this._setContext();this.init(t.items)},init:function(t){var e=this;if(t)this.$columns=t&&"string"==$.type(t)?this.$el.find(t):t;else this.$columns=this.$el.find(".x-content-view-column");this.pages=this.$columns.length||0;if(this.pages<2)return;this.listen();for(var i=0;i<this.pages;i++)this.$columns[i].style[o+"Transform"]="translate3d("+100*i+"%,0,0)";if(this.loop){var s=this.$columns.eq(this.pages-1).clone();s[0].style[o+"Transform"]="translate3d(-100%,0,0)";s.prependTo(this.el);var n=this.$columns.eq(0).clone();n[0].style[o+"Transform"]="translate3d("+100*this.pages+"%,0,0)";n.appendTo(this.el)}this.range();this.page(this.current);this._transition(true,true)},update:function(t,e,i){this.stopListen();this.current=i||0;e&&this.$el.html(t);this.setElement(this.$el);this.init(t)},locate:function(){var t=this;var e=$(window);var i=this.$el;if(!t.delay){var s=parseInt(i.width()||0)||e.width();t._scrollMax=s*(t.pages-1);t._scrollTo(s*t._getPage(),true)}else{i.css("visibility","hidden");setTimeout(function(){var s=parseInt(i.width()||0)||e.width();t._scrollMax=s*(t.pages-1);t._scrollTo(s*t._getPage(),true);i.css("visibility","visible")},t.delay)}},listen:function(){this.el.parentNode.addEventListener("touchstart",this.handlers.touchStart,false);this.autoupdate&&this.listenRotate()},stopListen:function(){this.el.parentNode.removeEventListener("touchstart",this.handlers.touchStart,false);this.autoupdate&&this.listenRotate(false)},listenRotate:function(t){if(false===t)window.removeEventListener("orientationchange",this.handlers.locate,false);else window.addEventListener("orientationchange",this.handlers.locate,false)},page:function(t,e){var i=this;if($.isNumeric(t)){this._transition(!!e);if(!this.loop)t=Math.min(Math.max(t,0),this.pages-1);var s=parseInt(this.$el.width()||0);this.last=this._getPage();this.current=t;this._scrollLeft=this.current*s;this._scrollMin=this._scrollMin||0;this._scrollMax=this._scrollMax||s*(this.pages-1);this._scrollTo(this._scrollLeft);if(this.loop){var n=this.current=this._getPage();this._scrollEndTimer=setTimeout(function(){i._scrollTo(s*n,true);i.fire("afterchange",[n])},300)}else this._scrollEndTimer=setTimeout(function(){i.fire("afterchange",[i.current])},300);this.$columns.get(this.last).style.position="absolute";this.$columns.get(this.current).style.position="relative";this.fire&&this.fire("change",[this.current])}return this.current},prev:function(){this.page(this.page()-1)},next:function(){this.page(this.page()+1)},range:function(t,e){var i=parseInt(this.$el.width()||0);this._scrollStartIndex=t||0;this._scrollEndIndex=e||this.pages-1;this._scrollMin=this._scrollStartIndex*i||0;this._scrollMax=this._scrollEndIndex*i||this._scrollMax},destory:function(){this.stopListen();this.listenRotate(false);this.remove()},_getPage:function(t){return((t||this.current)+this.pages)%this.pages},_transition:function(t,e){void 0==t&&(t=true);var i=this.el;var s="all 0.3s cubic-bezier(0.25, 0.1, 0.25, 1)";if(e)setTimeout(function(){i.style[o+"Transition"]=t?s:"all 0s"},10);else i.style[o+"Transition"]=t?s:"all 0s"},_setContext:function(){this.handlers=this.handlers||{};this.handlers.locate=this.locate.bind(this);this.handlers.touchStart=this._touchStart.bind(this);this.handlers.touchMove=this._touchMove.bind(this);this.handlers.touchEnd=this._touchEnd.bind(this)},_checkScroll:function(t){var e=t.touches[0];var i=(e.pageX||0)-(this._touch.x1||0);var s=(e.pageY||0)-(this._touch.y1||0);var n=Math.abs(i);var a=Math.abs(s);if(n>1.3*a)this._locked=true;else this._locked=false},_touchStart:function(t){this._locked=false;this._touchmove=0;var e=t.touches[0];if(e&&e.target&&e.target.tagName&&e.target.tagName.match(/input|textarea|select/i))return;this._transition(false);this._touch=this._touch||{};this._touch.x1=e.pageX||0;this._touch.y1=e.pageY||0;this._touch.tm=+new Date;var n=parseInt(this.$el.width()||0);if(i&&s[0]>=7)if($(window).width()-e.pageX<17||e.pageX<17){this._touchmove=-1;return}this.current=this._getPage();this._scrollPos=n*this.current;this._scrollMax=this._scrollMax||n*(this.pages-1);this._scrollMin=this._scrollMin||0;this._scrollStartIndex=this._scrollStartIndex||0;this._scrollEndIndex=this._scrollEndIndex||this.pages-1;this._scrollLeft=this._scrollPos;var a=this.el.parentNode;a.addEventListener("touchend",this.handlers.touchEnd,false);a.addEventListener("touchmove",this.handlers.touchMove,false);a.addEventListener("touchcancel",this.handlers.touchEnd,false)},_touchMove:function(t){if(window.globalPreventScroll)return;if(0===this._touchmove){this._touch=this._touch||{};this._touchmove++;this._checkScroll(t);if(this._locked){this._touchmove++;if(this._scrollEndTimer){clearTimeout(this._scrollEndTimer);this.$columns.get(this.last).style.position="absolute";this.$columns.get(this.current).style.position="relative"}document.addEventListener("touchmove",this._preventMove);this.fire("beforechange",[this._getPage(),this.pages])}else this._transition(true)}if(this._locked){t.preventDefault();var e=this._touch.x2=t.touches[0].pageX||0;var i=this._scrollLeft=this._scrollPos+this._touch.x1-e;if(i>0)t.stopPropagation();this._scrollTo(i)}},_touchEnd:function(t){if(this._locked){t.stopPropagation();t.preventDefault();this._transition(true);this._scrollEnd()}var e=this.el.parentNode;e.removeEventListener("touchend",this.handlers.touchEnd,false);e.removeEventListener("touchmove",this.handlers.touchMove,false);e.removeEventListener("touchcancel",this.handlers.touchEnd,false);document.removeEventListener("touchmove",this._preventMove);this._locked=false;this._touchmove=0;this._touch=null},_preventMove:function(t){t.preventDefault()},_scrollTo:function(t,e){if(!this.loop)if(this.bounce){if(t<this._scrollMin)t=this._scrollMin-Math.pow(this._scrollMin-t,this.bounce);else if(t>this._scrollMax)t=this._scrollMax+Math.pow(t-this._scrollMax,this.bounce)}else t=Math.max(Math.min(t,this._scrollMax),this._scrollMin);if(t===this._lastPos)return;if(e)this._transition(false);this.el.style[o+"Transform"]="translate3d("+-t+"px,0,0)";this._lastPos=t;if(e)this._transition(true,true)},_scrollEnd:function(){var t=this;var e=parseInt(this.$el.width()||0);var i=this._scrollLeft%e;var s=parseInt(e/2.5);var n=this._touch.x1-this._touch.x2;var a=this.last=this._getPage();var r=this.current;var o=false;if(+new Date-this._touch.tm<400)if(n>=0)this.current++;else this.current--;else{if(i>=s&&n>=0)this.current++;if(i<e-s&&n<0)this.current--}if(!this.loop){if(this.current<this._scrollStartIndex){this.fire("firstitem");o=true}else if(this.current>this._scrollEndIndex){this.fire("lastitem");o=true}this.current=Math.max(Math.min(this.current,this.pages-1),0);if(o)this.current=r}this._scrollLeft=this.current*e;this._scrollTo(this._scrollLeft);this._scrollEndTimer=setTimeout(function(){var e=t._getPage();if(e==a)return;t.fire("afterchange",[e,t.pages]);t.$columns.get(a).style.position="absolute";t.$columns.get(e).style.position="relative"},300);this.fire("change",[this._getPage(),this.pages]);if(a==this.current)this.fire("nochange",[this.current,this.pages])}});return l});define("page/mobile/ch2/slide",["tui/view","module/mobile/view/page-content"],function(t,e){var i=(window.devicePixelRatio||1)>1.5?true:false;return t.extend({initialize:function(t){this.$win=$(window);this.$body=$(document.body);this.opt=t||{};this.$element=$(t.element);if(0==this.$element.length)return false;this.$panel=this.$element.find(t.panel);this.item=t.item;this.$item=this.$panel.find(t.item);this.$tab=this.$element.find(t.tab);this.$node=this.$tab.find(t.node);this.loop=t.loop||false;this.lazyLoad=t.lazyLoad||false;this.slide()},slide:function(){var t=this;var i={el:this.$panel,items:this.$item,loop:this.loop};this.pagecontent=new e(i);this.pages=this.pagecontent.pages;this.pagecontent.bind("change",function(e){if(t.timer)clearInterval(t.timer);t.$node.removeClass("current").eq(e).addClass("current");t.loop&&t.auto()}).bind("beforechange",function(){if(t.timer)clearInterval(t.timer)}).bind("afterchange",function(e){if(e)t.lazyimg(e)});this.$node.bind("click",function(){t.pagecontent.page($(this).index());t.lazyimg(t.pagecontent.current)});this.loop&&this.auto()},auto:function(){var t=this;this.timer=setInterval(function(){t.pagecontent.next()},5e3)},lazyimg:function(t){var e=this.pagecontent;var s=[];var n=e.$columns.eq(t).find(".lazyImg");if(n.length)p(n);var a=e.$columns.eq(t+1).find(".lazyImg");if(a.length)p(a);if(this.loop)if(t==this.pages-1){var r=this.$panel.find(this.item).eq(0).find(".lazyImg");if(r.length)p(r);var o=this.$panel.find(this.item).eq(this.pages+1).find(".lazyImg");if(o.length)p(o)}if(s.length)for(var l=0,c=s.length;l<c;l++){var h=$(s[l]);var u=h.attr("data-lazy");var d=h.attr("r2");var f=h.attr("data-r2");if(i)if(d)u=u.replace(/(.*)(\.\w+)/,"$1_r2$2");else if(f)u=f;h.css({"background-image":"url("+u+")"});h.removeAttr("data-lazy");if(h[0].className.indexOf("lazyImg")!==-1)h.removeClass("lazyImg")}function p(t){$.each(t,function(t,e){s.push(e)})}}})});define("page/mobile/ch2/nav",["tui/view"],function(t){return t.extend({el:$("#gCategory"),events:{"tap .ex a":"nav"},initialize:function(){this.$ul=this.find("ul")},nav:function(t){t.preventDefault();this.$ul.toggleClass("all")}})});define("module/mobile/view/page-progress",["tui/view"],function(t){var e,i;var s=t.extend({className:"g-top-progress",initialize:function(){document.body.appendChild(this.el)},percent:function(t){if(arguments.length)this.el.style.cssText="width:"+t+"%";else this.el.style.cssText=""},show:function(){this.$el.show();return this},hide:function(t){if(t)this.remove();else{this.percent(0);this.$el.hide()}return this}});s.show=function(){if(!i)i=new s;i.show();return i};s.hide=function(t){if(i){i.hide(t);return i}};s.percent=function(t){if(i){i.percent(t);return i}};return s});define("module/mobile/view/pagex",["tui/view","tui/event","tui/browser","module/stat/common","module/mobile/view/mask","module/mobile/view/notice","module/mobile/view/page-progress"],function(t,e,i,s,n,a,r){var o=0;var l=/<!--.*?-->/g;var c=/<!DOCTYPE\b.+?>/;var h=/<html>|<\/html>/g;var u=/<head\b[^<]*(?:(?!<\/head>)<[^<]*)*<\/head>/i;var d=/<body\b[^<]*>?|<\/body>/gi;var f=/<body(.*)>/;var p=/<\/body>/;var g=/<title>(.*)<\/title>/;var v=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;var m=/<script[^>]+src="(.+?)".*><\/script>/i;var _=/<script.*?>((.|\n|\r)+?)<\/script>/;var b=/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi;var w=/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi;var y=/<link\b.*href="(.+?\.css)".*>/gi;var x=/<style.*?>((.|\n|\r)+?)<\/style>/i;var k=/<div class=\"g\-sidebar\" id=\"gSideBar\"><\/div>/i;var I=e.extend({initialize:function(t){I.superClass.initialize.apply(this,arguments);this._configure(t||{});this._clsid=o++;this._pageInfo={};this._pageReady=this._pageReady.bind(this);this._pageLoaded=this._pageLoaded.bind(this);this._stateChange=this._stateChange.bind(this);this.listen();s.updateRefer(window.location.href)},load:function(t){var e=this;e.prevURL=e.url;e.url=t;var i=e._pageInfo[t]=e._pageInfo[t]||{pageloaded:false};i.timestamp=e.timestamp=+new Date;if(i.pageloaded)a(i.html);else var s=$.ajax({url:t,method:"get",success:function(t){a(t)},error:function(){n.hide(true);r.hide();window.location.href=t}});function a(s){if(i.timestamp==e.timestamp){i.html||(i.html=s);if(!I.cssLoaded){e._getStyle(s);e._loadCSS(t)}e._html=e._filterHTML(s);e.title=document.title=(g.exec(s)||["",document.title])[1];e.$guest.html(e._html).show();e._getScript(s);e._addScript(e._scriptInline.join(""));if(!window.itemData){window.location.href=t;return}if(!I.scriptLoaded)e._loadScript(t);r.percent(e._percent=50);e.fire("pageready");e._checkPageLoad(t);e.setPageState()}}},listen:function(){window.addEventListener("popstate",this._stateChange,false);this.bind("pageready",this._pageReady);this.bind("pageloaded",this._pageLoaded);this.$body.delegate("a[tui-page-x]","click",this._handleClick.bind(this))},stopListen:function(){window.removeEventListener("popstate",this._stateChange,false);this.unbind("pageready",this._pageReady);this.unbind("pageloaded",this._pageLoaded);this.$body.undelegate("a[tui-page-x]","click")},setPageState:function(t){var e={pagex:true,host:!!!this.url,title:this.title,url:this.url||this.hostURL};if(this.url&&this.url==this.prevURL)return;if(t)history.replaceState(e,e.title,e.url);else history.pushState(e,e.title,e.url)},_stateChange:function(e){var i=e&&e.state||{};if(!i.pagex||i.icode)return;if(i.host){this.$body.get(0).style.cssText="";this.$host.show().removeClass("x-page-backend");this.$guest.empty();t.destroy("app");this.prevURL=this.url;this.url=this.hostURL;setTimeout(function(){window.scrollTo(0,this.$body.attr("data-scroll-y"))}.bind(this),10)}else if(i.url!=this.hostURL)this.load(i.url)},_configure:function(t){this.id=t.id||"xPage"+this._clsid;this.title=t.title||document.title||"";this.hostURL=window.location.href;this.$body=$(t.body||"[data-role=body]");this.$host=$(t.host||"[data-role=host]");this.$guest=$(t.guest||"[data-role=guest]");this.$video=$(t.video||".x-video");this.$gtop=$("#gTop");this.setPageState(true)},_filterHTML:function(t){t=t.replace(c,"");t=t.replace(h,"");t=t.replace(u,"");t=t.replace(v,"");t=t.replace(l,"");t=t.replace(b,"");t=t.replace(f,"<div$1>");t=t.replace(p,"</div>");t=t.replace(k,"");return t},_getScript:function(t){this._script=this._matchRegExp(t,v);this._scriptFile=this._scriptFile||[];this._scriptInline=this._scriptInline||[];for(var e=0,i=this._script.length;e<i;e++){var s=this._script[e][0];if(s.indexOf("src=")>-1){var n=s.match(m);if(n&&n[1])this._scriptFile.push($.trim(n[1]))}else{var a=s.match(_);if(a&&a[1])this._scriptInline.push(a[1].replace(/^(\s|\n)*/,"").replace(/(\s|\n)*$/,""))}}},_getStyle:function(t){this._style=this._matchRegExp(t,w);this._styleFile=this._matchRegExp(t,y);this._styleInline=this._styleInline||[];for(var e=0,i=this._style.length;e<i;e++){var s=this._style[e][0];var n=s.match(x);if(n&&n[1])this._styleInline.push(n[1].replace(/^(\s|\n)*/,"").replace(/(\s|\n)*$/,""))}},_matchRegExp:function(t,e){var i="";var s=[];while((i=e.exec(t))&&i[0])s.push(i);return s},_addScript:function(t){if(t&&/\S/.test(t))!function(t){window.lid=window.lcode=null;window.aid=window.acode=null;window.itemData=null;window["eval"].call(window,t)}(t)},_loadScript:function(t){var e=this;var i=document.createElement("script");i.src=this._scriptFile[this._scriptFile.length-1];i.addEventListener("load",function(){i.removeEventListener("load",arguments.callee,false);i=i.onerror=null;I.scriptLoaded=true;e.fire("scriptloaded");e._percent+=25;r.percent(e._percent);e._checkPageLoad(t)},false);i.onerror=function(){n.hide(true);r.hide();i=i.onerror=null;window.location.href=t;return};document.body.appendChild(i)},_loadCSS:function(t){var e=this;var i=this._styleFile[this._styleFile.length-1][1]||"";if(!i){n.hide(true);r.hide();window.location.href=t;return}var s=document.createElement("img");var a=document.getElementsByTagName("head")[0];var o=document.createElement("link");o.rel="stylesheet";o.type="text/css";o.href=i;o.onload=o.onreadystatechange=function(){o.onload=o.onreadystatechange=s.onerror=null;o=s=null;I.cssLoaded=true;e._percent+=25;r.percent(e._percent);e.fire("cssloaded");e._checkPageLoad(t)};s.onerror=o.onload;a.appendChild(o);s.src=t},_checkPageLoad:function(t){if(I.cssLoaded&&I.scriptLoaded){this._pageInfo[t].pageloaded=true;this.$host.addClass("x-page-backend");this.$body.attr("data-scroll-y",window.scrollY||0);window.scrollTo(0,1);setTimeout(function(){I.callback&&I.callback();this.fire("pageloaded");n.hide(true);r.hide()}.bind(this),1e3)}},_handleClick:function(e){e.preventDefault();e.stopPropagation();var i=$(e.currentTarget);var s=i.attr("href")||i.find("a").attr("href");var a=this.$video;n.show(-1);r.show().percent(this._percent=0);if(I.callback){a[0].style.display="none";setTimeout(function(){document.body.appendChild(a[0]);t.destroy("app");this.load(s)}.bind(this),100);return}if(s.indexOf("albumplay")==-1&&!I.scriptLoaded&&a&&a[0]){a[0].src="http://vr.tudou.com/v2proxy/v2?it=185700163&st=52";a[0].load();a[0].play();a[0].pause()}this.load(s)},_pageReady:function(){this.$video.appendTo($("#playView .player").empty());if("iphone"!=i.iOS&&this.url.indexOf("albumplay")==-1)$("#playView .play-btn").remove()},_pageLoaded:function(){setTimeout(function(){if(this.url.indexOf("albumplay")>-1){this.$video.show();return}$("#playView .loading").show();this.$video.show().get(0).play()}.bind(this),300)}});I.ready=function(t){I.callback||(I.callback=t)};I.support=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/);window.PageX=I;return I});require(["m","tui/view","module/mobile/view/pagex","page/mobile/ch2/nav","page/mobile/ch2/slide","page/mobile/ch2/subscribe","page/mobile/ch2/recom","page/mobile/ch2/shortcut","page/mobile/ch2/lazyImage"],function(t,e,i,s,n,a,r,o,l){t.init();new s;new n({element:".gallery",tab:".tab",node:".tab-child",panel:".panel",item:".panel-child",lazyLoad:true,loop:true});new a({box:".gBtnSub"});(new r).appRecom();o.create();l({size:200});if(false==window.xPageMode)i.support=false;else new i});;