/**
 * @modified $Author: ydream $
 * @version $Rev: 83d3d8fa189aeb59ef17ac5d97f231f85c3e8f84 $
 */
require.config({enable_ozma:true});define("module/domain",[],function(e,t){var i={main:"www.tudou.com",passport:"passport.tudou.com",ui:"ui.tudou.com",css:"css.tudouui.com",js:"js.tudouui.com",realtimedecode:"v.tudou.com",login:"login.tudou.com",xn:"login.tudou.com",search:"www.soku.com/t",imake:"imake.tudou.com",ent:"ent.tudou.com",music:"music.tudou.com",movie:"movie.tudou.com",fun:"fun.tudou.com",cartoon:"cartoon.tudou.com",game:"game.tudou.com",lady:"lady.tudou.com",shop:"shop.tudou.com",sports:"sports.tudou.com",life:"life.tudou.com",edu:"edu.tudou.com",etc:"etc.tudou.com",fashion:"fashion.tudou.com",fortune:"fortune.tudou.com",tv:"tv.tudou.com",zy:"zy.tudou.com",news:"news.tudou.com",jilupian:"jilupian.tudou.com",health:"health.tudou.com",beauty:"beauty.tudou.com",it:"it.tudou.com",auto:"auto.tudou.com",message:"message.tudou.com",hint:"tip.tudou.soku.com/search_keys",minichannel:"www.tudou.com/my/channel",tui:"www.tudou.com/my/tui",playlist:"www.tudou.com/playlist",comment:"www.tudou.com/comments",adextensioncpt:"v2.tudou.com/tdct/commonadv.html",programstat:"istat.tudou.com",commentcode:"rd.tudou.com",tmversion:"tmversion.tudou.com",adextensionurl:"tdct.tudou.com/adcontrol/specialadv.html",dig:"dig.tudou.com",live:"istat.tudou.com",douwan:"douwan.tudou.com",mini:"mini.tudou.com",feedback:"feedback.tudou.com",tjpt:"tdrec.youku.com",cms:"cms.tudou.com",wa:"wa.tudou.com",cps:"cps.tudou.com",pay:"pay.tudou.com",vip:"vip.tudou.com",yun:"yun.tudou.com",hinty:"tip.soku.com/search_yun",hd:"hd.tudou.com",crp:"crp.tudou.com",danmu:"danmu.tudou.com",danmus:"service.danmu.tudou.com",korea:"korea.tudou.com",img:"u"+~~(4*Math.random()+1)+".tdimg.com"};var n={};function o(e){$.each(e,function(e,t){n[e]=n[e]||"http://"+t})}o(i);t.join=o;t.url=t.domain=n});define("tui/class",[],function(){function e(){return function(){if(this.initialize)this.initialize.apply(this,arguments)}}function t(t,i){var n=this;var o=e();$.extend(o,n,i);var r=Object.create(n.prototype);r.constructor=o;o.prototype=r;$.extend(o.prototype,t);o.superClass=n.prototype;return o}var i=function(i){var n=e();$.extend(n.prototype,i);n.extend=t;return n};i.extend=t;return i});define("tui/event",["tui/class"],function(e){var t=e({initialize:function(){this.__event=window.Zepto?new window.Zepto.Events:$({})}});var i=t.prototype;["bind","one"].forEach(function(e){i[e]=function(t,i,n){if($.isPlainObject(t))for(var o in t)this[e](o,t[o]);else{var r=this.__event;var a=function(){return i.apply(n||r,arguments.length>0?window.Zepto?arguments:Array.prototype.slice.call(arguments,1):[])};r[e].call(r,t,a);i.guid=a.guid}return this}});["unbind","trigger","triggerHandler"].forEach(function(e){i[e]=function(){var t=this.__event;if(require.debug)console.log("[event] "+this.constructor.__mid+" : "+arguments[0],arguments[1]);var i=t[e].apply(t,arguments);if(require.debug&&i!=t&&void 0!=i)console.log(i);return i}});i.fire=i.trigger;i.firing=i.triggerHandler;t.mix=function(e){return $.extend(e,new t)};return t});define("tui/drag",["tui/event"],function(e){var t=$(window);function i(){if(window.getSelection)window.getSelection().removeAllRanges();else if(document.selection)document.selection.empty();return this}function n(e){e.preventDefault()}var o=e.extend({initialize:function(e,r){var a=this;r=r||{};var s=r.handler||e;o.superClass.initialize.call(a);a.limit=r.limit;a.bubble=r.bubble;a.isCustom=r.isCustom;a.enable2=true;a.state2=false;a.hasMove2=false;a.fx=a.fy=-1;a.x2=a.y2=a.mx2=a.my2=a.px2=a.py2=a.cx2=a.cy2=0;a.node2="string"==$.type(e)?$(e):e;a.container2=r.container||a.node2.parent();a.fixed2="fixed"==a.node2.css("position").toLowerCase();a.handler2="string"==$.type(s)?$(s):s;var l=a.handler2||a.node2;function c(e){e.preventDefault();if(!a.bubble||e.target==l[0]){a.start(e);if(l[0].setCapture)l[0].setCapture()}}l.bind("mousedown",c);function u(e){if(a.state2){a.state2=false;var i=e.pageX-a.mx2+a.x2-a.px2,o=e.pageY-a.my2+a.y2-a.py2;if(a.fixed2){i-=t.scrollLeft();o-=t.scrollTop()}if(a.limit){i=Math.max(i,a.cx2-a.px2);o=Math.max(o,a.cy2-a.py2);i=Math.min(i,a.cWidth-(a.px2-a.cx2)-a.dWidth);o=Math.min(o,a.cHeight-(a.py2-a.cy2)-a.dHeight)}a.x2=a.node2.offset().left;a.y2=a.node2.offset().top;a.trigger("drag:end",[i,o,e.pageX,e.pageY,a.node2,a.container2])}$(document).unbind("selectstart",n);if(l[0].releaseCapture)l[0].releaseCapture()}$(document).bind("mouseup",u);function d(e){if(a.state2&&a.enable2){if(!a.hasMove()&&e.pageX==a.fx&&e.pageY==a.fy);else a.hasMove2=true;var n=e.pageX-a.mx2+a.x2-a.px2,o=e.pageY-a.my2+a.y2-a.py2;if(a.fixed2){n-=t.scrollLeft();o-=t.scrollTop()}if(a.limit){n=Math.max(n,a.cx2-a.px2);o=Math.max(o,a.cy2-a.py2);n=Math.min(n,a.cWidth-(a.px2-a.cx2)-a.dWidth);o=Math.min(o,a.cHeight-(a.py2-a.cy2)-a.dHeight)}if(!a.isCustom)a.node2.css({left:n,top:o});i();a.trigger("drag:move",[n,o,e.pageX,e.pageY,a.node2,a.container2])}}$(document).bind("mousemove",d);a.cancel=function(){l.unbind("mousedown",c);$(document).unbind("mouseup",u);$(document).unbind("mousemove",d)}},start:function(e){var t=this;$(document).bind("selectstart",n);t.offsetParent2=t.node2.offsetParent();if(t.limit){t.cWidth=t.container2.outerWidth();t.cHeight=t.container2.outerHeight();t.pWidth=t.offsetParent2.outerWidth();t.pHeight=t.offsetParent2.outerHeight();t.dWidth=t.node2.outerWidth();t.dHeight=t.node2.outerHeight()}t.fx=e.pageX;t.fy=e.pageY;t.cx2=t.container2.offset().left;t.cy2=t.container2.offset().top;t.px2=t.offsetParent2.offset().left;t.py2=t.offsetParent2.offset().top;t.x2=t.node2.offset().left;t.y2=t.node2.offset().top;t.mx2=e.pageX;t.my2=e.pageY;t.state2=true;t.trigger("drag:start",[t.x2,t.y2,e.pageX,e.pageY,t.node2,t.container2]);return this},enable:function(){this.enable2=true;return this},disable:function(){this.enable2=false;return this},state:function(){return this.state2},hasMove:function(){return this.hasMove2}});return o});define("tui/template",[],function(e,t){t.ns=function(e,t,i){var n,o=i||window,r=e.split(".").reverse();while((n=r.pop())&&r.length>0){if("undefined"===typeof o[n])o[n]={};else if("object"!==typeof o[n])return false;o=o[n]}if("undefined"!==typeof t)o[n]=t;return o[n]};t.format=function(e,t){return e.replace(/<%\=(\w+)%>/g,function(e,i){return null!=t[i]?t[i]:""})};t.escapeHTML=function(e){e=e||"";var t={"<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","{":"&#123;","}":"&#125;","@":"&#64;"};return e.replace(/[<>'"\{\}@]/g,function(e){return t[e]})};t.substr=function(e,t,i){if(!e||"string"!==typeof e)return"";var n=e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/([^\x00-\xff])\s/g,"$1");return i?i.call(n,n):e.length>n.length?n+"...":n};t.strsize=function(e){return e.replace(/([^\x00-\xff]|[A-Z])/g,"$1 ").length};var i=this.document;t.tplSettings={_cache:{},evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};t.tplHelpers={mix:$.extend,escapeHTML:t.escapeHTML,substr:t.substr,include:n,_has:function(e){return function(i){return t.ns(i,void 0,e)}}};function n(e,o,r){var a,s=t.tplSettings,l=r?"#"+r:"";if(!/[\t\r\n% ]/.test(e)){a=s._cache[e+l];if(!a){var c=i.getElementById(e);if(c)a=s._cache[e+l]=n(c.innerHTML,false,r)}}else{var u="var __p=[];"+(r?"":"with(obj){")+"var mix=api.mix,escapeHTML=api.escapeHTML,substr=api.substr,include=api.include,has=api._has("+(r||"obj")+");"+"__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(s.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(s.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');"+(r?"":"}")+"return __p.join('');";try{a=new Function(r||"obj","api",u)}catch(d){console.log("Could not create a template function: \n"+u)}}return!a?"":o?a(o,t.tplHelpers):a}t.convertTpl=n;t.reloadTpl=function(e){delete t.tplSettings._cache[e]}});define("tui/widget",["tui/event","tui/template"],function(e,t){function i(e,t){var i;var n;var o=e.split(" ");if(1==o.length){i=t;n=e}else{i=o.shift();n=o.join(" ")}return[i,n]}var n=e.extend({element:null,template:"<div></div>",eventType:"click",model:{},events:{},targetNode:$(document.body),renderMethod:"append",initialize:function(e){var t=this;e=e||{};n.superClass.initialize.call(t);t.model=$.extend(true,{},t.model);t.events=$.extend(true,{},t.events);$.each(["element","targetNode"],function(){"undefined"!==typeof e[this]&&(t[this]=$(e[this]))});$.each(["template","eventType","renderMethod"],function(){"undefined"!==typeof e[this]&&(t[this]=e[this])});$.each(["model","events"],function(){"undefined"!==typeof e[this]&&$.extend(t[this],e[this])})},find:function(e){return this.element.find(e)},delegate:function(e,t){var n=this;if("string"==$.type(e)&&$.isFunction(t)){var o={};o[e]=t;e=o}$.each(e,function(e,t){var o=function(e){if($.isFunction(t))return t.call(n,e);else return n[t](e)};var r=i(e,n.eventType);n.element.on(r[0],r[1],o)});return n},undelegate:function(e){var t=this;var n=i(e,t.eventType);t.element.off(n[0],n[1]);return t},render:function(e){var i=this;if(!i.element||!i.element[0])i.element=$(t.convertTpl(i.template,$.extend({getUrl:this.getUrl||o},e||i.model)));i.delegate(i.events);if(i.renderMethod)i.targetNode[i.renderMethod](i.element);return i},update:function(e){if(this.renderMethod)this.targetNode[this.renderMethod](t.convertTpl(this.template,$.extend({getUrl:this.getUrl||o},e)))}});function o(e){return e}return n});define("tui/mask",[],function(){var e=$('<div class="tui_mask">');var t;var i=$(window);var n=$(document);var o=$(document.body);var r=$.browser.msie&&$.browser.version<7;var a=4096;function s(){var t=Math.max(i.width(),n.width());var o=Math.max(i.height(),n.height());var s="absolute";var l=0;if($.browser.msie&&o>a){if(!r)s="fixed";else{l=i.scrollTop();if(l+a>o)l=o-a}o=a}e.css({position:s,top:l,width:t,height:o})}return{node:function(){return e},resize:function(){s()},show:function(n){i.bind("resize",s);if(r)i.bind("scroll",s);e.css("z-index",n||9e4);this.resize();if(!t){o.append(e);t=true}else e.show();return this},hide:function(n){i.unbind("resize",s);if(r)i.unbind("scroll",s);if(n){e.remove();t=false}else e.hide();return this},update:function(){s()},state:function(){return e.is(":visible")}}});define("tui/art",[],function(){var e=window;var t=function(e,i){return t["string"===typeof i?"compile":"render"].apply(t,arguments)};t.version="2.0.2";t.openTag="<%";t.closeTag="%>";t.isEscape=true;t.isCompress=false;t.parser=null;t.render=function(e,i){var n=t.get(e)||o({id:e,name:"Render Error",message:"No Template"});return n(i)};t.compile=function(e,n){var a=arguments;var s=a[2];var l="anonymous";if("string"!==typeof n){s=a[1];n=a[0];e=l}try{var c=r(e,n,s)}catch(u){u.id=e||n;u.name="Syntax Error";return o(u)}function d(i){try{return new c(i,e)+""}catch(r){if(!s)return t.compile(e,n,true)(i);return o(r)()}}d.prototype=c.prototype;d.toString=function(){return c.toString()};if(e!==l)i[e]=d;return d};var i=t.cache={};var n=t.helpers=function(){var e=function(t,i){if("string"!==typeof t){i=typeof t;if("number"===i)t+="";else if("function"===i)t=e(t.call(t));else t=""}return t};var i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};var n=function(t){return e(t).replace(/&(?![\w#]+;|#\d+)|[<>"']/g,function(e){return i[e]})};var o=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)};var r=function(e,t){if(o(e))for(var i=0,n=e.length;i<n;i++)t.call(e,e[i],i,e);else for(i in e)t.call(e,e[i],i)};return{$include:t.render,$string:e,$escape:n,$each:r}}();t.helper=function(e,t){n[e]=t};t.onerror=function(t){var i="Template Error\n\n";for(var n in t)i+="<"+n+">\n"+t[n]+"\n\n";if(e.console)console.error(i)};t.get=function(n){var o;if(i.hasOwnProperty(n))o=i[n];else if("document"in e){var r=document.getElementById(n);if(r){var a=r.value||r.innerHTML;o=t.compile(n,a.replace(/^\s*|\s*$/g,""))}}return o};var o=function(e){t.onerror(e);return function(){return"{Template Error}"}};var r=function(){var e=n.$each;var i="break,case,catch,continue,debugger,default,delete,do,else,false"+",finally,for,function,if,in,instanceof,new,null,return,switch,this"+",throw,true,try,typeof,var,void,while,with"+",abstract,boolean,byte,char,class,const,double,enum,export,extends"+",final,float,goto,implements,import,int,interface,long,native"+",package,private,protected,public,short,static,super,synchronized"+",throws,transient,volatile"+",arguments,let,yield"+",undefined";var o=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g;var r=/[^\w$]+/g;var a=new RegExp(["\\b"+i.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var s=/^\d[^,]*|,\d[^,]*/g;var l=/^,+|,+$/g;var c=function(e){return e.replace(o,"").replace(r,",").replace(a,"").replace(s,"").replace(l,"").split(/^$|,+/)};return function(i,o,r){var a=t.openTag;var s=t.closeTag;var l=t.parser;var u=o;var d="";var h=1;var f={$data:1,$id:1,$helpers:1,$out:1,$line:1};var p={};var m="var $helpers=this,"+(r?"$line=0,":"");var g="".trim;var v=g?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"];var _=g?"if(content!==undefined){$out+=content;return content;}":"$out.push(content);";var b="function(content){"+_+"}";var w="function(id,data){"+"data=data||$data;"+"var content=$helpers.$include(id,data,$id);"+_+"}";e(u.split(a),function(e,t){e=e.split(s);var i=e[0];var n=e[1];if(1===e.length)d+=k(i);else{d+=S(i);if(n)d+=k(n)}});u=d;if(r)u="try{"+u+"}catch(e){"+"throw {"+"id:$id,"+"name:'Render Error',"+"message:e.message,"+"line:$line,"+"source:"+M(o)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')"+"};"+"}";u=m+v[0]+u+"return new String("+v[3]+");";try{var y=new Function("$data","$id",u);y.prototype=p;return y}catch($){$.temp="function anonymous($data,$id) {"+u+"}";throw $}function k(e){h+=e.split(/\n/).length-1;if(t.isCompress)e=e.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"");if(e)e=v[1]+M(e)+v[2]+"\n";return e}function S(e){var i=h;if(l)e=l(e);else if(r)e=e.replace(/\n/g,function(){h++;return"$line="+h+";"});if(0===e.indexOf("=")){var o=0!==e.indexOf("==");e=e.replace(/^=*|[\s;]*$/g,"");if(o&&t.isEscape){var a=e.replace(/\s*\([^\)]+\)/,"");if(!n.hasOwnProperty(a)&&!/^(include|print)$/.test(a))e="$escape("+e+")"}else e="$string("+e+")";e=v[1]+e+v[2]}if(r)e="$line="+i+";"+e;x(e);return e+"\n"}function x(t){t=c(t);e(t,function(e){if(!f.hasOwnProperty(e)){T(e);f[e]=true}})}function T(e){var t;if("print"===e)t=b;else if("include"===e){p["$include"]=n["$include"];t=w}else{t="$data."+e;if(n.hasOwnProperty(e)){p[e]=n[e];if(0===e.indexOf("$"))t="$helpers."+e;else t=t+"===undefined?$helpers."+e+":"+t}}m+=e+"="+t+","}function M(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}}}();return t});define("tui/browser",[],function(){var e=navigator.userAgent.toLowerCase();var t={ie6:$.browser.msie&&6==$.browser.version,html5:function(){var e=document.createElement("input");var t=document.createElement("video");return{h264:!!(t.canPlayType&&t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,"")),history:!!(window.history&&window.history.pushState&&window.history.popState),placeholder:"placeholder"in e}},lang:(navigator.language||navigator.systemLanguage).toLowerCase(),iOS:(e.match(/(ipad|iphone|ipod)/)||[])[0],iOSVersion:(e.match(/os\s+([\d_]+)\s+like\s+mac\s+os/)||[0,"0_0_0"])[1].split("_"),wphone:parseFloat((e.match(/windows\sphone\s(?:os\s)?([\d.]+)/)||["","0"])[1]),android:parseFloat((e.match(/android[\s|\/]([\d.]+)/)||["","0"])[1])};t.isMobile=!!t.iOS||!!t.wphone||!!t.android||void 0!==window.orientation||false;t.isPad=t.isMobile&&("ipad"==t.iOS||e.indexOf("mobile")==-1||e.indexOf("windows nt")!=-1&&e.indexOf("touch")!=-1)||false;return t});define("tui/dialog",["tui/browser","tui/art","tui/mask","tui/widget","tui/drag"],function(e,t,i,n,o){var r=$(window);var a=$.browser.msie&&$.browser.version<=7||!$.support.boxModel;var s=10002;var l='<div class="tui_dialog_button"><% for (var i = 0; i < buttons.length; i++) { %>'+'<a data-role="button_<%=i%>" href="#" <%if(buttons[i].className){%>class="<%=buttons[i].className%>"<%}%>><%=buttons[i].name%></a>'+"<% } %></div>";var c='<div class="tui_dialog <%=className%>"><div<% if (hasWrap) { %> class="tui_dialog_wrap"<% } %>><div class="tui_dialog_holder" data-role="holder">'+'<div class="tui_dialog_resize"></div>'+'<div class="tui_dialog_w_tp"></div><div class="tui_dialog_w_bm"></div>'+'<div class="tui_dialog_w_lf"></div><div class="tui_dialog_w_rt"></div>'+'<div class="tui_dialog_w_tl"></div><div class="tui_dialog_w_tr"></div>'+'<div class="tui_dialog_w_bl"></div><div class="tui_dialog_w_br"></div>'+'<div class="tui_dialog_header" data-role="header"><span class="tui_dialog_close" data-role="close" title="关闭">关闭</span>'+'<div class="tui_dialog_title" data-role="title"><%=title%></div><div class="tui_dialog_bar"><%=bar%></div></div>'+'<div class="tui_dialog_content" data-role="content"></div>'+'<% if (buttons.length > 0) { %><div class="tui_dialog_footer" data-role="footer">'+l+"</div><% } %>"+'<% if (info) { %><div class="tui_dialog_info"><%=info%></div><% } %>'+"</div></div></div>";var u=n.extend({events:{"click [data-role=close]":function(e){e.preventDefault();this.close()}},initialize:function(e){var i=this;var n={template:c,buttons:[],zIndex:s,hasDrag:true,hasMask:true,isFixed:true};e=$.extend(n,e||{});s=e.zIndex;var o=$.browser.msie&&parseFloat($.browser.version)<9;if("undefined"!=typeof e.hasWrap)o=e.hasWrap;var r={hasWrap:o,className:e.className||"tudou_dialog",title:e.title||"",bar:e.bar||"",info:e.info||"",buttons:e.buttons};e.element=$(t.compile(e.template)(r));u.superClass.initialize.call(this,e);i.dom={holder:i.element.find("[data-role=holder]"),header:i.element.find("[data-role=header]"),title:i.element.find("[data-role=title]"),content:i.element.find("[data-role=content]"),footer:i.element.find("[data-role=footer]"),close:i.element.find("[data-role=close]")};i.config=e;i.open();var a=function(e){if(27==e.keyCode){i.close();$(document).unbind("keydown",a)}};$(document).keydown(a)},title:function(e){this.dom.title.html(e);return this},content:function(e){this.dom.content.html(e);return this},open:function(){var e=this;var t=e.config;var n=e.element;var l=e.dom;n.css("z-index",s);s+=2;if(t.hasMask)i.show(n.css("z-index")-1);n.css("position",a||!t.isFixed?"absolute":"fixed");e.iframeMask=$("<iframe>",{src:"about:blank",frameborder:0,css:{border:"none","z-index":-1,position:"absolute",top:0,left:0,width:"100%",height:"100%"}}).prependTo(l.holder);e.content(t.content||"");$.each(t.buttons,function(t){e.events["[data-role=button_"+t+"]"]=this.callback});if(!e.element.parent()[0])e.render();e.element.show();e.locate();e.resizeLocate=function(t){e.locate()};r.bind("resize",e.resizeLocate);if(a&&t.isFixed){e.iefixScroll=function(t){e.locate()};r.bind("scroll",e.iefixScroll);e.iframeMask.css({height:l.holder.height()})}if(e.config.hasDrag)new o(n,{handler:l.header,limit:true});return e},close:function(e){var t=this;if(t.config.hasMask)i.hide(true);t.trigger("close",[t]);if(!e)t.element.find("iframe").remove();t.element[e?"hide":"remove"]();r.unbind("resize",t.resizeLocate);if(t.iefixScroll){r.unbind("scroll",t.iefixScroll);t.iefixScroll=null}return t},locate:function(){var e=this;var t=Math.max(0,r.width()-e.element.width()>>1);if(!e.config.isFixed)var i=r.scrollTop()+(r.height()-e.element.height())/2;else var i=Math.max(0,r.height()-e.element.height()>>1)+(a?r.scrollTop():0);e.element.css({left:t,top:i});return e}});u.confirm=function(e,t){return new u({className:"tudou_dialog alert",title:"土豆提示",content:'<div class="tui_dialog_logo"></div><div class="tui_dialog_text">'+e+"</div>",hasMask:true,buttons:[{name:"确定",callback:function(e){e.preventDefault();t&&t.call(this);this.close()}},{name:"取消",callback:function(e){e.preventDefault();this.close()}}]})};u.alert=function(e,t){return new u({className:"tudou_dialog alert",title:"土豆提示",content:'<div class="tui_dialog_logo"></div><div class="tui_dialog_text">'+e+"</div>",hasMask:true,buttons:[{name:"确定",callback:function(e){e.preventDefault();t&&t.call(this);this.close()}}]})};return u});define("tui/net",[],function(e,t){t.getScript=function(e,t){var i=document.createElement("script");i.type="text/javascript";i.async=true;if(!t)t={};else if($.isFunction(t))t={callback:t};if(t.charset)i.charset=t.charset;i.src=e;var n=document.getElementsByTagName("head")[0];var o=false;i.onload=i.onreadystatechange=function(){if(!o&&(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)){o=true;i.onload=i.onreadystatechange=null;n.removeChild(i);if(t.callback)t.callback()}};n.appendChild(i)};var i=0;t.getJSON=function(e,n,o,r){var a=e.match(/https?\:\/\/(.+?)\//);if(o)if((!r||!r.isScript)&&(!a||a[1]===window.location.host)){$.ajax({url:e,data:n,success:o,dataType:"json"});return true}r=$.extend({charset:"gbk",callback:"tuijsonp"+ ++i},r||{});if(r.random)n[r.random]=+new Date;var s=r.callbackName||"jsoncallback";n[s]=r.callback;e=[e,/\?/.test(e)?"&":"?",$.param(n)].join("");if(o)window[r.callback]=o;delete r.callback;t.getScript(e,r)};t.getRequest=function(e,t){var i=new Image;i.onload=function(){};i.src=!t?e:[e,e.match(/\?/)?"&":"?","string"==typeof t?t:$.param(t)].join("")}});define("tui/cookie",[],function(){return function(e,t,i,n){if("string"==typeof e){n=i;i=t;t=e;e=window}if(void 0!==i){n=n||{};var o,r="";if(n.expires){if(n.expires.constructor==Date)o=n.expires;else{o=new Date;o.setTime(o.getTime()+1e3*60*60*24*n.expires)}r="; expires="+o.toGMTString()}var a=n.path?"; path="+n.path:"";var s=n.domain?"; domain="+n.domain:"";var l=n.secure?"; secure":"";e.document.cookie=[t,"=",encodeURIComponent(i),r,a,s,l].join("")}else{i=e.document.cookie.match(new RegExp("(?:\\s|^)"+t+"\\=([^;]*)"));return i?decodeURIComponent(i[1]):null}}});define("module/login/login",["tui/cookie","tui/event","tui/net","tui/dialog","module/domain"],function(e,t,i,n,o,r,a){var s=new t;var l=o.url;window.hasAutoLogin=window.hasAutoLogin;window.loginCallback=window.loginCallback||[];window.loginData=window.loginData;s.juid="";s.DWriteCookie=function(e,t){var i;if("string"==$.type(e))i=e;else{i=e.yktk;i=i+"|"+(e.isRemember?1:0)}if(i&&""!=i){var n="http://passport.tudou.com/user/crossdomain?yktk="+encodeURIComponent(i);var o=l.login+"/login.do?act=loginOver";if(t){var r="login"+(""+Math.random()).replace(/\D/g,"")+(new Date).getTime();window[r]=function(){t&&t();a.remove();window[r]=null};o+="&callback="+r}n+="&return_url="+encodeURIComponent(o);var a=$('<iframe src="'+n+'" style="position:absolute;left:-9999px;bottom:0;width:0;height:0;visibility:hidden;">');$(document.body).append(a)}};s.autoLogin=function(e,t){var i=this;e=e||{};t=t||function(){};var n=l.login;var o="www";var r=location.hostname.split(".");if(["wwwtest","logintest"].indexOf(r[0])>-1)o="wwwtest";n={www:"http://login.tudou.com",wwwtest:"http://logintest.tudou.com"}[o];$.ajax({url:n+"/login.do?act=ytAutoLogin&useYktk=true",type:"GET",jsonp:"jsoncallback",dataType:"jsonp",success:function(n){var o=1==n.status?true:false;t(o,n);if(o&&n.data)s.DWriteCookie({isRemember:e.isRemember,yktk:n.data.yktk},function(){if(o){i.trigger("after:login");i.trigger("after:autoLogin")}})},error:function(){t(false)}})};s.isLogin=function(t){var i=this;t=t||function(){};if(e("u_user")&&e("u_id")){if(e("u_login"))t(true);else if(e("u_passport_info"))window.loginCallback&&loginCallback.push(t);else return false;return true}return false};s.isLogin2=function(t){var i=this;var n=0;var o=0;var r=e("yktk");t=t||function(){};if(e("u_user")&&e("u_id")){if(e("u_login")){t(true);return}else if(e("u_passport_info"))n=1;else if(r)n=2}else if(r)n=2;if(r)o="|1"==r.slice(-2,r.length)?1:0;if(n){window.loginCallback&&loginCallback.push(t);if(!hasAutoLogin){hasAutoLogin=true;i.autoLogin({isRemember:o},function(e,t){t=t||{};loginData=e?t:e;if(window.loginCallback&&loginCallback.length){loginCallback.forEach(function(t){t(e,loginData)});window.loginCallback=[]}})}else if(void 0!==loginData)"boolean"==$.type(loginData)?t(loginData):t(1==loginData.status?true:false,loginData)}else t(false)};s.uid=function(){return this.isLogin()?e("u_id")||0:0};s.ucode=function(){return this.isLogin()?e("u_code")||"":""};s.userInfo=function(){var t=this.uid();var i={};i._vip=e("u_member")||0;i._usr=e("u_user");i._nic=e("u_nick")||i._usr;i._ico=e("u_pic")||"";i.isGuest=!!t;i.isXN=t.toString()===(e("xn")||"").split("_")[0];i.isSINA=!!e("sinawb");i.isQZONE=!!e("qzone");i.isMSN=!!e("msn");i.isTWEIBO=!!e("tweibo");i.isKAIXIN=!!e("kaixin");i.isFEIXIN=!!e("feixin");i.isYOUKU=!!e("youku");i.ulvl=(t?e("u_l"):0)||0;i.prefix=i.isXN&&"xn"||i.isSINA&&"sina"||i.isQZONE&&"qzone"||i.isMSN&&"msn"||i.isTWEIBO&&"tweibo"||i.isYOUKU&&"youku"||i.isKAIXIN&&"kaixin"||i.isFEIXIN&&"feixin"||"";return i};var c="login"+(""+Math.random()).replace(/\D/g,"")+(new Date).getTime();s.needLogin=function(e,t){var i=this;e=e||{};if("function"==$.type(e)){t=e;e={}}i.isLogin2(function(o){if(o)t&&t();else{window[c]=function(){a.close();t&&t();i.trigger("after:login");i.trigger("after:miniLogin");window[c]=null;window["setupLoginDialog"]=null};window["setupLoginDialog"]=function(e){var t={};var i=a.element.find(".tui_dialog_holder, iframe");if(e.height)t.height=e.height;if(e.width)t.width=e.width;i.css(t);a.locate()};var r={mini:"ok",callback:c};if(e.isReg)r.isReg=true;if(e.title)r.title=encodeURIComponent(e.title);if(e.email)r.email=e.email;var a=new n({className:"tudou_dialog login_dialog "+(r.isReg?"reg_dialog":"log_dialog"),title:"登录",content:'<iframe scrolling="no" frameborder="0" width="100%" height="100%" src="'+l.login+"/login.do?"+$.param(r)+'"></iframe>',hasDrag:false});i.fire("login:open",[r]);a.bind("close",function(e){i.trigger("login:close",[r])})}});return i};s.isVip=function(){return e("u_member")};return s});define("tui/random",[],function(e,t){function i(){var e=4022871197;var t=function(t){t=t.toString();for(var i=0;i<t.length;i++){e+=t.charCodeAt(i);var n=.02519603282416938*e;e=n>>>0;n-=e;n*=e;e=n>>>0;n-=e;e+=4294967296*n}return 2.3283064365386963e-10*(e>>>0)};t.version="Mash 0.9";return t}function n(){return function(e){var t=4294967087;var n=4294944443;var o=12345,r=12345,a=123,s=12345,l=12345,c=123;if(0===e.length)e=[+new Date];var u=i();for(var d=0;d<e.length;d++){o+=4294967296*u(e[d]);r+=4294967296*u(e[d]);a+=4294967296*u(e[d]);s+=4294967296*u(e[d]);l+=4294967296*u(e[d]);c+=4294967296*u(e[d])}o%=t;r%=t;a%=t;s%=n;l%=n;c%=n;u=null;var h=function(){var e=4294967087;var t=4294944443;var i=1403580;var n=810728;var u=527612;var d=1370589;var h,f,p;f=i*r-n*o;h=0|f/e;f-=h*e;if(f<0)f+=e;o=r;r=a;a=f;p=u*c-d*s;h=0|p/t;p-=h*t;if(p<0)p+=t;s=l;l=c;c=p;if(f<=p)return f-p+e;else return f-p};var f=function(){return 2.3283064365386963e-10*h()};f.uint32=h;f.fract53=function(){return f()+1.1102230246251565e-16*(2097151&h())};f.version="MRG32k3a 0.9";f.args=e;return f}(Array.prototype.slice.call(arguments))}function o(e,t){t="undefined"==typeof t?"":t;var i=new n(e||0,location.href,Date.now());return t+(+new Date).toString(32)+parseInt(1e5*i()).toString(32)}t.rand=o});define("module/stat/common",["tui/cookie","tui/event","tui/random"],function(e,t,i,n,o){var r={UL:1,OL:2,LI:3,INPUT:4,DIV:5,BODY:6,STRONG:7,SPAN:8,FORM:9,BUTTON:10,CAPTION:11,FIELDSET:12,COLGROUP:13,TFOOT:14,LABEL:15,LEGEND:16,THEAD:17,OPTGROUP:18,OPTION:19,SELECT:20,TABLE:21,TBODY:22,IFRAME:0,SCRIPT:0,OBJECT:0,EMBED:0,IMG:0};function a(){return i.rand(e("u_id"))}function s(){var t=e("juid");if(!t){t=i.rand(e("u_id"),"0");e("juid",t,{expires:365*100,domain:"tudou.com",path:"/"});t=e("juid")||1}window.juidStr=t;return t}function l(){var t=e("seid");if(!t||+new Date>(parseInt(e("seidtimeout"))||0)){t=i.rand(e("u_id"),"0");e("seid",t,{domain:"tudou.com",path:"/"});t=e("seid")||1}var n=e("referhost");if(!n||+new Date>(parseInt(e("seidtimeout"))||0)){var o=/^https?:\/\/[^\/]+/.exec(document.referrer||"");n=o?o[0]:"";e("referhost",n,{domain:"tudou.com",path:"/"})}e("seidtimeout",Date.now()+30*6e4,{domain:"tudou.com",path:"/"});return t}function c(e){e=$(e)[0];var t=[];if(e.id)return"#"+e.id;for(;e;e=e.parentNode){var i=e.nodeName.toUpperCase();if("BODY"==i)break;if(e.id&&"i"!=e.getAttribute("cs")){t.splice(0,0,"#"+e.id);return t.join("~")}var n=0;for(var o=e.previousSibling;o;o=o.previousSibling){var a=o.nodeName.toUpperCase();if(0===r[a])continue;if(a==i)++n}i=r[i]||i;var s=n?"!"+(n+1):"";t.splice(0,0,i+s)}return t.length?t.join("~"):null}function u(e){var t=$(e).attr("href")||$(e).attr("data-stat-href");if(!t)return"";if(/^(javascript:|#)/i.test(t))return"";t=$.trim(t);var i=location.href;var n=i.replace(/(https?:\/\/[^\/]+).*/,"$1");var o=n===i?n+"/":i.replace(/[#?].*/,"").replace(/[^\/]*$/,"");return t.replace(/^\.[\.\/]+/g,function(e){var t=(e.match(/\.\.\//g)||[]).length;for(var i=0;i<t;i++)o=o.replace(/[^\/]+\/$/,"");return o}).replace(/&amp;/g,"&").replace(/^\//,n+"/").replace(/^[^\h\/]/,o+"$&")}function d(e){var t={A:1,INPUT:1,BUTTON:1};if("LABEL"==e.nodeName){var i;var n=$(e);var o=n.attr("for");if(o)i=$("input#"+o).get(0);if(!i){var r=n.find("input:first");if(r.length>0)i=r.get(0)}if(i)e=i}if(e.getAttribute&&"ck"==e.getAttribute("data-stat-role"))return e;else{var a=e.parentNode;try{if(a&&a.getAttribute&&"ck"==a.getAttribute("data-stat-role"))return a}catch(s){}}if(!t[e.nodeName]){e=e.parentNode||{};if(!t[e.nodeName])return false}return e}function h(e){if(!e)return e;if(0==e.indexOf("#"))e=e.replace(/\#([^~\s]+)~/,function(e,t){return'//*[@id="'+t+'"]~'});else e="~html~body~"+e;e=e.replace(/\!(\d+)/g,function(e,t){return"["+t+"]"});e=e.replace(/(~?)(\d+)(~|\[)/g,function(e,t,i,n){for(var o in r)if(r[o]==parseInt(i))return t+o+n;return e});e=e.replace(/~/g,"/");return e}function f(e){var t=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);if(t.snapshotLength>0)return t.snapshotItem(0);return null}function p(e){var t=[];$.each(e,function(e,i){if(""!==i)t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))});return t.join("&")}function m(e,i){if(!i)t.mix(e);return $.extend(e,{__callbacks:[],addData:function(e){this.__callbacks.push(e)},getData:function(){var e=this;var t={};var i=arguments;e.__callbacks.forEach(function(n){var o=n.apply(e,i)||{};$.extend(t,o)});return t}})}o.referrer=document.referrer||"";o.updateRefer=function(e){o.referrer=e||location.href};o.getPositionCode=c;o.getTrueLink=u;o.getStatTarget=d;o.getXpathFromPositionCode=h;o.getElementByXPath=f;o.param=p;o.mix=m;o.juid=s;o.seid=l;o.pvid=a});define("tui/storage",["tui/class"],function(e){var t=e({initialize:function(e){var t=this;if(e){t.iframe1=$('<iframe src="'+e+'" style="position:absolute;left:-9999px;bottom:0;width:0;height:0;visibility:hidden;">');var n=/https?:\/\/[^\/]+/.exec(e);t.origin=n?n[0]:""}else{t.storage=i(window);t.loaded1=true;return}t.gcbs1=[];t.scbs1=[];t.rcbs1=[];t.loaded1=!!t.storage;if(t.iframe1.on)t.iframe1.on("load",o);else t.iframe1.bind("load",o);function o(){t.storage=i(this.contentWindow,t.origin);t.loaded1=true;t.gcbs1.forEach(function(e){t.getItem(e.k,e.cb)});t.scbs1.forEach(function(e){t.setItem(e.k,e.v,e.cb)});t.rcbs1.forEach(function(e){t.removeItem(e.k,e.cb)});t.gcbs1=[];t.scbs1=[];t.rcbs1=[]}$(document.body).append(this.iframe1)},getItem:function(e,t){if(this.loaded1)this.storage.getItem(e,t);else this.gcbs1.push({k:e,cb:t});return this},setItem:function(e,t,i){if($.isPlainObject(t)||$.isArray(t))t=JSON.stringify(t);if(this.loaded1)this.storage.setItem(e,t,i);else this.scbs1.push({k:e,v:t,cb:i});return this},removeItem:function(e,t){if(this.loaded1)this.storage.removeItem(e,t);else this.rcbs1.push({k:e,cb:t});return this}});function i(e,t){var i=parseInt($.browser.version);if(e!==window&&$.browser.mozilla&&(i>=13&&i<=14||i>=30))return n(e,t);else if(e.localStorage)return o(e);else if(e.ActiveXObject)return r(e);else throw new Error("Local storage not exist.")}function n(e,t){window.addEventListener("message",function(e){var t=JSON.parse(e.data);i[t.id](t.val);
delete i[t.id]},false);var i={},n=0,o={};o.setItem=function(o,r,a){i[n]=a||function(){};e.postMessage(JSON.stringify({id:n++,key:o,val:r}),t)};o.getItem=function(o,r){i[n]=r||function(){};e.postMessage(JSON.stringify({id:n++,key:o}),t)};o.removeItem=function(o,r){i[n]=r||function(){};e.postMessage(JSON.stringify({id:n++,key:o,val:null}),t)};return o}function o(e){var t={};t.setItem=function(t,i,n){e.localStorage.setItem(t,i);if(n)n()};t.getItem=function(t,i){if(i)i(e.localStorage.getItem(t))};t.removeItem=function(t,i){e.localStorage.removeItem(t);if(i)i()};return t}function r(e){var t={},i=e.document.documentElement;i.addBehavior("#default#userdata");t.setItem=function(e,t,n){try{i.setAttribute("tui",t);i.save(e)}catch(o){throw new Error("[V3] userData behavior error")}if(n)n()};t.getItem=function(e,t){try{i.load(e);if(t)t(i.getAttribute("tui"))}catch(n){return null}};t.removeItem=function(e,t){try{i.load(e);i.expires=new Date(315532799e3).toUTCString();i.save(e);if(t)t()}catch(n){}};return t}return t});define("module/global",["tui/event","tui/cookie","tui/storage","module/stat/common","module/login/login"],function(e,t,i,n,o,r,a){try{document.domain="tudou.com"}catch(s){}var l={};l.juid=n.juid();l.seid=n.seid();l.pvid=n.pvid();l.uid=o.uid();o.bind("after:login",function(){l.uid=o.uid()});o.juid=l.juid;l.storage=new i("http://ui.tudou.com/js/embed/xstorage/storage.html");return l});define("module/stat/jserror",["tui/net","module/global"],function(e,t,i,n){var o=encodeURIComponent;var r=o(location.href);var a=o(navigator.userAgent);var s=window.ERROR_RAND||.01;var l={};var c=function(i,n,c){if(!c)i="custom: "+i;n=n||s;if(Math.random()<n){if(l[i])return;e.getRequest("http://stats.tudou.com/e/page/js/fail/?v=1&s="+[o(i),r,t.juid+"_"+t.uid,a].join("|"));l[i]=true}};c.addVersion=function(e){r=o(e+":"+location.href)};if(Math.random()<s)window.onerror=function(e){c(e,1,true)};return c});define("module/mobile/smooth-scroll",["tui/browser"],function(e){function t(t,i){var n={endY:e.android?1:0,duration:300,updateRate:17};var o=function(e,t,i){return e+(t-e)*i};var r=function(e){return-Math.cos(e*Math.PI)/2+.5};var a=$.extend({},n,t);if(0===a.duration){window.scrollTo(0,a.endY);if("function"===typeof a.callback)a.callback();return}var s=window.pageYOffset,l=Date.now(),c=l+a.duration;var u=function(){var e=Date.now(),t=e>c?1:(e-l)/a.duration;window.scrollTo(0,o(s,a.endY,r(t)));if(e<c)setTimeout(u,a.updateRate);else if("function"===typeof a.callback)a.callback()};if(i){if(s>i)u()}else u()}return t});define("tui/view",["tui/event"],function(e){var t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;var i=0;var n;var o=function(t){this.clsid=i++;this._configure(t||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents();$.extend(this,new e)};var r={};var a=["el","id","attrs","className","tagName","model","preventHighlight"];var s=/^(\S+)\s*(.*)$/;$.extend(o.prototype,{tagName:"div",initialize:function(){},render:function(){return this},get:function(e){return r[e]||null},find:function(e){return this.$el.find(e)},remove:function(){this.$el.remove();this.undelegateEvents();this.unbind();return this},create:function(e,t,i){var n=document.createElement(e);if(t)$(n).attr(t);if(i)$(n).html(i);return n},setElement:function(e,t){if(this.$el)this.undelegateEvents();this.$el=e instanceof $?e:$(e);this.el=this.$el[0];if(false!==t)this.delegateEvents();return this},delegateEvents:function(e){if(!(e||(e=this.events)))return;this.undelegateEvents();for(var t in e){var i=e[t];if(!$.isFunction(i))i=this[e[t]];if(!i)continue;var n=t.match(s);var o=n[1],r=n[2];i=i.bind(this);o=this._ensureTouch(o,r);o+=".delegateEvents"+this.clsid;if(""===r)this.$el.on(o,i);else this.$el.on(o,r,i)}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.clsid);if(this.options.preventHighlight)this.$el[0].ontouchend=null;return this},modelEvents:function(e,t){t="{"+($.trim(t)||"mod")+"} ";for(var i in this)if(0===i.indexOf(t))e.bind(i.slice(t.length),this[i].bind(this))},_configure:function(e){if(this.options)e=$.extend({},this.options,e);for(var t=0,i=a.length;t<i;t++){var n=a[t];if(e[n])this[n]=e[n]}this.options=e},_ensureElement:function(){if(this.el)this.setElement(this.el,false);else{var e=this.attrs||{};if(this.id)e.id=this.id;if(this.className)e["class"]=this.className;this.setElement(this.create(this.tagName,e),false)}},_ensureTouch:function(e,i){if(t&&window.tudouClickStat){if(("click"==e||"tap"==e||"singleTap"==e)&&""!==i){var o="click.delegateEvents"+this.clsid;this.$el.on(o,i,function(e){e.preventDefault();if(!tudouClickStat.getStatTarget(e.target)){if(n)clearTimeout(n);n=setTimeout(function(){tudouClickStat.send(e,{},function(){},true)},10)}});if(this.options.preventHighlight)this.$el[0].ontouchend=function(e){e.preventDefault()}}return e}switch(e){case"tap":case"singleTap":return"click";case"doubleTap":return"dblclick"}return e}});o.create=function(e,t){if(e&&!r[e])return r[e]=new this(t);return new this(t)};o.instance=function(e,t){if(e&&!r[e])return r[e]=t;return r[e]||null};o.destroy=function(e){if(e){if(r[e]){r[e].remove();delete r[e]}}else for(var t in r)arguments.callee(t)};o.extend=function(e,t){var i=this;var n=function(){i.apply(this,arguments)};$.extend(n,i,t);var o=function(){this.constructor=n};o.prototype=i.prototype;n.prototype=new o;$.extend(n.prototype,e);n.superClass=i.prototype;return n};return o});define("module/mobile/gotop",["tui/view","tui/browser","module/mobile/smooth-scroll"],function(e,t,i){var n;var o=e.extend({events:{click:"gotop"},initialize:function(e){$.extend(this,{threshold:600,duration:200,disable:false,callback:null},e);if(true===this.disable)return;this.visible=false;this.$win=$(window);var t=$("#xBody");t[0]||(t=$(document.body));t.append('<div class="g-gotop" id="gGotop"><b></b><i class="icon-arr-up"></i></div>');this.setElement($("#gGotop"));this.$win.bind("scroll",this.pageScroll.bind(this));n=this},remove:function(){this.$win.unbind("scroll");this.superClass.remove.call(this)},pageScroll:function(){var e=this.$win.scrollTop();if(e>this.threshold){!this.visible&&this.$el.addClass("show");this.visible=true}else{this.visible&&this.$el.removeClass("show");this.visible=false}},gotop:function(){var e=90==Math.abs(window.orientation||0);if("ipad"==t.iOS&&e&&this.callback)this.callback();else i({duration:this.duration})}});o.init=function(e){if(n)o.callback(e&&e.callback||null);else n=new o(e);return n};o.remove=function(){if(n){n.remove();n=null}};o.callback=function(e){if(n)n.callback=e||null};return o});define("module/mobile/view/notice",["tui/view"],function(e){var t;var i=e.extend({className:"g-notice",events:{tap:"close","tap .g-notice-close":"close"},initialize:function(){this.$container=$(this.options.container||document.body);this.render()},render:function(){var e='<div class="g-notice-msg"></div>';if(!this.options.autohide)e+='<div class="g-notice-close"><i class="icon-x"></i></div>';if(this.options.fixed)this.$el.addClass("g-notice-fixed");if(this.options.ltr)this.$el.addClass("g-notice-ltr");if(this.options.error)this.$el.addClass("g-notice-err");this.$el.html(e);this.$msg=this.find(".g-notice-msg");this.$container.append(this.el);return this},show:function(e,t){var i=this;this.$msg.html(e);if(this.timer)clearTimeout(this.timer);if(this.options.autohide)this.timer=setTimeout(function(){i.hide()},this.options.fadeout||3e3);if(t)this.$el.addClass("g-notice-err");setTimeout(function(){i.$el.addClass("g-notice-on");i.fire("notice:show")},0);return this},hide:function(e){var t=this;if(e)setTimeout(function(){t.remove();t.fire("notice:remove")},500);this.$el.removeClass("g-notice-on g-notice-err");this.fire("notice:hide",[!!e]);return this},close:function(e){e.preventDefault();if(this.timer)clearTimeout(this.timer);this.hide()}});i.msg=function(e,n,o){i.close();t=new i({fixed:true,autohide:n,fadeout:o});t.show(e)};i.err=function(e,n,o){i.close();t=new i({fixed:true,autohide:n,fadeout:o,error:true});t.show(e)};i.close=function(){t&&t.hide(true)};return i});define("module/mobile/view/mask",["tui/view"],function(e){var t,i;var n=e.extend({className:"g-panel-mask",initialize:function(){this.$container=$(this.options.container||document.body);this.addContext()},addContext:function(){this.update=this.update.bind(this)},update:function(){var e=this.$container.get(0).scrollHeight;this.$el.css("height",e)},show:function(){window.addEventListener("resize",this.update,false);if(t)this.$el.show();else{this.options.zIndex&&this.$el.css("z-index",this.options.zIndex);this.$container.append(this.el);t=true}this.update();return this},hide:function(e){window.removeEventListener("resize",this.update,false);if(e){this.remove();t=false}else this.$el.hide();return this}});n.show=function(e){if(!i)i=e?new n({className:1==e?"g-panel-mask-w":"g-panel-mask-t"}):new n;i.show()};n.hide=function(e){if(i){i.hide(e);e&&(i=null)}};return n});define("module/mobile/view/panel",["tui/view","module/mobile/view/mask"],function(e,t){var i=e.extend({events:{'click [data-action="close"]':"handleClose",'click [data-action="remove"]':"handleClose",'click [data-role="head-left"]':"handleActionLeft",'click [data-role="head-right"]':"handleActionRight"},initialize:function(){this.$container=$(this.options.container||document.body);this.render();this.locate=this.locate.bind(this);window.addEventListener("resize",this.locate,false);window.addEventListener("orientationchange",this.locate,false)},render:function(){var e=[];var t=["g-panel"];if(!this.options.template){e.push('<div class="g-panel-head" data-role="header">');e.push('<div class="g-panel-title" data-role="title">'+(this.options.title||"")+"</div>");if("card"==this.options.type)e.push('<div class="g-panel-close" data-action="close"><i class="icon-xbtn"></i></div>');else{e.push('<div class="g-panel-action-l" data-role="head-left">'+(this.options.actionLeft||"")+"</div>");e.push('<div class="g-panel-action-r" data-role="head-right">'+(this.options.actionRight||"")+"</div>")}e.push("</div>");e.push('<div class="g-panel-main" data-role="content">'+(this.options.content||"")+"</div>")}if(this.options.className)t.push(this.options.className);if(this.options.css)this.$el.css(this.options.css);e=this.options.template||e.join("");this.$el.addClass(t.join(" ")).hide().html(e);this.$container.append(this.el);this.$title=this.find("[data-role=title]");this.$header=this.find("[data-role=header]");this.$content=this.find("[data-role=content]");return this},remove:function(){window.removeEventListener("resize",this.locate,false);window.removeEventListener("orientationchange",this.locate,false);i.superClass.remove.call(this)},locate:function(e){if(e){setTimeout(function(){this.locate()}.bind(this),500);return}var t=this.options.container&&this.$container||$(window);var i,n=Math.max(0,(t.width()-this.$el.width())/2);if(this.options.center){if("fixed"==this.$el.css("position"))i=Math.max(0,(t.height()-this.$el.height())/2);else i=t.scrollTop()+(t.height()-this.$el.height())/2;this.$el.css({top:i,left:n})}else this.$el.css({left:n});return this},title:function(e){this.$title.html(e);return this},content:function(e){this.$content.html(e);return this},open:function(){if(this.options.mask)t.show();this.$el.show();this.locate();this.fire&&this.fire("panel:open");return this},close:function(e){if(this.options.mask)t.hide(!!e);if(e)this.remove();else this.$el.hide();this.fire("panel:close",[!!e]);return this},handleClose:function(e){e.preventDefault();var t=$(e.target).attr("data-action");this.close("remove"==t)},handleActionLeft:function(e){e.preventDefault();this.fire("panel:actionleft")},handleActionRight:function(e){e.preventDefault();this.fire("panel:actionright")}});return i});define("module/oauth/oauth",["tui/event","tui/browser","module/global","module/domain","tui/dialog","module/mobile/view/panel"],function(e,t,i,n,o,r){var a={0:{name:"MSN",width:450,height:400},1:{name:"人人网",width:420,height:320},2:{name:"新浪微博",width:600,height:340},3:{name:"QQ",width:550,height:470},5:{name:"腾讯微博",width:814,height:835},6:{name:"开心网",width:465,height:340},7:{name:"飞信",width:565,height:350},10:{name:"优酷",width:565,height:402}};var s;var l=n.domain.xn;var c=l+"/xiaonei/connect/auth.action";var u=l+"/xiaonei/connect/bind.action";var d={};window.TUI=window.TUI||{};window.TUI.ns=function(){return{getInstance:function(e){return{loginBack:function(t,i,n,o,r){s&&s.close();var a={isFirstBind:i,status:t.status,msg:t.msg,isActived:o,email:r,type:e,loginRedirectUrl:t.loginRedirectUrl};if(i)h.trigger("login:first",[a]);else h.login(t.loginRedirectUrl,function(){h.trigger("login:back",[a])})}}}}};var h=$.extend(new e,{accountMap:a,load:function(e,i,n){var l=a[e];var u=c+"?type="+e;if(true===i)if(n)s=new r({template:'<div class="g-panel-third'+(t.isPad?" g-panel-pad":"")+'"><div class="g-panel-main"><div class="g-panel-close" data-action="remove"><i class="icon-xbtn"></i></div><iframe style="width:'+(true==n?"100%":l.width+"px")+";height:"+l.height+'px;" src="'+u+'" frameborder="0"></iframe></div></div>',type:"card"}).open();else s=new o({className:"tui_dialog tudou_dialog login_dialog",content:'<iframe style="width:'+(true==n?"100%":l.width+"px")+";height:"+l.height+'px;" src="'+u+'" frameborder="0"></iframe>',hasDrag:false});else{if(s)s.close();s=window.open(u,l.name,"width="+l.width+",height="+l.height+",menubar=0,scrollbars=0,status=1,titlebar=0,toobar=0,location=1,resizable=yes")}},login:function(e,t){var i=document.createElement("iframe");i.src=e;i.width=0;i.height=0;i.frameborder=0;i.scrolling="no";i.style.visibility="hidden";i.style.position="absolute";if(i.attachEvent)i.attachEvent("onload",function(){t&&t()});else i.onload=function(){t&&t()};document.body.appendChild(i)},bindTudou:function(e,t){var i=this;$.getJSON(u+"?callback=?",{email:e.email,password:e.password,type:e.type,tudouType:e.tudouType,from:top.location.href},function(e){if(t&&false===t(e))return;if(1==e.status)i.trigger("bindTudou:success",[e]);else i.trigger("bindTudou:fail",[e])})},bindExistTudou:function(e,t){var i=this;$.getJSON(l+"/xiaonei/connect/bindexist.action?callback=?",{email:e.email,password:e.password,type:e.type,from:top.location.href},function(e){if(t&&false===t(e))return;if(1==e.status)i.trigger("bindExistTudou:success",[e]);else i.trigger("bindExistTudou:fail",[e])})}});return h});define("module/mobile/login/login",["tui/net","tui/event","tui/template","module/domain","module/login/login","module/oauth/oauth","module/mobile/view/panel","module/mobile/view/notice"],function(e,t,i,n,o,r,a,s){var l=n.url;var c={0:"邮箱不存在，或是密码输错了，请重新输入","-1":"此帐号因为反复上传侵犯版权的视频，已被封","-2":"你注册的邮箱还没有激活","-3":"请填写完整的账号和密码"};var u={1:"验证码错误",2:"用户被屏蔽",4:"IP访问频繁",5:"账号待激活",6:"账号待绑定",7:"操作失败，请稍后重试",99:"请输入正确的手机号码和验证码",100:"请输入正确的手机号码",101:"请输入正确的验证码",200:"账号已存在请直接登录"};var d=a.extend({id:"gLoginPanel",events:{"tap #btnLoginAction":"login","tap #gLoginReg":"reg","tap .captcha":"sendCode","tap .g-login-third a":"third","tap .third-login":"thirdLogin","tap .third-bind":"tudouBind"},initialize:function(e){var t=this;t.options.className="g-login";t.options.template=i.convertTpl('<form method="post" id="gLoginForm">\n<div class="g-panel-head">\n<div class="g-panel-title" data-role="title">用户登录</div>\n<div class="g-panel-action-l"><a href="#" id="btnLoginCancel" data-action="close">取消</a></div>\n<div class="g-panel-action-r"><input type="submit" id="btnLoginAction" value="登录" /></div>\n</div>\n<div class="g-panel-main" data-role="content">\n<div class="g-login-form">\n<input type="text" name="loginname" class="loginname" id="gLoginUser" placeholder="邮箱或手机号码" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />\n<input type="password" name="password" class="password" id="gLoginPass" placeholder="密码或验证码" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />\n<input type="hidden" name="remember" checked="checked" value="true" />\n<span class="captcha">获取验证码</span>\n<p class="help"><a href="http://login.tudou.com/reg.do" target="_blank" id="gLoginReg">免费注册</a><a href="http://login.tudou.com/lost.do?act=selectMethod" target="_blank" id="gLoginForgot">忘记密码</a></p>\n</div>\n<div class="g-login-third">\n<span><a class="weibo" data-type="2" href="#"><i></i>微博登录</a></span>\n<!--<span><a class="qq" data-type="3" href="#"><i></i>QQ登录</a></span>-->\n</div>\n<div class="g-login-bind">\n<p class="third-name">亲爱的用户</p>\n<p class="third-ts">如果您之前未注册过土豆账号</p>\n<a class="third-login" href="#">请立即登录土豆网</a>\n<p class="third-ts">如果您已注册过土豆网</p>\n<a class="third-bind" href="#">请绑定土豆账号</a>\n</div>\n</div>\n</form>\n<iframe id="crossdomain" style="display:none" src="<%=login_domain%>/login.do?act=loginProxy"></iframe>',{login_domain:l.login});t.options.mask=true;$.extend(t.events,d.superClass.events);d.superClass.initialize.call(t,e);t.notice=new s({container:t.$content,autohide:true,ltr:true});t.notice.bind("notice:hide",t.listen.bind(t));t.type=2;t.$crossDomain=$("#crossdomain");t.$form=$("#gLoginForm");t.$user=$("#gLoginUser");t.$pass=$("#gLoginPass");t.$btn=$("#btnLoginAction");t.$reg=$("#gLoginReg");t.$tit=t.find(".g-panel-title");t.$login=t.find(".g-login-form");t.$captcha=t.find(".captcha");t.$help=t.find(".help");t.$third=t.find(".g-login-third");t.$bind=t.find(".g-login-bind");t.$form.submit(t.submit.bind(t));if(o.uid())return;t.open();t.listen()},action:function(){if(this.lock)return;this.$form.submit()},submit:function(e){e.preventDefault();var t=this;var i=$.trim(t.$user.val());var n=$.trim(t.$pass.val());var a={};if(0==t.type||1==t.type){if(""==i||""==n){t.notice.show(u["99"]);return false}a={type:"POST",url:l.login+"/passport/quickLogin.do",data:"mobile="+i+"&code="+n+"&remember=1",dataType:"json",success:function(e){if(0==e.code){h(1,1,e.data.uid);o.DWriteCookie({isRemember:true,yktk:e.data.yktk},function(){t.fire("after:login",[e.data.uid]);t.close(true)})}else{h(0,e.code,0);t.notice.show(u[e.code],true)}t.lock=false}}}if(2==t.type){if(""==i||""==n){t.notice.show(c["-3"]);return false}a={type:"POST",url:l.login+"/login.do",data:"loginname="+i+"&password="+n+"&remember=true&act=ajaxLogin2Json",dataType:"json",success:function(e){if(1==e.system){h(1,1,e.uid);o.DWriteCookie({isRemember:true,yktk:e.data.yktk},function(){t.fire("after:login",[e.uid]);t.close(true)})}else{h(0,e.system,0);t.notice.show(c[e.system],true)}t.lock=false}}}if(3==t.type){if(""==i||""==n){t.notice.show(c["-3"]);return false}r.bindExistTudou({type:t.bindType,email:i,password:n},function(e){if(1==e.status)r.login(e.loginRedirectUrl,function(){t.trigger("after:login")});else t.notice.show(e.msg,true)})}t.$crossDomain[0].contentWindow.cross.ajax(a);t.lock=true},reg:function(e){if(e)e.preventDefault();this.type=0;this.setCode(true);this.setForm(true)},listen:function(){var e=this;this.$user.get(0).focus();this.$user.bind("keyup",function(t){if(3==e.type)return false;var i=$.trim(e.$user.val());if(/^1[3|4|5|7|8][0-9]\d{8}$/.test(i)){e.$captcha.show();if(2==e.type){e.type=1;e.setForm()}}else{e.$captcha.hide();if(1==e.type){e.type=2;e.setForm()}}})},sendCode:function(){var t=this;if(this.timer)return false;var i=$.trim(t.$user.val());if(0==this.type){var n={mobile:i};$.getJSON(l.login+"/passport/checkMobile.do?jsoncallback=?",n,function(e){if(1==e.code)t.notice.show(u["200"]);if(0==e.code)o()})}else o();function o(){t.timer=setInterval(function(){t.time--;t.$captcha.text(t.time+"秒后重发");if(t.time<=0)t.setCode()},1e3);var n={mobile:i,type:t.type,app:"mobile"};e.getRequest(l.login+"/passport/sendSmsMsg.do",n)}},third:function(e){event.preventDefault();var t=$(event.target).attr("data-type");this.oauthBind();r.load(t,true,true)},oauthBind:function(){var e=this;r.bind("login:first",function(t){e.bindType=t.type;e.firstBind(e.bindType)});r.bind("login:back",function(){e.trigger("after:login")});r.bind("login:error",function(t){e.notice.show(t.msg)})},firstBind:function(e){switch(e){case 1:e="亲爱的QQ用户";break;case 2:e="亲爱的微博用户";break;default:e="亲爱的用户"}this.$bind.find(".third-name").text(e);this.$btn.hide();this.$login.hide();this.$third.hide();this.$bind.show()},thirdLogin:function(e){e.preventDefault();var t=this;r.bindTudou({type:t.bindType,tudouType:1},function(e){if(1==e.status)r.login(e.loginRedirectUrl,function(){t.trigger("after:login")});else notice.show(c[0],true)})},tudouBind:function(e){e.preventDefault();this.type=3;this.setForm(true);this.$btn.show();this.$login.show();this.$bind.hide()},setForm:function(e){var t=this;if(e){this.$user.val("");this.$pass.val("")}switch(this.type){case 0:this.$tit.text("手机注册");this.$btn.attr("value","注册");this.$user.attr("placeholder","手机号码");this.$pass.attr("placeholder","验证码").attr("type","text");this.$help.hide();this.setCode();break;case 1:this.$tit.text("用户登录");this.$btn.attr("value","登录");this.$user.attr("placeholder","手机号码");this.$pass.val("").attr("placeholder","验证码").attr("type","text");this.$help.show();this.setCode();break;case 2:this.$tit.text("用户登录");this.$btn.attr("value","登录");this.$user.attr("placeholder","邮箱或手机号码");this.$pass.val("").attr("placeholder","密码").attr("type","password");this.$help.show();break;case 3:this.$tit.text("绑定已有土豆账号");this.$btn.attr("value","绑定");this.$user.attr("placeholder","邮箱或手机号码");this.$pass.attr("placeholder","密码").attr("type","password");this.$help.hide()}},setCode:function(e){clearInterval(this.timer);this.time=60;this.timer=null;this.$captcha.text("获取验证码");if(e)this.$captcha.hide()},close:function(e){this.type=2;this.$btn.show();this.$login.show();this.$bind.hide();this.$third.show();this.setCode(true);this.setForm(true);d.superClass.close.call(this,e)},remove:function(){this.notice.remove();d.superClass.remove.apply(this,arguments)}});d.needLogin=function(e,t){var i=this;e=e||{};if("function"==$.type(e)){t=e;e={}}o.isLogin2(function(n){if(n)t&&t();else if(!i._panel){i._panel=new i(e);i._panel.one("after:login",function(){setTimeout(function(){t&&t();i.trigger("after:login")},0);i._panel.close(true);i._panel=null})}else i._panel.open().listen()});return i};d.logout=function(e){var t=this;if(!o.uid())return;$.get(l.login+"/loginOut.do?service="+encodeURIComponent(l.login+"/passport/logoutOver.do?")+"jsoncallback=?",{r:Math.random()},function(){e&&e();t.trigger("after:logout")})};d.needReg=function(e,t){var i=this;e=e||{};if("function"==$.type(e)){t=e;e={}}if(!this._panel){this._panel=new this(e);this._panel.reg();this._panel.one("after:login",function(){setTimeout(function(){t&&t();i.trigger("after:login")},0);i._panel.close(true);i._panel=null})}else{this._panel.open().listen();this._panel.reg()}};function h(t,i,n){e.getRequest("http://stats.tudou.com/e/user/login/?v=1&s="+o.juid+"|"+n+"|1|1|-1|4|"+t+"|"+i+"|"+(new Date).getTime())}$.extend(d,new t);window.__Login__=d;return d});define("tui/util/url",[],function(e,t){function i(e,t){if(!$.browser.msie)if(t)window.open(e,t);else location.href=e;else{var i=$('<a href="'+e+'" target="'+(t||"_self")+'" data-openurl="true"> </a>')[0];document.body.appendChild(i);i.click()}}function n(e){e=e||location.search||location.href;var t={},i=e.match(/[^\s&?#=\/]+=[^\s&?#=]+/g);if(i)for(var n=0,o=i.length;n<o;n++){var r=i[n].split("=");t[r[0]]=decodeURIComponent(r[1])}return t}t.openURL=i;t.params=n});define("tui/util/str",[],function(e,t){function i(e){return e.replace(/([^\x00-\xff])/g,"$1 ").length}function n(e,t,i){e=e||"";i=i||"..";if(this.byteLen(e)<=t)return e;var n=e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/([^\x00-\xff])\s/g,"$1");return n+i}function o(e,t){t=t||400;e=e.replace(/(\r\n|\n)+/g,"<br>");e=e.replace(/\s{2,}/g," ");e=e.replace(/(<(?:img|embed).*?>)([\s\S]*)$/gi,function(e,t,i){return t+i.replace(/<(?:img|embed).*?>/gi,"")});e=e.replace(/<\/(p|div|ol|ul|li)>/gi,"<br>");e=e.replace(/<(?!img|embed|br).*?>/gi,"");e=e.replace(/(<br[^>]*>\s*){2,}/gi,"$1");var i=e.length;e=e.substr(0,t);e=e.replace(/<[^>]*$/,"");if(e.length<i)e+=" ...";return e}var r=[];for(var a=0;a<256;a++)r[a]=(a<16?"0":"")+a.toString(16);function s(){var e=0|4294967295*Math.random();var t=0|4294967295*Math.random();var i=0|4294967295*Math.random();var n=0|4294967295*Math.random();return r[255&e]+r[255&e>>8]+r[255&e>>16]+r[255&e>>24]+"-"+r[255&t]+r[255&t>>8]+"-"+r[64|15&t>>16]+r[255&t>>24]+"-"+r[128|63&i]+r[255&i>>8]+"-"+r[255&i>>16]+r[255&i>>24]+r[255&n]+r[255&n>>8]+r[255&n>>16]+r[255&n>>24]}t.byteLen=i;t.substr=n;t.subHtml=o;t.uuid=s});define("tui/util/num",[],function(e,t){function i(e,t){var i="",n=e<0,o=String(Math.abs(e));if(o.length<t)i=new Array(t-o.length+1).join("0");return(n?"-":"")+i+o}function n(e,t){t=t.length;e=e||0;return 1==t?e:(e=String(Math.pow(10,t)+e)).substr(e.length-t)}function o(e,t){t=t||",";return String(e).replace(/(\d)(?=(\d{3})+($|\.))/g,"$1"+t)}function r(e){e=parseInt(e);var t;if(e>=1e8)t=(e/1e8).toFixed(1)+"亿";else if(e>=1e6)t=o(Math.round(e/1e4))+"万";else t=o(e);return t}function a(e){e=parseInt(e);var t=-1;do{e/=1024;t++}while(e>1024);return Math.max(e,.1).toFixed(1)+["KB","MB","GB","TB"][t]}t.pad=i;t.format=n;t.split=o;t.field=r;t.bytes=a});define("tui/util/date",["tui/util/num"],function(e,t,i){var n=e.format;function o(e,t){if(void 0===t)t=new Date;else if($.isNumeric(t))t=new Date(parseInt(t,10));return e.replace(/([YMDhsm])\1*/g,function(e){switch(e.charAt()){case"Y":return n(t.getFullYear(),e);case"M":return n(t.getMonth()+1,e);case"D":return n(t.getDate(),e);case"w":return t.getDay()+1;case"h":return n(t.getHours(),e);case"m":return n(t.getMinutes(),e);case"s":return n(t.getSeconds(),e)}})}var r=60*24*60;function a(e,t,i){if($.isNumeric(e))e=new Date(parseInt(e,10));if($.isNumeric(t))t=new Date(parseInt(t,10));if(void 0===e)e=new Date;if(void 0===t)t=new Date;if(!i)i="YYYY年MM月DD日";var n=new Date(t.toDateString());var a=(+t-+e)/1e3;var s=(+t-+n)/1e3;if(a<=60)return"刚刚";else if(a<=60*60)return Math.floor(a/60)+"分钟前";else if(a<=s)return Math.floor(a/3600)+"小时前";else if(a<=s+r)return"昨天";else if(a<=s+2*r)return"前天";else if(a<=s+25*r)return Math.floor(a/r)+"天前";else return o(i,e)}function s(e){var t=0;e=String(e).split(":");for(var i=0,n=e.length;i<n;i++)t+=parseInt(e[i],10)*Math.pow(60,n-i-1);return t}function l(e){var t=[];var i=parseInt(e/3600);var n=parseInt(e%3600/60);var e=e%60;if(n<=9)n="0"+n;if(e<=9)e="0"+e;t=[n,e];if(i>0)t.unshift(i);return t.join(":")}function c(e,t,i){if("date"==$.type(t))t=t.getTime();else t=parseInt(t);var o=new Date(t),r=o.getHours();if(o>432e5)r+=Math.floor(o/432e5);if(i)e=e.replace(/(\w)\1+/g,"$1");return e.replace(/([hms])\1*/g,function(t){switch(t.charAt()){case"h":return n(r-8,t);case"m":var i=60*(/h+/.test(e)?0:r-8)+o.getMinutes();return n(i,t);case"s":return n(o.getSeconds(),t)}})}function u(e,t){if(e<36e5)return this.formatTime("mm:ss",e,t);else return this.formatTime("hh:mm:ss",e,t)}i.release=a;i.formatDate=o;i.formatTime=c;i.formatTimeE=u;i.beautyTime=l;i.parseTime=s});define("tui/util",["tui/util/date","tui/util/num","tui/util/str","tui/util/url"],function(e,t,i,n){return $.extend({},e,t,i,n)});define("module/mobile/sidebar/sub-model",["tui/view","tui/art","tui/util","tui/browser","module/domain","module/login/login","module/mobile/login/login"],function(e,t,i,n,o,r,a){return e.extend({el:$("#gSideBar"),events:{"click .navi-submore":"getMore"},initialize:function(){this.tpl='<%if(start == 0 && album.length) {%><li><a href="/watch/subscribe/?type=album&from=sidebar"><span class="album"><i class="icon-video-manage"></i></span>影视剧<b data-count="<%=update.album%>"></b></a></li><%}%>\n<%data.forEach(function(t, i) {%>\n<% if (isIPad) { %>\n<li><a href="<%=Url.main%>/home/_<%=t.id%>/item?from=sidebar" data-id="<%=t.id%>">\n<% } else { %>\n<li><a href="<%=Url.main%>/watch/home/?id=<%=t.id%><%if(t.type==1){%>&type=album<%}%>&from=sidebar" data-id="<%=t.id%>">\n<% } %>\n<b data-count="<%if(curID==t.id){%>0<%}else{%><%=t.updateCount%><%}%>"></b><img src="<%=t.smallPic%>" /><%=t.title%></a></li>\n<%});%>\n';this.recom='<%data.forEach(function(t, i) {%>\n<li><a href="<%=Url.main%>/watch/home/?id=<%=t.userId%>&from=sidebar" data-id="<%=t.userId%>"><img src="<%=t.userpic%>" /><%=t.nickname%></a></li>\n<%});%>\n';this.start=0;this.end=20;this.$mySubCount=this.find("#gSideMySubCount");this.$userSubCount=this.find("#gUserSubCount");this.$subTitle=this.find("#subTitle");this.$subPart=this.find("#gSideSubList .sublistpart");this.$subAll=this.find("#gSideSubList .sublistall");this.$more=this.find("#gSideSubList .navi-submore");this.$tit=this.find("#gSideSubList .navi-subtitle");a.bind("after:login",this.getSubList.bind(this));a.bind("after:logout",this.renderReset.bind(this))},render:function(){var e=this;r.isLogin2(function(t){if(t)e.getSubList();else e.renderReset()})},renderReset:function(){this.$subPart.empty();this.$subAll.empty();this.start=0;this.end=20;this.$more.removeClass("suball").hide().html("显示全部");this.$tit.html("推荐列表");this.subUpdate(0);this.remSubList()},subUpdate:function(e){if(void 0==e)e=this.total||0;this.$userSubCount.attr("data-count",e);this.$mySubCount.attr("data-count",e);var t=$(".g-btn-badge");if(void 0==e)e=t.attr("data-count");t.attr("data-count",e)},getSubList:function(){var e=this;var a={uid:r.uid(),start:this.start,end:this.end,type:0,app:"mobileweb"};$.getJSON(o.domain.main+"/watch/sub/subListGroupAlbum.do?jsoncallback=?",a,function(r){if(r&&0==r.code){var a=t.compile(e.tpl)({isIPad:"ipad"==n.iOS,Url:o.url,data:r.data.type2,start:e.start,album:r.data.type1,update:r.data.updateCount,curID:i.params().id});if(0==e.start&&r.data.type2.length){e.$tit.html("订阅列表");e.$subPart.empty().append(a);e.total=r.data.updateCount.total;e.subUpdate(e.total);if(r.data.type2.length>=20)e.$more.show()}else e.$subAll.append(a);e.fire("getsublist:success",[r.data,r])}else e.fire("getsublist:fail",[r.data,r])})},remSubList:function(){var e=this;var i={size:6,keys:"全部",app:"mobileweb"};$.getJSON(o.domain.main+"/watch/getRecommendUsers.do?jsoncallback=?",i,function(i){if(i&&0==i.code){var n=t.compile(e.recom)({Url:o.url,data:i.data});e.$subPart.append(n);e.fire("getremlist:success",[i.data,i])}else e.fire("getremlist:fail",[i.data,i])})},getMore:function(){if(this.$more.hasClass("suball")){this.$subAll.hide();this.$more.removeClass("suball").html("显示全部");this.fire("subListChange")}else{if(0==this.start){this.start=20;this.end=1e3;this.getSubList()}this.$subAll.show();this.$more.addClass("suball").html("显示部分")}}})});define("module/mobile/sidebar/user-model",["tui/view","tui/art","module/domain","module/login/login","module/mobile/login/login"],function(e,t,i,n,o){return e.extend({el:$("#gSideBar"),events:{"tap #gSideLogout":"logout","tap #gSideLogin":"login","tap #gSideReg":"reg"},initialize:function(){this.tpl='<% if (uid) { %>\n<div class="user-view" id="gSideUser">\n<div class="user-icon">\n<a href="http://www.tudou.com/home/<%=userInfo._usr || uid%>" target="_blank"><img src="<%=userInfo._ico%>" /></a>\n</div>\n<div class="user-info">\n<p><a href="http://www.tudou.com/home/<%=userInfo._usr || uid%>" target="_blank"><%=userInfo._nic || userInfo._usr%></a></p>\n<p class="user-count" data-count="0" id="gUserSubCount"></p>\n</div>\n<div class="logout" id="gSideLogout">退出</div>\n</div>\n<% } else { %>\n<div class="user-view login-view">\n<div class="user-icon">\n<img src="http://i1.tdimg.com/b/20131202/co5.png" />\n</div>\n<div class="user-info">\n<p><a href="#" id="gSideLogin">登录</a> 或 <a href="http://login.tudou.com/reg.do" target="_blank" id="gSideReg">注册</a></p>\n<p>一切新鲜事，送到你眼前！</p>\n</div>\n</div>\n<% } %>\n';this.$user=this.find("#gSideUser");this.$entry=this.find("#gSideEntry");o.bind("after:login",this.renderUser.bind(this));o.bind("after:logout",this.renderReset.bind(this))},render:function(){var e=this;this.$userPic=$(".g-btn-login").eq(-1);n.isLogin2(function(t){if(t)e.renderUser();else e.renderReset()})},renderUser:function(){var e=t.compile(this.tpl)({uid:n.uid(),userInfo:n.userInfo()||{}});this.$user.html(e);this.$userPic.html('<a href="http://www.tudou.com/watch/home/?id='+n.uid()+'"><img src="'+n.userInfo()._ico+'"/></a>')
},renderReset:function(){var e=t.compile(this.tpl)({uid:0,userInfo:{}});this.$user.html(e);this.$userPic.html("登录");this.$entry.addClass("navi-chs-sec");this.$userPic.bind("click",function(){o.needLogin()})},login:function(e){e.preventDefault();o.needLogin()},logout:function(e){e.preventDefault();o.logout()},reg:function(e){e.preventDefault();o.needReg()}})});define("module/mobile/scroller/animate",[],function(e,t){var i=Date.now||function(){return+new Date};var n=60;var o=1e3;var r={};var a=1;var s={requestAnimationFrame:function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame;var t=!!e;if(e&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(e.toString()))t=false;if(t)return function(t,i){e(t,i)};var i=60;var n={};var o=0;var r=1;var a=null;var s=+new Date;return function(e,t){var l=r++;n[l]=e;o++;if(null===a)a=setInterval(function(){var e=+new Date;var t=n;n={};o=0;for(var i in t)if(t.hasOwnProperty(i)){t[i](e);s=e}if(e-s>2500){clearInterval(a);a=null}},1e3/i);return l}}(),stop:function(e){var t=null!=r[e];if(t)r[e]=null;return t},isRunning:function(e){return null!=r[e]},start:function(e,t,l,c,u,d){var h=i();var f=h;var p=0;var m=0;var g=a++;if(!d)d=document.body;if(0===g%20){var v={};for(var _ in r)v[_]=true;r=v}var b=function(a){var v=true!==a;var _=i();if(!r[g]||t&&!t(g)){r[g]=null;l&&l(n-m/((_-h)/o),g,false);return}if(v){var w=Math.round((_-f)/(o/n))-1;for(var y=0;y<Math.min(w,4);y++){b(true);m++}}if(c){p=(_-h)/c;if(p>1)p=1}var $=u?u(p):p;if((false===e($,_,v)||1===p)&&v){r[g]=null;l&&l(n-m/((_-h)/o),g,1===p||null==c)}else if(v){f=_;s.requestAnimationFrame(b,d)}};r[g]=true;s.requestAnimationFrame(b,d);return g}};return s});define("module/mobile/scroller/scroller",["tui/event","module/mobile/scroller/animate"],function(e,t){var i=function(t,i){this.__callback=t;this.event=new e;this.options={scrollingX:true,scrollingY:true,animating:true,animationDuration:250,bouncing:true,bouncingTop:true,locking:true,paging:false,snapping:false,zooming:false,minZoom:.5,maxZoom:3,speedMultiplier:1};for(var n in i)this.options[n]=i[n]};var n=function(e){return Math.pow(e-1,3)+1};var o=function(e){if((e/=.5)<1)return.5*Math.pow(e,3);return.5*(Math.pow(e-2,3)+2)};var r={__isSingleTouch:false,__isTracking:false,__didDecelerationComplete:false,__isGesturing:false,__isDragging:false,__isDecelerating:false,__isAnimating:false,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:false,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__loadMoreHeight:null,__loadMoreActive:false,__loadMoreActivate:null,__loadMoreDeactivate:null,__loadMoreStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(e,t,i,n){var o=this;if(e===+e)o.__clientWidth=e;if(t===+t)o.__clientHeight=t;if(i===+i)o.__contentWidth=i;if(n===+n)o.__contentHeight=n;o.__computeScrollMax();o.scrollTo(o.__scrollLeft,o.__scrollTop,true)},setPosition:function(e,t){var i=this;i.__clientLeft=e||0;i.__clientTop=t||0},setSnapSize:function(e,t){var i=this;i.__snapWidth=e;i.__snapHeight=t},activatePullToRefresh:function(e,t,i,n){var o=this;o.__refreshHeight=e;o.__refreshActivate=t;o.__refreshDeactivate=i;o.__refreshStart=n},activatePullToLoadMore:function(e,t,i,n){var o=this;o.__loadMoreHeight=e;o.__loadMoreActivate=t;o.__loadMoreDeactivate=i;o.__loadMoreStart=n},finishPullToRefresh:function(){var e=this;e.__refreshActive=false;if(e.__refreshDeactivate)e.__refreshDeactivate();e.scrollTo(e.__scrollLeft,e.__scrollTop,true)},finishPullToLoadMore:function(e){var t=this;t.__loadMoreActive=false;if(t.__loadMoreDeactivate)t.__loadMoreDeactivate();if(e)t.scrollTo(t.__scrollLeft,t.__scrollTop,true)},getValues:function(){var e=this;return{left:e.__scrollLeft,top:e.__scrollTop,zoom:e.__zoomLevel}},getScrollMax:function(){var e=this;return{left:e.__maxScrollLeft,top:e.__maxScrollTop}},zoomTo:function(e,i,n,o){var r=this;if(!r.options.zooming)throw new Error("Zooming is not enabled!");if(r.__isDecelerating){t.stop(r.__isDecelerating);r.__isDecelerating=false}var a=r.__zoomLevel;if(null==n)n=r.__clientWidth/2;if(null==o)o=r.__clientHeight/2;e=Math.max(Math.min(e,r.options.maxZoom),r.options.minZoom);r.__computeScrollMax(e);var s=(n+r.__scrollLeft)*e/a-n;var l=(o+r.__scrollTop)*e/a-o;if(s>r.__maxScrollLeft)s=r.__maxScrollLeft;else if(s<0)s=0;if(l>r.__maxScrollTop)l=r.__maxScrollTop;else if(l<0)l=0;r.__publish(s,l,e,i)},zoomBy:function(e,t,i,n){var o=this;o.zoomTo(o.__zoomLevel*e,t,i,n)},scrollTo:function(e,i,n,o){var r=this;if(r.__isDecelerating){t.stop(r.__isDecelerating);r.__isDecelerating=false}if(null!=o&&o!==r.__zoomLevel){if(!r.options.zooming)throw new Error("Zooming is not enabled!");e*=o;i*=o;r.__computeScrollMax(o)}else o=r.__zoomLevel;if(!r.options.scrollingX)e=r.__scrollLeft;else if(r.options.paging)e=Math.round(e/r.__clientWidth)*r.__clientWidth;else if(r.options.snapping)e=Math.round(e/r.__snapWidth)*r.__snapWidth;if(!r.options.scrollingY)i=r.__scrollTop;else if(r.options.paging)i=Math.round(i/r.__clientHeight)*r.__clientHeight;else if(r.options.snapping)i=Math.round(i/r.__snapHeight)*r.__snapHeight;e=Math.max(Math.min(r.__maxScrollLeft,e),0);i=Math.max(Math.min(r.__maxScrollTop,i),0);if(e===r.__scrollLeft&&i===r.__scrollTop)n=false;r.__publish(e,i,o,n)},scrollBy:function(e,t,i){var n=this;var o=n.__isAnimating?n.__scheduledLeft:n.__scrollLeft;var r=n.__isAnimating?n.__scheduledTop:n.__scrollTop;n.scrollTo(o+(e||0),r+(t||0),i)},doMouseZoom:function(e,t,i,n){var o=this;var r=e>0?.97:1.03;return o.zoomTo(o.__zoomLevel*r,false,i-o.__clientLeft,n-o.__clientTop)},doTouchStart:function(e,i){if(null==e.length)throw new Error("Invalid touch list: "+e);if(i instanceof Date)i=i.valueOf();if("number"!==typeof i)throw new Error("Invalid timestamp value: "+i);var n=this;n.__interruptedAnimation=true;if(n.__isDecelerating){t.stop(n.__isDecelerating);n.__isDecelerating=false;n.__interruptedAnimation=true}if(n.__isAnimating){t.stop(n.__isAnimating);n.__isAnimating=false;n.__interruptedAnimation=true}var o,r;var a=1===e.length;if(a){o=e[0].pageX;r=e[0].pageY}else{o=Math.abs(e[0].pageX+e[1].pageX)/2;r=Math.abs(e[0].pageY+e[1].pageY)/2}n.__initialTouchLeft=o;n.__initialTouchTop=r;n.__zoomLevelStart=n.__zoomLevel;n.__lastTouchLeft=o;n.__lastTouchTop=r;n.__lastTouchMove=i;n.__lastScale=1;n.__enableScrollX=!a&&n.options.scrollingX;n.__enableScrollY=!a&&n.options.scrollingY;n.__isTracking=true;n.__didDecelerationComplete=false;n.__isDragging=!a;n.__isSingleTouch=a;n.__positions=[]},doTouchMove:function(e,t,i){if(null==e.length)throw new Error("Invalid touch list: "+e);if(t instanceof Date)t=t.valueOf();if("number"!==typeof t)throw new Error("Invalid timestamp value: "+t);var n=this;if(!n.__isTracking)return;var o,r;if(2===e.length){o=Math.abs(e[0].pageX+e[1].pageX)/2;r=Math.abs(e[0].pageY+e[1].pageY)/2}else{o=e[0].pageX;r=e[0].pageY}var a=n.__positions;if(n.__isDragging){var s=o-n.__lastTouchLeft;var l=r-n.__lastTouchTop;var c=n.__scrollLeft;var u=n.__scrollTop;var d=n.__zoomLevel;var h=n.options.speedMultiplier;if(null!=i&&n.options.zooming){var f=d;d=d/n.__lastScale*i;d=Math.max(Math.min(d,n.options.maxZoom),n.options.minZoom);if(f!==d){var p=o-n.__clientLeft;var m=r-n.__clientTop;c=(p+c)*d/f-p;u=(m+u)*d/f-m;n.__computeScrollMax(d)}}if(n.__enableScrollX){c-=s*h;var g=n.__maxScrollLeft;if(c>g||c<0)if(n.options.bouncing)c+=s/2*h;else if(c>g)c=g;else c=0}if(n.__enableScrollY){u-=l*h;var v=n.__maxScrollTop;if(u>v||u<0)if(n.options.bouncing){u+=l/2*h;if(!n.__enableScrollX&&null!=n.__refreshHeight)if(!n.__refreshActive&&u<=-n.__refreshHeight){n.__refreshActive=true;if(n.__refreshActivate)n.__refreshActivate()}else if(n.__refreshActive&&u>-n.__refreshHeight){n.__refreshActive=false;if(n.__refreshDeactivate)n.__refreshDeactivate()}if(!n.__enableScrollX&&null!=n.__loadMoreHeight)if(!n.__loadMoreActive&&u>=n.__loadMoreHeight+v){n.__loadMoreActive=true;if(n.__loadMoreActivate)n.__loadMoreActivate()}else if(n.__loadMoreActive&&u<n.__loadMoreHeight+v){n.__loadMoreActive=false;if(n.__loadMoreDeactivate)n.__loadMoreDeactivate()}}else if(u>v)u=v;else u=0}if(a.length>60)a.splice(0,30);a.push(c,u,t);n.__publish(c,u,d)}else{var _=n.options.locking?3:0;var b=5;var w=Math.abs(o-n.__initialTouchLeft);var y=Math.abs(r-n.__initialTouchTop);n.__enableScrollX=n.options.scrollingX&&w>=_;n.__enableScrollY=n.options.scrollingY&&y>=_;a.push(n.__scrollLeft,n.__scrollTop,t);n.__isDragging=(n.__enableScrollX||n.__enableScrollY)&&(w>=b||y>=b);if(n.__isDragging)n.__interruptedAnimation=false}n.__lastTouchLeft=o;n.__lastTouchTop=r;n.__lastTouchMove=t;n.__lastScale=i},doTouchEnd:function(e){if(e instanceof Date)e=e.valueOf();if("number"!==typeof e)throw new Error("Invalid timestamp value: "+e);var t=this;if(!t.__isTracking)return;t.__isTracking=false;if(t.__isDragging){t.__isDragging=false;if(t.__isSingleTouch&&t.options.animating&&e-t.__lastTouchMove<=100){var i=t.__positions;var n=i.length-1;var o=n;for(var r=n;r>0&&i[r]>t.__lastTouchMove-100;r-=3)o=r;if(o!==n){var a=i[n]-i[o];var s=t.__scrollLeft-i[o-2];var l=t.__scrollTop-i[o-1];t.__decelerationVelocityX=s/a*(1e3/60);t.__decelerationVelocityY=l/a*(1e3/60);t.__decelerationVelocityY=Math.min(t.__decelerationVelocityY,70);var c=t.options.paging||t.options.snapping?4:1;if(Math.abs(t.__decelerationVelocityX)>c||Math.abs(t.__decelerationVelocityY)>c)if(!t.__refreshActive)t.__startDeceleration(e)}else t.event.fire("scrollingComplete")}else if(e-t.__lastTouchMove>100)t.event.fire("scrollingComplete")}if(!t.__isDecelerating)if(t.__refreshActive&&t.__refreshStart){t.__publish(t.__scrollLeft,-t.__refreshHeight,t.__zoomLevel,true);if(t.__refreshStart)t.__refreshStart()}else if(t.__loadMoreActive&&t.__loadMoreStart){t.__publish(t.__scrollLeft,t.__loadMoreHeight+t.__maxScrollTop,t.__zoomLevel,true);if(t.__loadMoreStart)t.__loadMoreStart()}else{if(t.__interruptedAnimation||t.__isDragging)t.event.fire("scrollingComplete");t.scrollTo(t.__scrollLeft,t.__scrollTop,true,t.__zoomLevel);if(t.__refreshActive){t.__refreshActive=false;if(t.__refreshDeactivate)t.__refreshDeactivate()}if(t.__loadMoreActive){t.__loadMoreActive=false;if(t.__loadMoreDeactivate)t.__loadMoreDeactivate()}}t.__positions.length=0},__publish:function(e,i,r,a){var s=this;var l=s.__isAnimating;if(l){t.stop(l);s.__isAnimating=false}var c=s.__scrollLeft;var u=s.__scrollTop;var d=s.__zoomLevel;var h=e-c;var f=i-u;var p=r-d;s.event.fire("scrolling",[e,i,h,f]);if(a&&s.options.animating){s.__scheduledLeft=e;s.__scheduledTop=i;s.__scheduledZoom=r;var m=function(e,t,i){if(i){s.__scrollLeft=c+h*e;s.__scrollTop=u+f*e;s.__zoomLevel=d+p*e;if(s.__callback)s.__callback(s.__scrollLeft,s.__scrollTop,s.__zoomLevel)}};var g=function(e){return s.__isAnimating===e};var v=function(e,t,i){if(t===s.__isAnimating)s.__isAnimating=false;if(s.__didDecelerationComplete||i)s.event.fire("scrollingComplete");if(s.options.zooming)s.__computeScrollMax()};s.__isAnimating=t.start(m,g,v,s.options.animationDuration,l?n:o)}else{s.__scheduledLeft=s.__scrollLeft=e;s.__scheduledTop=s.__scrollTop=i;s.__scheduledZoom=s.__zoomLevel=r;if(s.__callback)s.__callback(e,i,r);if(s.options.zooming)s.__computeScrollMax()}},__computeScrollMax:function(e){var t=this;if(null==e)e=t.__zoomLevel;t.__maxScrollLeft=Math.max(t.__contentWidth*e-t.__clientWidth,0);t.__maxScrollTop=Math.max(t.__contentHeight*e-t.__clientHeight,0)},__startDeceleration:function(e){var i=this;if(i.options.paging){var n=Math.max(Math.min(i.__scrollLeft,i.__maxScrollLeft),0);var o=Math.max(Math.min(i.__scrollTop,i.__maxScrollTop),0);var r=i.__clientWidth;var a=i.__clientHeight;i.__minDecelerationScrollLeft=Math.floor(n/r)*r;i.__minDecelerationScrollTop=Math.floor(o/a)*a;i.__maxDecelerationScrollLeft=Math.ceil(n/r)*r;i.__maxDecelerationScrollTop=Math.ceil(o/a)*a}else{i.__minDecelerationScrollLeft=0;i.__minDecelerationScrollTop=0;i.__maxDecelerationScrollLeft=i.__maxScrollLeft;i.__maxDecelerationScrollTop=i.__maxScrollTop}var s=function(e,t,n){i.__stepThroughDeceleration(n)};var l=i.options.snapping?4:.1;var c=function(){var e=Math.abs(i.__decelerationVelocityX)>=l||Math.abs(i.__decelerationVelocityY)>=l;if(!e)i.__didDecelerationComplete=true;return e};var u=function(e,t,n){i.__isDecelerating=false;if(i.__didDecelerationComplete)i.event.fire("scrollingComplete");i.scrollTo(i.__scrollLeft,i.__scrollTop,i.options.snapping)};i.__isDecelerating=t.start(s,c,u)},__stepThroughDeceleration:function(e){var t=this;var i=t.__scrollLeft+t.__decelerationVelocityX;var n=t.__scrollTop+t.__decelerationVelocityY;if(!t.options.bouncing){var o=Math.max(Math.min(t.__maxDecelerationScrollLeft,i),t.__minDecelerationScrollLeft);if(o!==i){i=o;t.__decelerationVelocityX=0}var r=Math.max(Math.min(t.__maxDecelerationScrollTop,n),t.__minDecelerationScrollTop);if(r!==n){n=r;t.__decelerationVelocityY=0}}if(!t.options.bouncingTop){var r=Math.max(Math.min(t.__maxDecelerationScrollTop,n),t.__minDecelerationScrollTop);if(r>n){n=r;t.__decelerationVelocityY=0}}if(e)t.__publish(i,n,t.__zoomLevel);else{t.__scrollLeft=i;t.__scrollTop=n}if(!t.options.paging){var a=.95;t.__decelerationVelocityX*=a;t.__decelerationVelocityY*=a}if(t.options.bouncing){var s=0;var l=0;var c=.03;var u=.08;if(i<t.__minDecelerationScrollLeft)s=t.__minDecelerationScrollLeft-i;else if(i>t.__maxDecelerationScrollLeft)s=t.__maxDecelerationScrollLeft-i;if(n<t.__minDecelerationScrollTop)l=t.__minDecelerationScrollTop-n;else if(n>t.__maxDecelerationScrollTop)l=t.__maxDecelerationScrollTop-n;if(0!==s)if(s*t.__decelerationVelocityX<=0)t.__decelerationVelocityX+=s*c;else t.__decelerationVelocityX=s*u;if(0!==l)if(l*t.__decelerationVelocityY<=0)t.__decelerationVelocityY+=l*c;else t.__decelerationVelocityY=l*u}}};for(var a in r)i.prototype[a]=r[a];return i});define("module/mobile/scroller/view",["tui/view","module/mobile/scroller/scroller"],function(e,t){window.globalPreventScroll=false;var i=navigator.userAgent.toLowerCase();var n=i.indexOf("msie")>-1;var o=i.indexOf("firefox")>-1;var r=i.indexOf("webkit")>-1;var a;if(r)a="webkit";else if(o)a="moz";else if(n)a="ms";var s=e.extend({initialize:function(e){e=$.extend({scrollingY:true,scrollingX:false,lazyLoad:false,scrollEl:false,lockScrollY:false},e||{});if(e.el){this.setElement(e.el);this.container=this.el.parentNode;delete e.el}else return;if(e.lazyLoad){this.lazyLoad=true;this.lazySize=e.lazySize||900}this.scrollEl=e.scrollEl;this.lockScrollY=e.lockScrollY||e.scrollingX&&!e.scrollingY;this.scroller=new t(this.update.bind(this),e);this.setContext();this.reflow();this.listen()},remove:function(){this.stopListen(true);this.scroller.event.unbind();this.scroller=null;s.superClass.remove.call(this)},update:function(e,t,i){t=Math.round(t);e=Math.round(e);this.el.style[a+"Transform"]=this.lastPos="translate3d("+-e+"px,"+-t+"px,0) scale("+i+")"},reflow:function(){var e=this.el;var t=this.container;var i=t.getBoundingClientRect();this.scroller.setDimensions(t.clientWidth,t.clientHeight,e.offsetWidth,e.offsetHeight);this.scroller.setPosition(i.left+t.clientLeft,i.top+t.clientTop);return this},listen:function(){var e=this.scrollEl?this.el:document;e.addEventListener("touchend",this.handlers.touchEnd,false);e.addEventListener("touchmove",this.handlers.touchMove,false);e.addEventListener("touchcancel",this.handlers.touchEnd,false);this.container.addEventListener("touchstart",this.handlers.touchStart,false);this.scroller.event.bind("scrollingComplete",this.handlers.scrollComplete);this.lazyLoad&&this.scroller.event.bind("scrolling",this.handlers.scrolling);this.lastPos&&(this.el.style[a+"Transform"]=this.lastPos);return this},stopListen:function(e){var t=this.scrollEl?this.el:document;t.removeEventListener("touchend",this.handlers.touchEnd,false);t.removeEventListener("touchmove",this.handlers.touchMove,false);t.removeEventListener("touchcancel",this.handlers.touchEnd,false);this.container.removeEventListener("touchstart",this.handlers.touchStart,false);this.scroller.event.unbind("scrollingComplete",this.handlers.scrollComplete);this.lazyLoad&&this.scroller.event.unbind("scrolling",this.handlers.scrolling);if(e)this.el.style[a+"Transform"]=""},setContext:function(){this.handlers=this.handlers||{};this.handlers.winResize=this.winResize.bind(this);this.handlers.touchStart=this.touchStart.bind(this);this.handlers.touchMove=this.touchMove.bind(this);this.handlers.touchEnd=this.touchEnd.bind(this);this.handlers.scrolling=this.scrolling.bind(this);this.handlers.scrollComplete=this.scrollComplete.bind(this)},winResize:function(){this.reflow()},checkScroll:function(e){if(!this.lockScrollY)return;var t=e.touches[0];var i=t.pageX||0;var n=t.pageY||0;var o=Math.abs(i-this._touch.x1);var r=Math.abs(n-this._touch.y1);if(o>1.5*r)this._locked=true;else this._locked=false},touchStart:function(e){this._locked=false;this._touchmove=0;var t=e.touches[0];if(t&&t.target&&t.target.tagName&&t.target.tagName.match(/input|textarea|select/i))return;this._touch=this._touch||{};this._touch.x1=t.pageX||0;this._touch.y1=t.pageY||0;this.scroller.doTouchStart(e.touches,e.timeStamp);this.fire("touchstart",[e])},touchMove:function(e){if(window.globalPreventScroll)return;if(0===this._touchmove){this._touchmove++;this.checkScroll(e);if(this._locked)document.addEventListener("touchmove",this.preventMove)}if(this.lockScrollY){e.stopPropagation();e.preventDefault();if(this._locked)this.scroller.doTouchMove(e.touches,e.timeStamp,e.scale)}else this.scroller.doTouchMove(e.touches,e.timeStamp,e.scale)},touchEnd:function(e){if(this._locked){e.stopPropagation();document.removeEventListener("touchmove",this.preventMove)}this._locked=false;this._touchmove=0;this._touch=null;this.scroller.doTouchEnd(e.timeStamp);this.fire("touchend",[e])},preventMove:function(e){e.preventDefault()},scrolling:function(e,t,i,n){this._checkLazyZone(t,n)},scrollTo:function(e,t,i,n){this.scroller.scrollTo(e,t,i,n)},scrollComplete:function(){this.trigger&&this.trigger("scrollComplete",[this.scroller])},pullRefresh:function(e,t,i,n){this.scroller.activatePullToRefresh(e,t,i,n)},pullLoadMore:function(e,t,i,n){this.scroller.activatePullToLoadMore(e,t,i,n)},lazyLoadImage:function(e){var t=this.find(".lazyImg");var i=this.lazyZone={};var n=this.$el.height();for(var o=0,r=t.length;o<r;o++){var a=t[o];var s=$(a).offset().top||$(a).parents(":visible").offset().top||0;if(s<0)s+=n;s-=s%this.lazySize;i[s]=i[s]||[];i[s].push(a)}e=e||0;e-=e%this.lazySize;this._loadLazyImage(e)},_checkLazyZone:function(){var e=this.lazyZone;var t=top-top%this.lazySize;if(top>t&&top<t+this.lazySize){var i=dt>0?t+this.lazySize:t;this._loadLazyImage(i)}},_loadLazyImage:function(e){var t=this.lazyZone[e];if(t){for(var i=0,n=t.length;i<n;i++){var o=$(t[i]);o.attr("src",o.attr("data-lazy"));o.removeAttr("data-lazy");o.removeClass("lazyImg")}delete this.lazyZone[e]}}});return s});define("tui/model",["tui/event"],function(e){function t(e){if(Array.isArray(e))return $.extend(true,{},{list:e}).list;return $.extend(true,{},e)}function i(e){var t=e instanceof r?[]:{};e.each(function(e,n){if(n instanceof r||n instanceof o)t[e]=i(n);else t[e]=n});return t}function n(e,t,i){var o=Array.isArray(e)?new i(e):new t(e);o.each(function(e,r){if(Array.isArray(r)||$.isPlainObject(r)){r=n(r,t,i);o._data[e]=r;if(r instanceof i||r instanceof t)r._parent=o}});return o}var o=e.extend({model:null,list:null,initialize:function(e){var i=this;o.superClass.initialize.call(i);i._parent=null;e=e?t(e):{};i._data=i.defaults?$.extend({},i.defaults,e):e;null==i.model&&(i.model=o);null==i.list&&(i.list=r)},each:function(e){var t=this;$.each(t._data,e);return t},key:function(e){var t;this.each(function(i,n){if(n===e){t=i;return false}});return t},get:function(e){if(void 0===e)return this._data;return this._data[e]},toJSON:function(){return i(this)},set:function(e,t){var i=this;if("object"==typeof e)$.each(e,function(e,t){i._set(e,t)});else i._set(e,t);return i._bindChangeEvent()},replace:function(e){return this._replace(e)},remove:function(e){var t=this;if(void 0===e){if(t._parent)t._parent.remove(t._parent.key(t));t._data=Array.isArray(t._data)?[]:{};if(t._parent)t.trigger("change",[]);else t._bindChangeEvent();return t}var i=t.get(e);if(Array.isArray(t._data))t._data.splice(e,1);else delete t._data[e];t._bindEvent("remove",e,i);return t._bindChangeEvent()},toModel:function(e){return this._toModel(e)},_set:function(e,t){var i=this;var n=void 0===i.get(e)?"add":"update";var o=i.get(e);var t=i._toModel(t);if(t===o)return;i._data[e]=t;return i._bindEvent(n,e,t,o)},_replace:function(e,t){var i=this;var n,o;var r=[];if(t){n=i.size();o="concat"}else{n=0;o="replace";i._data=Array.isArray(i._data)?[]:{}}$.each(e,function(e,t){r.push(i._data[n+e]=i._toModel(t))});setTimeout(function(){i.trigger(o,[e,r])},0);return i._bindChangeEvent()},_toModel:function(e){var t=this;if(Array.isArray(e)||$.isPlainObject(e))e=n(e,t.model,t.list);if(e instanceof r||e instanceof o)e._parent=t;return e},_bindChangeEvent:function(){var e=this;e.trigger("change",[]);if(e._parent)e._parent._bindChangeEvent();return e},_bindUpdateEvent:function(e){var t=this;t.trigger("update",[t.key(e),e]);if(t._parent)t._parent._bindUpdateEvent(t);return t},_bindEvent:function(e,t){var i=this;var n=$.makeArray(arguments).slice(2);i.trigger(e+":"+t,n);i.trigger("change:"+t,n);i.trigger(e,[t].concat(n));if(i._parent)i._parent._bindUpdateEvent(i);return i}});var r=o.extend({initialize:function(e){var i=this;r.superClass.initialize.call(i);i._data=e?t(e):[]},size:function(){return this._data.length},first:function(){return this._data[0]},last:function(){return this._data[this.size()-1]},where:function(e,t){var i=this;var n=[];i.each(function(i,o){var r=0;var a=0;$.each(e,function(e,i){if(t&&o.get(e)===i||!t&&o.get(e)==i)r++;a++});if(r===a)n.push(o)});return n},push:function(e){return this._insert(this.size(),e,"push")},unshift:function(e){return this._insert(0,e,"unshift")},insert:function(e,t){return this._insert(e,t,"insert")},concat:function(e){return this._replace(e,true)},pop:function(){return this.remove(this.size()-1)},shift:function(){return this.remove(0)},sort:function(e){this._data.sort(e);return this._bindChangeEvent()},_insert:function(e,t,i){var n=this;n._data.splice(e,0,void 0);n._set(e,t);n.trigger(i,[e,t]);return n._bindChangeEvent()}});o.List=r;return o});define("module/mobile/sidebar/sidebar",["tui/net","tui/view","tui/model","tui/cookie","tui/browser","tui/template","tui/util/url","module/domain","module/login/login","module/mobile/login/login","module/mobile/scroller/view","module/mobile/sidebar/user-model","module/mobile/sidebar/sub-model"],function(e,t,i,n,o,r,a,s,l,c,u,d,h){var f=$(window);var p=$(document.body);var m=a.params(window.location.href);var g={expires:365,domain:"tudou.com",path:"/"};var v=null;var _=0;var b='<div class="g-side-bg"></div>\n<div class="g-side-scroll" id="gSideScroll">\n<div class="g-sideusr" id="gSideUser"></div>\n<div class="g-sidenav" id="gSideNav">\n<ul class="navi-list navi-menu">\n<li class="navi-ch-all"><a href="#" id="gSideNavBtn"><i class="icon-menu"></i>导航<b><i class="icon-arr-down"></i></b></a></li>\n</ul>\n<ul class="navi-chs" id="gSideEntry">\n<li><a href="<%=Url.cartoon%>/?from=sidebar">动漫</a></li>\n<li><a href="<%=Url.tv%>/?from=sidebar">电视剧</a></li>\n<li><a href="<%=Url.movie%>/?from=sidebar">电影</a></li>\n<li><a href="<%=Url.zy%>/?from=sidebar">综艺</a></li>\n<li><a href="<%=Url.music%>/?from=sidebar">音乐</a></li>\n<li><a href="<%=Url.imake%>/?from=sidebar">原创</a></li>\n<li><a href="<%=Url.news%>/?from=sidebar">热点</a></li>\n<li><a href="<%=Url.korea%>/?from=sidebar">韩娱</a></li>\n<li><a href="<%=Url.fun%>/?from=sidebar">搞笑</a></li>\n<li><a href="<%=Url.game%>/?from=sidebar">游戏</a></li>\n<li><a href="<%=Url.ent%>/?from=sidebar">娱乐</a></li>\n<li><a href="<%=Url.fashion%>/?from=sidebar">时尚</a></li>\n<li><a href="<%=Url.sports%>/?from=sidebar">体育</a></li>\n<li><a href="<%=Url.jilupian%>/?from=sidebar">纪实</a></li>\n<li><a href="<%=Url.auto%>/?from=sidebar">汽车</a></li>\n<li><a href="<%=Url.it%>/?from=sidebar">科技</a></li>\n<li><a href="<%=Url.life%>/?from=sidebar">乐活</a></li>\n<li><a href="<%=Url.edu%>/?from=sidebar">成长</a></li>\n<li><a href="<%=Url.main%>/list/index.html?from=sidebar">片库</a></li>\n<li><a href="<%=Url.main%>/top/rank.html?from=sidebar">排行榜</a></li>\n<li><a href="http://m.tudou.com/touch/download" target="_blank" id="gSideAppDownload">APP</a></li>\n</ul>\n<ul class="navi-list">\n<li><a href="<%=Url.main%>/watch/?from=sidebar" id="gSideMySub"><i class="icon-rss"></i>我的订阅<b id="gSideMySubCount" class="count"></b></a></li>\n<li><a href="<%=Url.main%>/watch/favorite/?from=sidebar" id="gSideMyFav"><i class="icon-collect"></i>我的收藏<b id="gSideMyFavCount"></b></a></li>\n<li><a href="<%=Url.main%>/watch/history/?from=sidebar" id="gSideHistory"><i class="icon-history"></i>观看记录<b></b></a></li>\n</ul>\n<div id="gSideSubList">\n<div class="navi-subtitle subtitle"><%if(isLogin) {%>订阅列表<%} else {%>推荐列表<%}%></div>\n<ul class="navi-list navi-sublist sublistpart"></ul>\n<ul class="navi-list navi-sublist sublistall" style="display:none;"></ul>\n<div class="navi-submore">显示全部</div>\n</div>\n<div class="navi-subset"><a href="<%=Url.main%>/watch/subscribe/?type=manage&from=sidebar"><i class="icon-setting"></i>管理订阅</a></div>\n<div class="navi-more" id="gSideMore"></div>\n</div>\n</div>\n';var w="ipad"==o.iOS?300:260;var y=t.extend({el:$("#gSideBar"),events:{"click .navi-ch-all":"toggleEntry"},initialize:function(){var e=this;e.isFixed=o.iOS&&o.iOSVersion[0]<5?false:true;e.isOpen=m.sidebar&&true||false;e.render();if(e.isOpen)setTimeout(function(){e.open()},1e3);e._setContext();e.scroll=new u({el:this.$el.find("#gSideScroll"),scrollEl:true});var t=e.scroll.scroller;document.addEventListener("touchstart",e.handlers.touchStart,false);window.addEventListener("orientationchange",e.handlers.orientationChange,false);this.$sideBarBtn=$("#gTop .g-btn-sidebar");this.$sideBarBtn.bind("click",this.toggle.bind(this))},remove:function(){document.removeEventListener("touchstart",this.handlers.touchStart,false);window.removeEventListener("orientationchange",this.handlers.orientationChange,false);this.$sideBarBtn.unbind("click");this.scroll.remove();this.scroll=null;this.handlers=null;y.superClass.remove.call(this)},render:function(){var e=this;if(o.android)$(".g-side-ani").removeClass("g-side-ani").addClass("g-side-open");if(o.iOS)this.$el.addClass("g-sidebar-ani");if(!this.isFixed)this.$el.css("position","absolute");this.$el.html(r.convertTpl(b,{Url:s.url,iOS:o.iOS,isLogin:l.uid()}));this.$entry=this.find("#gSideEntry");this.userMod=new d;this.userMod.render();this.subMod=new h;this.subMod.render();c.bind("after:login",function(){e.$entry.removeClass("navi-chs-sec");e.scroll.reflow()});c.bind("after:logout",function(){e.$entry.addClass("navi-chs-sec");e.scroll.reflow()});this.subMod.bind("getsublist:success",function(t){e.scroll.reflow();e.albumUpCount=t.updateCount.album});this.subMod.bind("getremlist:success",function(){e.scroll.reflow()});this.subMod.bind("subListChange",function(){e.scroll.reflow()});return this},open:function(e){if(this.isLock||this.isAnimate)return;this.trigger("sideBar:open");document.addEventListener("touchmove",S,false);p.addClass("g-sidebar-on g-sidebar-disp");if(!this.isFixed)this.$el.css("top",f.scrollTop());this.scroll.reflow();this.isOpen=true;this.isAnimate=true;this.toggleTimer=setTimeout(function(){this.isAnimate=false}.bind(this),470)},close:function(){if(this.isLock||this.isAnimate)return;this.trigger("sideBar:close");this.isAnimate=true;p.removeClass("g-sidebar-on");window.globalPreventScroll=true;this.toggleTimer=setTimeout(function(){this.isOpen=false;this.isAnimate=false;p.removeClass("g-sidebar-disp");window.globalPreventScroll=false;document.removeEventListener("touchmove",S,false)}.bind(this),470)},lock:function(e){this.isLock=void 0==e?true:!!e},toggle:function(e){if(e)e.preventDefault();if(this.isOpen)this.close();else this.open()},toggleEntry:function(e){e.preventDefault();var t=this;if(t.$entry.hasClass("navi-chs-on"))t.$entry.removeClass("navi-chs-on");else t.$entry.addClass("navi-chs-on");setTimeout(function(){t.scroll.reflow()},300)},orientationChange:function(){if(this.isOpen){window.scrollTo(0,f.scrollTop());if(!this.isFixed)this.$el.css("top",f.scrollTop())}},getMore:function(){},_setContext:function(){this.handlers=this.handlers||{};this.handlers.touchStart=this._touchStart.bind(this);this.handlers.touchMove=this._touchMove.bind(this);this.handlers.touchEnd=this._touchEnd.bind(this);this.handlers.orientationChange=this.orientationChange.bind(this)},_checkScroll:function(e){var t=e.touches[0];var i=(t.pageX||0)-(this._touch.x1||0);var n=(t.pageY||0)-(this._touch.y1||0);var o=Math.abs(i);var r=Math.abs(n);if(o>1.5*r)this._locked=true;else this._locked=false;this._swipe=i>0?"right":"left"},_touchStart:function(e){this._locked=false;this._touchmove=0;if(this.isLock)return;if(o.android&&this.isOpen){_++;if(v)clearTimeout(v);v=setTimeout(function(){_=0;v=null},500);if(_>1){e.preventDefault();return}}var t=e.touches[0];if(t&&t.target&&t.target.tagName&&t.target.tagName.match(/input|textarea|select/i))return;if($(e.target).parents("[swipe-sidebar=disable]")[0]){if(this.isOpen){this.close();e.preventDefault();x(e,"sidebarClose")}return}if(o.iOS&&o.iOSVersion[0]>=7)if(t.pageX<17){this._touchmove=-1;return}this._touch=this._touch||{};this._touch.x1=t.pageX||0;this._touch.y1=t.pageY||0;this._touch.tm=+new Date;document.addEventListener("touchmove",this.handlers.touchMove,false);if(this.isOpen&&this._touch.x1>w){e.preventDefault();e.stopPropagation();setTimeout(function(){this.close();x(e,"sidebarClose")}.bind(this),0);window.globalPreventScroll=true;setTimeout(function(){window.globalPreventScroll=false},500);return}if(this._touch.y1<=40||this.isOpen&&this._touch.x1<w)return;document.addEventListener("touchend",this.handlers.touchEnd,false);document.addEventListener("touchcancel",this.handlers.touchEnd,false)},_touchMove:function(e){if(0===this._touchmove){this._touchmove++;this._checkScroll(e)}if(this.isOpen||this.isAnimate||window.globalPreventScroll)e.preventDefault();if(this._locked){e.preventDefault();window.globalPreventScroll=true;setTimeout(function(){window.globalPreventScroll=false},500);if("right"==this._swipe){this.isOpen=true;setTimeout(function(){this.open();x(e,"sidebarOpen")}.bind(this),0)}}},_touchEnd:function(e){document.removeEventListener("touchend",this.handlers.touchEnd,false);document.removeEventListener("touchmove",this.handlers.touchMove,false);document.removeEventListener("touchcancel",this.handlers.touchEnd,false)}});var k=null;y.get=function(){return k};y.create=function(){if(!k){k=new y;k.lock(false)}else{k.subMod.subUpdate();k.userMod.render()}return k};y.remove=function(){if(k){k.remove();k=null}};y.isOpen=function(){if(k)return k.isOpen};function S(e){e.preventDefault()}function x(e,t,i){e||(e={});var n=document.createDocumentFragment("div");n.id=t;e.target=n;e.pageX=0;e.pageY=0;window.tudouClickStat.send(e,i||{},function(){},true)}return y});define("module/mobile/search/search",["tui/view","tui/net","tui/storage","tui/util","tui/art","tui/browser","module/domain","module/mobile/sidebar/sidebar"],function(e,t,i,n,o,r,a,s){var l=!!window.PageX;var c=e.extend({events:{"focus .g-search-kw":"action","click .g-search-btn":"soku","click .g-search-cancel":"close","click .g-search-suggest li a":"fill","click .g-search-history li a":"fill","click .g-search-hot li a":"fill","click .g-search-clear":"clear"},initialize:function(){var e=this;
var t=s.create();window.searching=false;this.setElement($(".g-top").eq(-1));var n='<div class="g-search <%if(isPad){%>g-search-pad<%}%>" id="gTopSearch">\n<form class="g-search-form" target="_blank" action="http://www.soku.com/m/t/video" method="get">\n<span class="g-search-cancel">取消</span>\n<span class="g-search-input"><input name="q" id="g-search-kw" class="g-search-kw" type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></span>\n<span class="g-search-btn"><i class="icon-search"></i></span>\n</form>\n<div id="g-search-ex" class="g-search-ex">\n<div id="g-search-suggest" class="g-search-suggest">\n<ul></ul>\n</div>\n<div id="g-search-hot" class="g-search-hot">\n<h3>搜索热词</h3>\n<ul></ul>\n</div>\n<div id="g-search-history" class="g-search-history">\n<h3>搜索历史</h3>\n<ul></ul>\n<span><button id="g-search-clear" class="g-search-clear" type="button">清空历史记录</button></span>\n</div>\n</div>\n</div>';var a=o.compile(n)({isPad:r.isPad});this.$el.append(a);this.$win=$(window);this.$body=$(document.body);this.$form=this.find(".g-search-form");this.$kw=this.find(".g-search-kw");this.$btn=this.find(".g-search-btn");this.$cancel=this.find(".g-search-cancel");this.$suggest=this.find(".g-search-suggest");this.$hot=this.find(".g-search-hot");this.$history=this.find(".g-search-history");this.curDOM=null;this.localStorage=new i;t.bind("sideBar:open",function(){e.close()});if(r.isPad)document.addEventListener("touchstart",e.touchStart.bind(this),false);this.$form.submit(this.soku.bind(this))},action:function(){if(s.isOpen()){this.$kw.blur();return false}var e=this.$form.hasClass("current");if(!e){this.suggest();this.hot();this.history();this.$form.addClass("current");this.trigger("search:open");window.searching=true}},close:function(){var e=this;var t=this.$form.hasClass("current");if(t){this.$form.removeClass("current");this.$suggest.hide();this.$hot.hide();this.$history.hide();this.$kw.val("");this.trigger("search:close");window.searching=false}},touchStart:function(e){var t=this;t.curDOM=$(e.target);if(0==t.curDOM.closest("#gTopSearch").length){t.$kw.blur();t.close()}},suggest:function(){var e=this;this.$kw.bind("keyup",function(t){if(13===t.keyCode)return false;var i=$.trim(e.$kw.val());if(""!=i)$.getJSON(a.domain.hint+"?query="+encodeURIComponent(i)+"&site=52&h="+(new Date).getHours()+"&jsoncallback=?",function(t){if(t.r.length>=1){var i=[];$.each(t.r,function(e,t){switch(t.k){case 1:i.push('<li><a data-search="'+t.c+'" href="#">'+t.c+'</a><a class="i-icon i-play" tui-page-x="true" target="_blank" href="'+t.u[0].k+'"><i class="icon-play"></i></a><a class="i-icon i-search" data-search="'+t.c+'" target="_blank" href="#"><i class="icon-search"></i></a></li>');break;case 2:i.push('<li><a data-search="'+t.c+'" href="#">'+t.c+'</a><a class="i-icon i-userpic" target="_blank" href="'+t.u[0].u+'" style="background-image:url('+t.u[0].p+');"></a><a class="i-icon i-search" data-search="'+t.c+'" target="_blank" href="#"><i class="icon-search"></i></a></li>');break;default:i.push('<li><a data-search="'+t.c+'" href="#">'+t.c+'</a><a class="i-icon i-search" data-search="'+t.c+'" target="_blank" href="#"><i class="icon-search"></i></a></li>')}});e.$suggest.find("ul").html(i.join(""));e.$suggest.show()}else e.$suggest.hide()});else e.$suggest.hide()})},hot:function(){var e=this;var i=window.SUBDOMAIN||"www";var n=[];window._initHeader=function(t){if(t&&t.sk.length>0){$.each(t.sk,function(e,t){n.push('<li><a data-search="'+t[0]+'" target="_blank" href="#">'+t[0]+"</a></li>")});e.$hot.find("ul").html(n.join(""));e.$hot.show()}};t.getScript(a.domain.main+"/util/tools/"+i+"_hd.txt",{charset:"gbk"})},history:function(){var e=this;this.localStorage.getItem("seach-history",function(t){e.sh=t||"";if(""!=e.sh){var i=[];$.each(e.sh.split(","),function(e,t){i.push('<li><a data-search="'+t+'" target="_blank" href="#">'+t+"</a></li>")});e.$history.find("ul").html(i.join(""));e.$history.show()}})},fill:function(e){e.preventDefault();var t=$(e.target);if(!t.attr("tui-page-x"))if(t.attr("data-search")){this.$kw.val(t.attr("data-search"));this.soku()}else n.openURL(t.attr("href"));else if(!l)n.openURL(t.attr("href"))},clear:function(e){e.preventDefault();this.localStorage.removeItem("seach-history");this.$history.hide()},soku:function(e){e&&e.preventDefault();var t=this;var i=$.trim(this.$kw.val());if(""!=i){if(this.sh){var o=this.sh.split(",");var r=$.inArray(i,o);if(r>-1)o.splice(r,1);o.unshift(i);if(o.length>10)o.pop();this.sh=o.join(",")}else this.sh=i;n.openURL("http://www.soku.com/t/nisearch/"+i+"/","_blank");try{this.localStorage.setItem("seach-history",this.sh)}catch(a){}}}});return c});define("module/stat/iwt",[],function(e,t){_iwt_no_flash=window._iwt_no_flash||0;var i="UA-tudou-000001";!function(e,t,n){var o=false,r=!-[1],a="http://irs01.com/irt?_iwt_id=",s="http://irs01.net/MTFlashStore.swf#",l="http://irs01.com/_iwt.gif",c="_iwt_id",u="_iwt_cid",d="",h="",f="",p=t.getElementsByTagName("head")[0],m={available:false,guid:function(){return["MT",(+new Date+g++).toString(36),(1e18*Math.random()).toString(36)].join("").slice(0,16).toUpperCase()},get:function(e,t){return m._sendFlashMsg(t,"jGetItem",e)},set:function(e,t,i){return m._sendFlashMsg(i,"jSetItem",e,t)},clear:function(e,t){return m._sendFlashMsg(t,"jClearItem",e)},clearAll:function(e){return m._sendFlashMsg(e,"jClearAllItems")},_sendFlashMsg:function(t,i,n,o){t=t||x;var r=m.guid();e[r]=t;if(y&&y[i])switch(arguments.length){case 2:y[i](r);break;case 3:y[i](n,r);break;case 4:y[i](n,o,r)}},initSWF:function(e,t){if(!m.available)return t&&t();if(m.inited)return e&&setTimeout(e,0);e&&v.push(e);t&&_.push(t)}},g=1,v=[],_=[],b="",w,y,$,k=t.createElement("DIV"),S=m.guid();function x(){}function T(t){if(o)if(e.console&&e.console.log)e.console.log("MTFlashStore:"+t)}if(!e._iwt_no_flash){try{w=e.navigator.plugins["Shockwave Flash"]||e.ActiveXObject;b=w.description||function(){return new w("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}()}catch(M){}b=(b.match(/\d+/g)||[0])[0];if(b<9)m.available=false;else{m.available=true;e[S]=function(t,i){switch(t){case"onecall":if(!e[i])return;e[i].apply(e,[].slice.call(arguments,2));delete e[i];break;case"error":m.available=false;while($=_.shift())$();T(i);break;case"load":T("Flash load success!");m.inited=true;m.available=true;while($=v.shift())setTimeout($,0)}};function L(){k.setAttribute("style","display:block;clear:both;float:none;position:absolute;right:0;bottom:0;border:none;");if(t.body.firstChild)t.body.insertBefore(k,t.body.firstChild);else t.body.appendChild(k);k.innerHTML='<object id="'+m.guid()+(r?' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ':"")+'" data="'+s+'" type="application/x-shockwave-flash" '+' width="10" height="10" style="position:absolute;right:0;bottom:0;border:none;" >'+'<param name="movie" value="'+s+'" />'+'<param name="wmode" value="transparent" />'+'<param name="version" value="10" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="flashvars" value="jsproxyfunction='+S+'" />'+"</object>";y=k.firstChild;m.swf=y}var C=setInterval(function(){if(t.body){L();clearInterval(C)}},100)}}var D={track:function(){if(!m.available){if(""!=this._getQueryStrByName(u))f=a+"&_iwt_cid="+this._getQueryStrByName(u)+"&_iwt_UA="+this._getUAId();else f=a+"&_iwt_UA="+this._getUAId();U(f,function(e){var t=e;d=e})}else{m.initSWF(z);setTimeout(function(){if(!m.inited){m.available=false;e[S]=x;D.track()}},3e3)}},record_video_api:function(e,t,i,n){if("0"==n+""){h=this._getHashId();this._feedBack_video(e,t,i,n);return}this._feedBack_video(e,t,i,n)},_feedBack_video:function(e,t,i,n){var o=["ta="+n,"eid="+h,"pt="+encodeURIComponent(document.title),"vid="+e,"du="+t,"la="+i,"_iwt_id="+d,"_iwt_UA="+this._getUAId(),"r="+(new Date).getTime()].join("&");var r=l+"?"+o;this._img=new Image;this._img.src=r},_getHashId:function(){var e=location.href,t=(new Date).valueOf(),i=navigator.userAgent,n="";n=this._md5([location.host,e,i,t,Math.random()].join(""));return n},_getUAId:function(){if("undefined"==typeof i)return"";return i},_getQueryStrByName:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)","i"));if(null==t||t.length<1)return"";return t[1]},_getCookie:function(e){var t,i,n,o=document.cookie.split(";");for(t=0;t<o.length;t++){i=o[t].substr(0,o[t].indexOf("="));n=o[t].substr(o[t].indexOf("=")+1);i=i.replace(/^\s+|\s+$/g,"");if(i==e)return unescape(n)}},getReferrer:function(){var e="";try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(i){e=""}}if(""==e)e=document.referrer;return e},_md5:function(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,n,o,r,a;o=2147483648&e;r=2147483648&t;i=1073741824&e;n=1073741824&t;a=(1073741823&e)+(1073741823&t);if(i&n)return 2147483648^a^o^r;if(i|n)if(1073741824&a)return 3221225472^a^o^r;else return 1073741824^a^o^r;else return a^o^r}function n(e,t,i){return e&t|~e&i}function o(e,t,i){return e&i|t&~i}function r(e,t,i){return e^t^i}function a(e,t,i){return t^(e|~i)}function s(e,o,r,a,s,l,c){e=i(e,i(i(n(o,r,a),s),c));return i(t(e,l),o)}function l(e,n,r,a,s,l,c){e=i(e,i(i(o(n,r,a),s),c));return i(t(e,l),n)}function c(e,n,o,a,s,l,c){e=i(e,i(i(r(n,o,a),s),c));return i(t(e,l),n)}function u(e,n,o,r,s,l,c){e=i(e,i(i(a(n,o,r),s),c));return i(t(e,l),n)}function d(e){var t;var i=e.length;var n=i+8;var o=(n-n%64)/64;var r=16*(o+1);var a=Array(r-1);var s=0;var l=0;while(l<i){t=(l-l%4)/4;s=8*(l%4);a[t]=a[t]|e.charCodeAt(l)<<s;l++}t=(l-l%4)/4;s=8*(l%4);a[t]=a[t]|128<<s;a[r-2]=i<<3;a[r-1]=i>>>29;return a}function h(e){var t="",i="",n,o;for(o=0;o<=3;o++){n=255&e>>>8*o;i="0"+n.toString(16);t+=i.substr(i.length-2,2)}return t}function f(e){e=e.replace(/\r\n/g,"\n");var t="";for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n<128)t+=String.fromCharCode(n);else if(n>127&&n<2048){t+=String.fromCharCode(192|n>>6);t+=String.fromCharCode(128|63&n)}else{t+=String.fromCharCode(224|n>>12);t+=String.fromCharCode(128|63&n>>6);t+=String.fromCharCode(128|63&n)}}return t}var p=Array();var m,g,v,_,b,w,y,$,k;var S=7,x=12,T=17,M=22;var L=5,C=9,D=14,E=20;var A=4,I=11,z=16,U=23;var O=6,R=10,j=15,P=21;e=f(e);p=d(e);w=1732584193;y=4023233417;$=2562383102;k=271733878;for(m=0;m<p.length;m+=16){g=w;v=y;_=$;b=k;w=s(w,y,$,k,p[m+0],S,3614090360);k=s(k,w,y,$,p[m+1],x,3905402710);$=s($,k,w,y,p[m+2],T,606105819);y=s(y,$,k,w,p[m+3],M,3250441966);w=s(w,y,$,k,p[m+4],S,4118548399);k=s(k,w,y,$,p[m+5],x,1200080426);$=s($,k,w,y,p[m+6],T,2821735955);y=s(y,$,k,w,p[m+7],M,4249261313);w=s(w,y,$,k,p[m+8],S,1770035416);k=s(k,w,y,$,p[m+9],x,2336552879);$=s($,k,w,y,p[m+10],T,4294925233);y=s(y,$,k,w,p[m+11],M,2304563134);w=s(w,y,$,k,p[m+12],S,1804603682);k=s(k,w,y,$,p[m+13],x,4254626195);$=s($,k,w,y,p[m+14],T,2792965006);y=s(y,$,k,w,p[m+15],M,1236535329);w=l(w,y,$,k,p[m+1],L,4129170786);k=l(k,w,y,$,p[m+6],C,3225465664);$=l($,k,w,y,p[m+11],D,643717713);y=l(y,$,k,w,p[m+0],E,3921069994);w=l(w,y,$,k,p[m+5],L,3593408605);k=l(k,w,y,$,p[m+10],C,38016083);$=l($,k,w,y,p[m+15],D,3634488961);y=l(y,$,k,w,p[m+4],E,3889429448);w=l(w,y,$,k,p[m+9],L,568446438);k=l(k,w,y,$,p[m+14],C,3275163606);$=l($,k,w,y,p[m+3],D,4107603335);y=l(y,$,k,w,p[m+8],E,1163531501);w=l(w,y,$,k,p[m+13],L,2850285829);k=l(k,w,y,$,p[m+2],C,4243563512);$=l($,k,w,y,p[m+7],D,1735328473);y=l(y,$,k,w,p[m+12],E,2368359562);w=c(w,y,$,k,p[m+5],A,4294588738);k=c(k,w,y,$,p[m+8],I,2272392833);$=c($,k,w,y,p[m+11],z,1839030562);y=c(y,$,k,w,p[m+14],U,4259657740);w=c(w,y,$,k,p[m+1],A,2763975236);k=c(k,w,y,$,p[m+4],I,1272893353);$=c($,k,w,y,p[m+7],z,4139469664);y=c(y,$,k,w,p[m+10],U,3200236656);w=c(w,y,$,k,p[m+13],A,681279174);k=c(k,w,y,$,p[m+0],I,3936430074);$=c($,k,w,y,p[m+3],z,3572445317);y=c(y,$,k,w,p[m+6],U,76029189);w=c(w,y,$,k,p[m+9],A,3654602809);k=c(k,w,y,$,p[m+12],I,3873151461);$=c($,k,w,y,p[m+15],z,530742520);y=c(y,$,k,w,p[m+2],U,3299628645);w=u(w,y,$,k,p[m+0],O,4096336452);k=u(k,w,y,$,p[m+7],R,1126891415);$=u($,k,w,y,p[m+14],j,2878612391);y=u(y,$,k,w,p[m+5],P,4237533241);w=u(w,y,$,k,p[m+12],O,1700485571);k=u(k,w,y,$,p[m+3],R,2399980690);$=u($,k,w,y,p[m+10],j,4293915773);y=u(y,$,k,w,p[m+1],P,2240044497);w=u(w,y,$,k,p[m+8],O,1873313359);k=u(k,w,y,$,p[m+15],R,4264355552);$=u($,k,w,y,p[m+6],j,2734768916);y=u(y,$,k,w,p[m+13],P,1309151649);w=u(w,y,$,k,p[m+4],O,4149444226);k=u(k,w,y,$,p[m+11],R,3174756917);$=u($,k,w,y,p[m+2],j,718787259);y=u(y,$,k,w,p[m+9],P,3951481745);w=i(w,g);y=i(y,v);$=i($,_);k=i(k,b)}var N=h(w)+h(y)+h($)+h(k);return N.toLowerCase()}},E,A=false,I=false;function z(){m.get(c,function(e){if(!e){if(""!=D._getQueryStrByName(u))f=a+"&_iwt_cid="+D._getQueryStrByName(u)+"&_iwt_UA="+D._getUAId();else f=a+"&_iwt_UA="+D._getUAId();U(f,function(e){m.set(c,e);d=e})}else{if(""!=D._getQueryStrByName(u))f=a+e+"&_iwt_cid="+D._getQueryStrByName(u)+"&_iwt_UA="+D._getUAId();else f=a+e+"&_iwt_UA="+D._getUAId();U(f,function(e){m.set(c,e);d=e})}})}function U(i,o){var r=t.createElement("script"),a=m.guid();e[a]=function(){try{o.apply(e,arguments);p.removeChild(r)}catch(t){}e[a]=n};r.setAttribute("type","text/javascript");r.setAttribute("charset","utf-8");var s=i+"&jsonp="+a+"&";if("undefined"==typeof _iwt_p1)s+="_iwt_p1=&";else s=s+"_iwt_p1="+_iwt_p1+"&";if("undefined"==typeof _iwt_p2)s+="_iwt_p2=&";else s=s+"_iwt_p2="+_iwt_p2+"&";if("undefined"==typeof _iwt_p3)s+="_iwt_p3=&";else s=s+"_iwt_p3="+_iwt_p3+"&";if("undefined"!=typeof _iwt_no_referrer&&!_iwt_no_referrer){var l=D.getReferrer();if(""!=l)s=s+"ref="+encodeURIComponent(l)+"&"}r.setAttribute("src",s);if(p.firstChild)p.insertBefore(r,p.firstChild);else p.appendChild(r)}e._iwt=D;D.FC=m}(window,document);return _iwt});define("module/stat/comscore",["module/global"],function(e,t,i){var n={beacon:function(e){var t=1.7,i=document,n=i.location,o=512,r=function(e,t){if(null==e)return"";e=(encodeURIComponent||escape)(e);if(t)e=e.substr(0,t);return e},a=["https:"==n.protocol?"https://sb":"http://b",".scorecardresearch.com/b?","c1=",r(e.c1),"&c2=",r(e.c2),"&rn=",Math.random(),"&c7=",r(n.href,o),"&c3=",r(e.c3),"&c4=",r(e.c4,o),"&c5=",r(e.c5),"&c6=",r(e.c6),"&c10=",r(e.c10),"&c15=",r(e.c15),"&c16=",r(e.c16),"&c8=",r(i.title),"&c9=",r(i.referrer,o),"&cv=",t,e.r?"&r="+r(e.r,o):""].join("");a=a.length>2080?a.substr(0,2075)+"&ct=1":a;var s=new Image;s.onload=function(){};s.src=a;return a},send:function(){n.beacon({c1:2,c2:6035715,c3:window.config&&config.item&&config.item.cid?config.item.cid:"",c4:window.location.href,c5:"",c6:window.comscore_c6||"",c10:e.juid||0,c11:e.uid||0,c15:""})}};return n});define("module/stat/ck",["tui/cookie","tui/net","module/login/login","module/stat/common","module/global"],function(e,t,i,n,o,r,a){var s=screen.width;var l=screen.height;function c(e,t){return e.replace(/\/?#.*|\/$/,"")===t.replace(/\/?#.*|\/$/,"")}window.tudouClickStat=n.mix({pvid:o.pvid,getRequest:function(r){var a=$(window).width();var s=$(window).height();var l=$(document).width();var c=r.eventId;var u=r.pvid;var d=r.channelId;var h=o.uid;var f=r.screenW;var p=r.screenH;var m=a;var g=s;var v=r.pageX-r.scrollLeft-Math.round(a/2);var _=r.pageY-r.scrollTop;var b=r.pageX-Math.round(l/2);var w=r.pageY;var y=o.juid;var k=o.seid;var S=encodeURIComponent(r.positionCode||"");var x=encodeURIComponent(n.referrer||"");var T=encodeURIComponent(r.targetUrl||"");var M="";var L=r.appData;L.referhost=e("referhost")||"";if(i.uid()){var C=$.trim(e("u_data")).split("_");if(C.length)C.forEach(function(e){e=e.split("|");L[e[0]]=e[1]})}$.extend(L,this.getData(c,S,r.event));var D={eid:c,pvid:u,chid:d,uid:h,juid:y,seid:k,sw:f,sh:p,bw:m,bh:g,bpx:v,bpy:_,ppx:b,ppy:w,pcode:r.positionCode||"",url:location.href,rurl:n.referrer||"",turl:r.targetUrl||"",ext:n.param(L)};t.getRequest("http://p.l.youku.com/tclick?"+n.param(D)+"&r="+ +new Date);var E=[];$.each(L,function(e,t){E.push(encodeURIComponent(e)+"="+encodeURIComponent(t))});M=E.join("|");var A=[c,u,d,h,f,p,m,g,v,_,b,w,y,k,S,x,T,M].join("|");t.getRequest("http://stats.tudou.com/ck2/?s="+A+"&r="+ +new Date)},send:function(e,t,i,o){var r=this;if(!e.target)e.target=e.srcElement||document;if(null==e.pageX&&null!=e.clientX){var a=document.documentElement;var u=document.body;e.pageX=r.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0);e.pageY=r.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}if("undefined"==typeof e.pageX)return;var d=e.target;if(!o){d=n.getStatTarget(e.target);if(!d)return}if("A"==d.nodeName&&$(d).attr("data-openurl"))return;var h=false;var f=n.getTrueLink(d);if("A"!==d.nodeName||""===f||c(f,location.href))h=true;if("ck"==$(d).attr("data-stat-role")&&""!==f)h=false;var p=$(d).attr("data-ck");if(p)$.each(p.split("&"),function(e,i){var n=i.split("=");if(2!==n.length)return;t[n[0]]=n[1]});r.getRequest({event:e,eventId:h?2:1,pvid:r.pvid,channelId:window.cid||0,positionCode:n.getPositionCode(d),targetUrl:h?"":f,pageX:e.pageX,pageY:e.pageY,scrollLeft:$(window).scrollLeft(),scrollTop:$(window).scrollTop(),screenW:s,screenH:l,appData:t||{}});if(i)i.call(r,{isButton:h,targetUrl:f})},init:function(){var e=this;$(document.body).mousedown(function(t){e.send(t,{})})},getXpathFromPositionCode:n.getXpathFromPositionCode,getElementByXPath:n.getElementByXPath,getTrueLink:n.getTrueLink,getStatTarget:n.getStatTarget});a.tudouClickStat=tudouClickStat;a.init=function(){tudouClickStat.init()}});define("module/stat/combo-stat",["tui/cookie"],function(e,t,i){if(window.ComboStat)return window.ComboStat;var n={cookie:function(t,i,n){if("undefined"==typeof i)return e(t);var o={domain:"tudou.com",path:"/"};if(!n)o.expires=36500;e(t,i,o)},uuid:function(e){e=e||6;var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var i="";var n=t.length;for(var o=0;o<e;o++){var r=parseInt(Math.random()*Math.pow(10,6))%n;i+=t[r]}return(new Date).getTime()+i},init:function(){var e=this;if(e.pvid)return;var t=e.cookie("ypvid")||"";var i=e.uuid();e.cookie("ypvid",i,true);var n=e.cookie("yseid");var o=1;var r=1;if(!n||(new Date).getTime()>(parseInt(e.cookie("yseidtimeout"))||0)){n=e.uuid();e.cookie("yseid",n,true);e.cookie("ysestep",1);r=parseInt(e.cookie("yseidcount")||0)+1;e.cookie("yseidcount",r)}else{o=parseInt(e.cookie("ysestep")||0)+1;e.cookie("ysestep",o)}var a=(new Date).getTime()+120*6e4;e.cookie("yseidtimeout",a,true);var s=e.cookie("ycid")||"";var l=window.cid||window.config&&window.config.item&&window.config.item.cid||0;e.cookie("ycid",l,true);var c=parseInt(e.cookie("ystep")||0)+1;e.cookie("ystep",c);e.juid=e.cookie("yjuid")||"";e.seid=n;e.pvid=i;e.cid=l;e.referPvid=t;e.referCid=s;e.step=c;e.seStep=o;e.seidTimeout=a;e.seidCount=r;e.isFrame=top.location!=window.location?1:0;e.noCookie=!navigator.cookieEnabled?1:0}};n.init();return n});define("module/stat/pv",["tui/browser","tui/util","tui/cookie","tui/net","module/login/login","module/stat/common","module/stat/combo-stat","module/global"],function(e,t,i,n,o,r,a,s,l,c){var u=Date.now();var d=window.config||{};if(!d.item)d.item={};var h=window.pageId||d.pageId;var f=r.mix({param:function(e){var t=[];$.each(e,function(e,i){if(""!==i)t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))});return t.join("&")},getExt:function(){var t=this;var n={};if(a.isFrame)n.frame=a.isFrame;if(a.noCookie)n.noCookie=a.noCookie;n.referhost=i("referhost")||"";if(screen.availWidth-$(window).width()<20)n.winheight=$(window).height();if(h)if(h>=1&&h<=7){var l=(r.referrer||"").replace(/\?.*$/,"");if(/tudou\.com\/(listplay|programs\/view|albumplay|wlplay\/view)\//.test(l))n.preferurl=i("preferurl")||"";else n.preferurl=l;i("preferurl",l,{domain:"tudou.com",path:"/"})}if(e.isMobile)n.mtype=e.iOS||(0!==e.android?e.isPad?"androidpad":"androidphone":0!==e.wphone?"wphone":"other");n.tjuid=s.juid||"";$.extend(n,t.getData());if(o.uid()){var c=$.trim(i("u_data")).split("_");if(c.length)c.forEach(function(e){e=e.split("|");n[e[0]]=e[1]})}return t.param(n)},send:function(){var e={};e.did=2;e.juid=a.juid;e.sid=a.seid;e.uid=s.uid||0;e.pid=a.pvid;e.cid=a.cid;e.rurl=r.referrer;e.rpid=a.referPvid;e.rct=a.referCid;e.ext=this.getExt();e.stp=a.step;e.sstp=a.seStep;e.scnt=a.seidCount;n.getRequest("http://p.l.youku.com/compvlog?"+this.param(e));this.trigger("send")}});var p=r.mix({send:function(){var e=1;var o=window.SUBDOMAIN;var a=0;var l=s.uid;var c=s.juid;var u=s.seid;var h=+new Date,f=0,p="",m=h,g=i("pageStep"),v=g?Math.max(1,g):1,_=encodeURIComponent(r.referrer);var b=this.getData(e,p);a=b.pageFlag||0;f="1"+(window.abtest||d.abtest||0)+0+t.pad(window.cid||d.item.cid||0,3)+t.pad(0,3)+(window.top==window?"00":"01")+(b.timeOfRef||"");n.getRequest("http://stats.tudou.com/pv3/?s="+[e,l,v,"",f,c,u,a,p,_||""].join("*_*")+"&r="+ +new Date);this.trigger("send")},getPCode:r.getPositionCode,getXByPC:r.getXpathFromPositionCode,getElByX:r.getElementByXPath,getTrueLink:r.getTrueLink,getStatTarget:r.getStatTarget});c.ComboPvStat=f;c.tudouStat=p;c.init=c.send=function(){c.pvCount=c.pvCount||0;c.pvCount++;if(c.pvCount>1){a.pvid="";a.init();s.pvid=r.pvid()}f.send();p.send()}});try{if(!/^http:\/\/(js|css)\.tudouui\.com\//.test(require.rootUrl))document.write("<scri"+'pt charset="utf-8" src="'+require.rootUrl+"/dist/js/autodomain.js?t="+Date.now()+'.js"></s'+"cript>")}catch(e){}define("m",["tui/net","module/stat/common","module/stat/pv","module/stat/ck","module/stat/comscore","module/stat/iwt","module/mobile/sidebar/sidebar","module/mobile/search/search","module/mobile/gotop","module/stat/jserror"],function(e,t,i,n,o,r,a,s,l,c,u,d){$.getScript=e.getScript;$.getRequest=e.getRequest;d.sendPv=function(){r.track();o.send();i.init()};d.init=function(e){if(!e)e={};a.create("sidebar",e.sidebar);s.create("search",e.search);l.create("gotop",e.gotop);d.sendPv();n.init()}});require(["m"],function(){});;